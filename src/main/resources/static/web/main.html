<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>iHome</title>
    <link rel="shortcut icon" href="../img/home.jpeg" type="image/x-icon" />
    <link rel="stylesheet" href="../css/style2.css" />
      <script src="../bootstrap3/jquery-1.9.1.min.js"></script>
  </head>
  <body>
    <header>
      <nav class="nav">
        <a class="nav__logo" href="main.html"></a>
        <!-- <img src="img/home.jpeg"  id="logo" /> -->
        <input type="text" placeholder="Search" />
        <button class="search"><img src="../img/search.png" alt="" /></button>
        <ul class="nav__links">
          <li class="nav__item">
            <a class="nav__link" href="/web/section-1.html">Manage permissions</a>
          </li>
          <li class="nav__item">
            <a class="nav__link" href="/web/section-2.html">Manage my publications</a>
          </li>
          <li class="nav__item">
            <a class="nav__link" href="#">Change password</a>
          </li>
          <li class="nav__item"><a  href="/web/login.html"
            ><button class="btn">Log out</button></a></li>
        </ul>
      </nav>
    </header>
    <div class="adBoard-wrapper">
      <div class="adBoard">
<!--        <div class="content">-->
<!--          <div class="user">user-1</div>-->
<!--          <div class="pic">-->
<!--            <img src="../img/house1.png" alt="" />-->
<!--            <img src="../img/house2.png" alt="" />-->
<!--            <img src="../img/house2.png" alt="" />-->
<!--          </div>-->
<!--          <div class="detail">-->
<!--            <span>1000$</span>-->
<!--            <span>Short term</span>-->
<!--          </div>-->
<!--          <div class="position">Hong Kong Island Cayman Rise, Kennedy Town</div>-->
<!--        </div>-->
<!--        <div class="content">-->
<!--          <div class="user">user-1</div>-->
<!--          <div class="pic">-->
<!--            <img src="../img/house1.png" alt="" />-->
<!--            <img src="../img/house2.png" alt="" />-->
<!--            <img src="../img/house2.png" alt="" />-->
<!--          </div>-->
<!--          <div class="detail">-->
<!--            <span>1000$</span>-->
<!--            <span>Short term</span>-->
<!--          </div>-->
<!--          <div class="position">Hong Kong Island Cayman Rise, Kennedy Town</div>-->
<!--        </div>-->
<!--        <div class="content">-->
<!--          <div class="user">user-1</div>-->
<!--          <div class="pic">-->
<!--            <img src="../img/house1.png" alt="" />-->
<!--            <img src="../img/house2.png" alt="" />-->
<!--            <img src=".../img/house2.png" alt="" />-->
<!--          </div>-->
<!--          <div class="detail">-->
<!--            <span>1000$</span>-->
<!--            <span>Short term</span>-->
<!--          </div>-->
<!--          <div class="position">Hong Kong Island Cayman Rise, Kennedy Town</div>-->
<!--        </div>-->
      </div>
      <ul class="pagination">
        <li><a id="last">«</a></li>
<!--        <li><a href="#">1</a></li>-->
<!--        <li><a class="active" href="#">2</a></li>-->
<!--        <li><a href="#">3</a></li>-->
<!--        <li><a href="#">4</a></li>-->
<!--        <li><a href="#">5</a></li>-->
<!--        <li><a href="#">6</a></li>-->
<!--        <li><a href="#">7</a></li>-->
        <li><a id="next" >»</a></li>

      </ul>
    </div>
    <div class="repassword-container hidden" >
      <div class="back"><img src="/img/back.png" alt=""></div>
     <div class="repassword-form">
      <form>
        <!-- 输入账户密码并确认密码 -->
		    <div > <input class="repassword"type="text" placeholder="User name"></div>
			  <div ><input class="repassword" type="password"placeholder=" New Password"></div>
			  <div > <input class="repassword"type="password" placeholder="Comfirm New Password"></div> 
        
        <!-- 注册按钮 -->
         <input type="submit" class="repassword-button" value="Confirm Modification">
      </form>
     </div>
    </div>
    <script src="../js/script-2.js"></script>
  <script>

    $(document).ready(function (){
// 加载广告板信息
      let preData = $(".adBoard");
      let temp = '';
      let pageId=1;
      let allPage=0;

      $.ajax({
        url: `/ads/getAdsByPageNumber?id=${pageId}`,
        type: "GET",
        dataType: "json",
        async: true,
        success: function (data){
          let contents = data;
          preData.empty();
          allPage=Math.floor((contents.data.allAdsNumber-1)/3)+1;
            $('.pageInfo').empty();
            $('ul.pagination').append(`<li class="pageInfo">Page:${pageId} Total:${allPage}</li>`);
          $.each(contents.data.adsList,function (i,item) {
            temp += "<div class='content'>";
            temp += "<div class='user'>"+item.publishName+"</div>";
            temp +="<div class=\"pic\">"
            temp +=  "<img src='" +"http://localhost:8080/"+item.photoName+"' />";
            temp += "</div><div class='detail'>";
            temp +=   "<span>"+item.price+"$"+"</span></div>"
            temp += "<div class='position'></div>";
            temp += "</div>";
          });
          preData.append(temp);
          temp="";
        },
        //请求失败
        error: function (e) {
          alert("request failed !")
        }
      })
  //实现分页功能
        $("#next").click(function (){
            preData.empty();
            pageId++;
            if(pageId>allPage){
                pageId=allPage;
                alert('已经到尾哩');
            }
            $.ajax({
                url: `/ads/getAdsByPageNumber?id=${pageId}`,
                type: "GET",
                dataType: "json",
                async: true,
                success: function (data){
                    let contents = data;
                    preData.empty();
                    allPage=Math.floor((contents.data.allAdsNumber-1)/3)+1;
                    $('.pageInfo').empty();
                    $('ul.pagination').append(`<li class="pageInfo">Page:${pageId} Total:${allPage}</li>`);
                    console.log(data)
                    $.each(contents.data.adsList,function (i,item) {

                        temp += "<div class='content'>";
                        temp += "<div class='user'>"+item.publishName+"</div>";
                        temp +="<div class=\"pic\">"
                        temp +=  "<img src='" +"http://localhost:8080/"+item.photoName+"' />";
                        temp += "</div><div class='detail'>";
                        temp +=   "<span>"+item.price+"$"+"</span></div>"
                        temp += "<div class='position'></div>";
                        temp += "</div>";
                    });
                    preData.append(temp);
                    temp="";
                },
                //请求失败
                error: function (e) {
                    alert("request failed !")
                }
            })
        })
        $("#last").click(function (){
            preData.empty();
            pageId--;
            if(pageId==0){
                pageId=1;
                alert('已经到头哩');
            }
            $.ajax({
                url: `/ads/getAdsByPageNumber?id=${pageId}`,
                type: "GET",
                dataType: "json",
                async: true,
                success: function (data){
                    let contents = data;
                    preData.empty();
                    allPage=Math.floor((contents.data.allAdsNumber-1)/3)+1;
                    $('.pageInfo').empty();
                    $('ul.pagination').append(`<li class="pageInfo">Page:${pageId} Total:${allPage}</li>`);
                    $.each(contents.data.adsList,function (i,item) {
                        temp += "<div class='content'>";
                        temp += "<div class='user'>"+item.publishName+"</div>";
                        temp +="<div class=\"pic\">"
                        temp +=  "<img src='" +"http://localhost:8080/"+item.photoName+"' />";
                        temp += "</div><div class='detail'>";
                        temp +=   "<span>"+item.price+"$"+"</span></div>"
                        temp += "<div class='position'></div>";
                        temp += "</div>";
                    });
                    preData.append(temp);
                    temp="";
                },
                //请求失败
                error: function (e) {
                    alert("request failed !")
                }
            })
        })




    });
  </script>
  </body>
</html>
