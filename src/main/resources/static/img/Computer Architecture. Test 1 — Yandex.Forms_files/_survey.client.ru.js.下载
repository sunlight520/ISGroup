!function(e){var t=function(){var e,t={};(function(t){if("function"==typeof t.I18N&&t.I18N._proto)return t.I18N;void 0===n&&(n={}),e=t;var r="_",a="__",o={},i=[],s=!1,l="undefined"!=typeof console&&"function"==typeof console.log;function c(e,t){if(s&&l){var n="keyset: "+t._keyset+" key: "+t._key+" (lang: "+t._lang+")";console.log(e,n)}}function u(){this._lang="",this._prj="lego",this._keyset="",this._key=""}u.prototype={lang:function(e){return this._lang=e,this},project:function(e){return this._prj=e,this},keyset:function(e,t){var n;return t&&function(e){e&&i.push(e)}(this._keyset),this._keyset="string"==typeof(n=e)?n:n.block+(n.elem?a+n.elem:"")+(n.modName?r+n.modName+r+n.modVal:""),this},key:function(e){return this._key=e,this},decl:function(e){var t=function(e){var t={};return e.split(a).forEach(function(e,n){var a=[n?"elem":"block","mod","val"];e.split(r).forEach(function(e,n){t[a[n]]=e})}),t}(this._keyset),i="i-tanker"===t.block?"tanker":this._prj,s=t.elem||this._keyset,l=this._key;(s=(i=n[i]||(n[i]={}))[s]||(i[s]={}))[l]="function"==typeof e?e:function(){return e};var c=o[this._lang]||(o[this._lang]={});(c[this._keyset]||(c[this._keyset]={}))[l]=e},val:function(e,t){var n=o[this._lang]&&o[this._lang][this._keyset];if(!n)return c("[I18N_NO_KEYSET] %s",this),"";var r=typeof(n=n[this._key]);return"undefined"===r?(c("[I18N_NO_VALUE] %s",this),""):"string"===r?n:n.call(t||this,e)},_cache:function(){return o}};var d=function(e,t,n){return d.keyset(e).key(t,n)};d._proto=new u,d.project=function(e){return this._proto.project(e),this},d.keyset=function(e){return this._proto.keyset(e,!0),this},d.key=function(e,t){var n,r,a=this._proto;return a.lang(this._lang).key(e),n=a.val(t,d),(r=i.length&&i.pop())&&a.keyset(r,!1),n},d.decl=function(e,t,n){var r,a=this._proto;for(r in n&&n.lang&&a.lang(n.lang),a.keyset(e),t)t.hasOwnProperty(r)&&a.key(r).decl(t[r]);return this},d.lang=function(e){return void 0!==e&&(this._lang=e),this._lang},d.debug=function(e){s=!!e},d.lang("ru"),t.I18N=d})(void 0===(e=t)?{}:e);var n=t.I18N;return n.decl("attach",{"button-text":"Выбрать файл","no-file":"файл не выбран"},{lang:"ru"}),n.decl("auth",{auth:"Авторизация","fill-input":"Заполните это поле",login:"Логин",logon:"Войти",more:"Ещё",password:"Пароль",register:"Регистрация",remember:"Вспомнить пароль","social-log-in":"Войти при помощи социальной сети",temporary:"Чужой компьютер","wrong-characters":"Недопустимый ввод","wrong-keyboard-layout":"Смените раскладку","wrong-password":"Пароль не может совпадать с логином"},{lang:"ru"}),n.decl("b-page",{title:"Yandex.Forms"},{lang:"ru"}),n.decl("b-statcounter__metrika",{JSERR_incorrectID:"Incorrect ID has been passed."},{lang:"ru"}),n.decl("copyright",{link:function(e){return"ООО «"+e.content+"»"},yandex:"ЯНДЕКС"},{lang:"ru"}),n.decl("date-range-input",{from:"с",to:"по"},{lang:"ru"}),n.decl("file",{"default-error-text":"Что-то пошло не так."},{lang:"ru"}),n.decl("file-upload",{"files-limit-error":function(e){return"Можно прикрепить не более "+e.count+" "+this.keyset("i-tanker__dynamic").key("plural_adv",{count:e.count,one:"файла",some:"файлов",many:"файлов",none:"файлов"})},"limit-hint":function(e){return"До "+e.count+" "+this.keyset("i-tanker__dynamic").key("plural_adv",{count:e.count,one:"файл",some:"файла",many:"файлов",none:"файлов"})+" (общий размер — до "+e.size+" "+this.keyset("file-upload").key("mb",{})+")."},"limit-hint-one-file":function(e){return"Один файл размером до "+e.size+" "+this.keyset("file-upload").key("mb",{})+"."},mb:"МБ","size-limit-error":function(e){return"Размер загружаемых файлов превышает "+e.size+" "+this.keyset("file-upload").key("mb",{})},"upload-text":"Загрузить"},{lang:"ru"}),n.decl("footer",{about:"О компании","about-url":"//company.yandex.ru",advert:"Реклама","advert-url":"//advertising.yandex.ru/kupislova.xml?advertising",apps:"Мобильные приложения","apps-url":"//mobile.yandex.ru",stat:"Статистика",termsofuse:"Лицензия на поиск","termsofuse-url":"//legal.yandex.ru/termsofuse/",confidential:"Конфиденциальность",copyright:"Яндекс","created-by-user-with":function(e){return"Создано пользователем с помощью <a href="+e.url+' target="_blank" class="link">Yandex.Forms</a>'},"created-with":function(e){return'Создано с помощью <a href="'+e.url+'" target="_blank" class="link">Yandex.Forms</a>'},desc1:"Данная форма была создана при помощи сервиса",desc2:"Яндекс не несет ответственности за содержание настоящей формы, а также за обработку размещенных Вами в форме данных. В случае выявления нарушения вы можете обратится в ",extra:"Данная форма была создана при помощи сервиса <connect>. Яндекс не несет ответственности за содержание настоящей формы, а также за обработку размещенных Вами в форме данных. В случае выявления нарушения вы можете обратится в <support>.",feedback:"Обратная связь",notResponsible:function(e){return'Эта форма создана пользователем. <a href="'+e.url+'" target="_blank" class="link link_not-responsible">Условия использования</a> Яндекс.Форм'},notResponsibleIframe:function(e){return"Эта форма создана пользователем.<br/>"+e.link+" Яндекс.Форм"},support:"службу поддержки",termsOfUse:"Условия использования",termsOfUseIframe:"Условия использования",tryForms:function(e){return"Создайте опрос за пару минут.<br>"+e.link},tryFormsLink:"Попробуйте Яндекс.Формы",yaconnect:"Яндекс.Коннект"},{lang:"ru"}),n.decl("header2",{service:"Формы"},{lang:"ru"}),n.decl("i-services",{404:"404",adresa:"Адреса",advertising:"Реклама",afisha:"Афиша",all:"Все сервисы",api:"API",appmetrica:"AppMetrica",appsearch:"Приложения",audience:"Аудитории",auto:"Авто",autoru:"Авто.ру",avia:"Авиабилеты",aziada:"Азиада",ba:"Баян",backapv:"Партнер Я.Карт",balance:"Баланс",bar:"Бар","bar-ie":"Бар для ИЕ","bar-ie9":"Бар для ИЕ9",bayan:"Баннеры Яндекса",blogs:"Блоги",books:"Книги",browser:"Браузер",calendar:"Календарь",captcha:"ой...",catalogwdgt:"Каталог виджетов",chrome:"Хром с поиском Яндекса",city:"Города",cityday:"День города",clickhouse:"ClickHouse",collection:"Коллекция",company:"Компания",contest:"Contest",delivery:"Доставка",desktop:"Персональный поиск",direct:"Директ","direct.market":"Маркет",disk:"Диск",display:"Дисплей",ege:"ЕГЭ",expert:"Эксперт",feedback:"Обратная связь",feedback2:"Обратная связь",ff:"ФФ с поиском Яндекса",fotki:"Фотки",fresh:"Свежее",games:"Игрушки",geocontext:"Геоконтекст",goroda:"Города",help:"Помощь",i:"Мои сервисы",ie:"ИЕ с поиском Яндекса",images:"Картинки","images-com":"Картинки",interests:"Интересы",internet:"Интернет",kassa:"Касса",keyboard:"Клавиатура",kraski:"Краски",kuda:"Куда все идут",large:"Яндекс для слабовидящих",legal:"Правовые документы",lenta:"Лента",libra:"Библиотека",literacy:"Неделя борьбы за грамотность",local:"Локальная сеть",lost:"Незабудки",love:"День взаимного тяготения — 13 августа",mail:"Почта",maps:"Карты","maps-wiki":"Народная карта",market:"Маркет","market.advertising":"Маркет",master:"Мастер",metrika:"Метрика",metro:"Метро",mobile:"Мобильный",moikrug:"Мой Круг",money:"Деньги",museums:"Дни исторического и культурного наследия",music:"Музыка","music-partner":"Музыка: статистика",nahodki:"Мои находки",nano:"Нано",newhire:"Наниматор",news:"Новости",notifications:"Нотификационная панель",oauth:"Авторизация",online:"Онлайн",openid:"OpenID",opera:"Opera Software",opinion:"Цитаты",partners:"Рекламная сеть",partnersearch:"Поиск для партнеров",passport:"Паспорт",pdd:"Почта для домена",peoplesearch:"Люди",perevod:"Переводчик",probki:"Пробки",pulse:"блоги: пульс",punto:"Punto switcher",pvo:"Ответы",rabota:"Работа",radar:"Радар",ramazan:"",rasp:"Расписания",realty:"Недвижимость",referats:"Рефераты",rk:"Есть вопросы?",root:"Яндекс.Олимпиада для Unix администраторов",school:"Школа",search:"Поиск",server:"Сервер",shtrafi:"Штрафы",site:"Поиск для сайта",slovari:"Словари",so:"Самооборона",social:"Социализм",soft:"Программы",sport:"Спорт",sprav:"Справочник",start:"Стартовая страница",stat:"Статистика",subs:"Подписки",taxi:"Такси",telephony:"Телефония",terms:"Разговорник",tests:"Тесты и опросы",tickets:"Билеты",time:"Яндекс.Время",toloka:"Яндекс.Толока",toster:"Тосты",translate:"Переводчик",tune:"Настройки",tv:"ТВ",uslugi:"Услуги",video:"Видео","video-com":"Видео",vno:"ВНО",wdgt:"Виджеты",weather:"Погода",webmaster:"Вебмастер","webmaster-api":"API Вебмастера",widgets:"Виджеты",wordstat:"Статистика",wow:"Я.ру",www:"Поиск",xmlsearch:"XML",yaca:"Каталог",yamb:"Медийные баннеры",zakladki:"Закладки"},{lang:"ru"}),n.decl("i-tanker__days",{acc1:"в понедельник",acc2:"во вторник",acc3:"в среду",acc4:"в четверг",acc5:"в пятницу",acc6:"в субботу",acc7:"в воскресенье",n1:"понедельник",n2:"вторник",n3:"среда",n4:"четверг",n5:"пятница",n6:"суббота",n7:"воскресенье",name:function(e){return function(e){return n.tanker.days[(e.short?"short":"n")+e.day]()}.call(this,e)},short1:"пн",short2:"вт",short3:"ср",short4:"чт",short5:"пт",short6:"сб",short7:"вс",today:"сегодня",tomorrow:"завтра",yesterday:"вчера"},{lang:"ru"}),n.decl("i-tanker__dynamic",{gender:function(e){return function(e){return e[e.gender]}.call(this,e)},plural:function(e){return function(e){var t=isNaN(parseInt(e.count))?0:e.count,n=t%10,r=t%100;return 1==n&&11!=r?e.one:n>1&&n<5&&(r<10||r>20)?e.some:e.many}.call(this,e)},plural_adv:function(e){return function(e){return 0===(isNaN(parseInt(e.count))?0:e.count)?e.none:this.keyset("i-tanker__dynamic").key("plural",{count:e.count,one:e.one,some:e.some,many:e.many})}.call(this,e)},toggle:function(e){return function(e){return Boolean(e.condition)?e.true:e.false}.call(this,e)}},{lang:"ru"}),n.decl("i-tanker__months",{g1:"Января",g10:"Октября",g11:"Ноября",g12:"Декабря",g2:"Февраля",g3:"Марта",g4:"Апреля",g5:"Мая",g6:"Июня",g7:"Июля",g8:"Августа",g9:"Сентября",n1:"Январь",n10:"Октябрь",n11:"Ноябрь",n12:"Декабрь",n2:"Февраль",n3:"Март",n4:"Апрель",n5:"Май",n6:"Июнь",n7:"Июль",n8:"Август",n9:"Сентябрь",name:function(e){return function(e){var t=n.tanker.months[(e.case||"n")+e.month]();return Boolean(e.lowercase)?t.toLowerCase():t}.call(this,e)},short1:"янв",short10:"окт",short11:"ноя",short12:"дек",short2:"фев",short3:"мар",short4:"апр",short5:"май",short6:"июн",short7:"июл",short8:"авг",short9:"сен"},{lang:"ru"}),n.decl("m-datepicker",{clear:"очистить"},{lang:"ru"}),n.decl("m-datepicker__short-days",{1:"пн",2:"вт",3:"ср",4:"чт",5:"пт",6:"сб",7:"вс"},{lang:"ru"}),n.decl("payment",{"title-ac":"Банковской картой","title-mc":"Со счёта телефона","title-pc":"Яндекс.Деньгами"},{lang:"ru"}),n.decl("popup",{add:"Добавить",cancel:"Отмена",revert:"Вернуть",apply:"Применить"},{lang:"ru"}),n.decl("survey",{"add-more":"Ещё","attach-file":"Не приложен файл","attach-file-already-uploaded":function(e){return"Вы уже загружали файл с именем <b>"+e.file+"</b>.<br/> Если хотите его заменить, прикрепите новый файл."},"attach-file-max-file-size":function(e){return"Максимальный размер файла: <b>"+e.size+" "+this.keyset("file-upload").key("mb",{})+"</b>."},"captcha-updater":"показать другую картинку",choose:"Выбрать","choose-options":"Не выбран ни один из вариантов",confirm:"Вы не подтвердили своё согласие на передачу анкеты с вашими персональными данными","empty-field":"Это поле обязательно","error-text":"Не все обязательные поля заполнены верно.","exceeded-max-amount":function(e){return"Максимум"+e.max+"₽"},feedback:"Форма обратной связи","feedback-button-text":"Оправить отзыв","file-too-large":"Файл слишком большой","incorrect-date":"Неверная дата","incorrect-number":"Введите целое число.","invalid-email":"Введён некорректный email","next-button-text":"Далее","no-options":"Для этого поля нет данных, но оно обязательно для заполнения.","prev-button-text":"Назад",registration:"Регистрация","registration-button-text":"Зарегистрироваться","repeat-submit":"Что-то пошло не так. Пожалуйста, отправьте форму еще раз.","save-changes":"Сохранить изменения",simple_form:"","simple_form-button-text":"Отправить","success-simple_form":"Ваша заявка принята!",sum:"Сумма"},{lang:"ru"}),n.decl("survey-header",{"back-startups-contact":"Финансовая поддержка"},{lang:"ru"}),n.decl("ticker__text",{notifications:"Уведомлений"},{lang:"ru"}),n.decl("user",{enter:"Войти",exit:"Выйти",letter:function(e){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:e.count,one:"новое письмо",some:"новых письма",many:"новых писем",none:"Нет новых писем"})},letter_compose:"Написать письмо",passport:"Паспорт",tune:"Настройка",upload_files:"Мой Диск"},{lang:"ru"}),n.decl("user2",{"add-account":"Добавить аккаунт","edit-accounts":"Редактировать список",enter:"Войти",exit:"Выйти",help:"Помощь",mail:function(e){return this.keyset("i-tanker__dynamic").key("plural_adv",{count:e.count,one:"новое письмо",some:"новых письма",many:"новых писем",none:"Нет новых писем"})},mail_compose:"Написать письмо",passport:"Управление аккаунтом",settings:"Настройки",upload_files:"Мой диск",ya_plus:"Получить Плюс",ya_plus_on:"Плюс"},{lang:"ru"}),n.lang("ru"),n}();"object"==typeof exports&&(module.exports=t),"object"==typeof modules&&modules.define("i18n",function(e){e(t)}),(e.BEM||(e.BEM={})).I18N=t}("undefined"!=typeof window?window:global);
var BEMHTML,_slicedToArray=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,s=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){s=!0,i=t}finally{try{!r&&o.return&&o.return()}finally{if(s)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}!function(t){function e(e){var r={},s=new(function(e,r){return function(n){if("object"===(void 0===r?"undefined":_typeof(r))&&void 0!==e)e.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).bemhtml=n()}}(function(){return function t(e,r,s){function i(o,c){if(!r[o]){if(!e[o]){var l="function"==typeof n&&n;if(!c&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[o]={exports:{}};e[o][0].call(h.exports,function(t){var n=e[o][1][t];return i(n||t)},h,h.exports,t,e,r,s)}return r[o].exports}for(var a="function"==typeof n&&n,o=0;o<s.length;o++)i(s[o]);return i}({1:[function(t,e,n){var r=t("inherits"),s=t("../bemxjst/match").Match,i=t("../bemxjst/entity").Entity;function a(t){this.bemxjst=t,this.jsClass=null,this.tag=new s(this,"tag"),this.attrs=new s(this,"attrs"),this.js=new s(this,"js"),this.mix=new s(this,"mix"),this.bem=new s(this,"bem"),this.cls=new s(this,"cls"),i.apply(this,arguments)}r(a,i),n.Entity=a,a.prototype.init=function(t,e){this.block=t,this.elem=e,this.jsClass=this.bemxjst.classBuilder.build(this.block,this.elem)},a.prototype._initRest=function(t){"default"===t?this.rest[t]=this.def:"tag"===t||"attrs"===t||"js"===t||"mix"===t||"bem"===t||"cls"===t||"content"===t?this.rest[t]=this[t]:this.rest.hasOwnProperty(t)||(this.rest[t]=new s(this,t))},a.prototype.defaultBody=function(t){return this.bemxjst.render(t,this,this.tag.exec(t),!1!==t.ctx.js?this.js.exec(t):void 0,this.bem.exec(t),this.cls.exec(t),this.mix.exec(t),this.attrs.exec(t),this.content.exec(t))}},{"../bemxjst/entity":5,"../bemxjst/match":8,inherits:11}],2:[function(t,e,n){var r=t("inherits"),s=t("../bemxjst/utils"),i=t("./entity").Entity,a=t("../bemxjst");function o(t){a.apply(this,arguments),this._shortTagCloser=void 0!==t.xhtml&&t.xhtml?"/>":">",this._elemJsInstances=t.elemJsInstances,this._omitOptionalEndTags=t.omitOptionalEndTags,this._unquotedAttrs=void 0!==t.unquotedAttrs&&t.unquotedAttrs}r(o,a),e.exports=o,o.prototype.Entity=i,o.prototype.runMany=function(t){var e="",n=this.context,r=n.position,s=n._notNewList;if(s?n._listLength+=t.length-1:(n.position=0,n._listLength=t.length),n._notNewList=!0,this.canFlush)for(var i=0;i<t.length;i++)e+=n._flush(this._run(t[i]));else for(i=0;i<t.length;i++)e+=this._run(t[i]);return s||(n.position=r),e},o.prototype.render=function(t,e,n,r,i,a,o,c,l){var u=t.ctx;if(void 0===n)n="div";else if(!n)return l||0===l?this._run(l):"";var h,d="<"+n,p=u.js;!1!==p&&(!0===r&&(r={}),r&&r!==u.js?!0!==p&&(r=s.extend(p,r)):!0===p&&(r={})),r&&((h={})[e.jsClass]=r);var m=void 0!==i?i:e.block||e.elem;m=!!m;var f=h&&(this._elemJsInstances?e.block||e.elem:e.block&&!e.elem);if(!m&&!a)return this.renderClose(d,t,n,c,m,u,l);d+=" class=";var x="";if(m){if(x+=e.jsClass,x+=this.buildModsClasses(e.block,e.elem,e.elem?t.elemMods:t.mods),u.mix&&o&&o!==u.mix&&(o=[].concat(o,u.mix)),o){var y=this.renderMix(e,o,h,f);x+=y.out,h=y.jsParams,f=y.addJSInitClass}a&&(x+=" "+("string"==typeof a?s.attrEscape(a).trim():a))}else x+="string"==typeof a?s.attrEscape(a).trim():a;return f&&(x+=" i-bem"),d+=this._unquotedAttrs&&s.isUnquotedAttr(x)?x:'"'+x+'"',m&&h&&(d+=" data-bem='"+s.jsAttrEscape(JSON.stringify(h))+"'"),this.renderClose(d,t,n,c,m,u,l)};var c={html:1,head:1,body:1,p:1,ul:1,ol:1,li:1,dt:1,dd:1,colgroup:1,thead:1,tbody:1,tfoot:1,tr:1,th:1,td:1,option:1,rb:1,rt:1,rtc:1,rp:1,optgroup:1};o.prototype.renderClose=function(t,e,n,r,i,a,o){var l=t;return l+=this.renderAttrs(r,a),s.isShortTag(n)?(l+=this._shortTagCloser,this.canFlush&&(l=e._flush(l))):(l+=">",this.canFlush&&(l=e._flush(l)),(o||0===o)&&(l+=this.renderContent(o,i)),this._omitOptionalEndTags&&c.hasOwnProperty(n)||(l+="</"+n+">")),this.canFlush&&(l=e._flush(l)),l},o.prototype.renderAttrs=function(t,e){var n="";if(s.isObj(t)||s.isObj(e.attrs))for(var r in t=s.extend(t,e.attrs)){var i=t[r];if(void 0!==i&&!1!==i&&null!==i)if(!0===i)n+=" "+r;else{var a=s.isSimple(i)?i:this.context.reapply(i);n+=" "+r+"=",n+=this._unquotedAttrs&&s.isUnquotedAttr(a)?a:'"'+s.attrEscape(a)+'"'}}return n},o.prototype.renderMix=function(t,e,n,r){var s={},i=this.context,a=n,o=r;s[t.jsClass]=!0,Array.isArray(e)||(e=[e]);for(var c=this.classBuilder,l="",u=0;u<e.length;u++){var h=e[u];if(h){"string"==typeof h&&(h={block:h,elem:void 0});var d=!1;h.elem?d=h.elem!==t.elem&&h.elem!==i.elem||h.block&&h.block!==t.block:h.block&&(d=!(h.block===t.block&&h.mods)||h.mods&&t.elem);var p=h.block||h._block||i.block,m=h.elem||h._elem||i.elem,f=c.build(p,m),x=h.elem||h._elem||(h.block?void 0:i.elem);if(d&&(l+=" "+c.build(p,x)),l+=this.buildModsClasses(p,x,h.elem||!h.block&&(h._elem||i.elem)?h.elemMods:h.mods),h.js&&(a||(a={}),a[c.build(p,h.elem)]=!0===h.js?{}:h.js,o||(o=p&&!h.elem)),d&&!s[f]){s[f]=!0;var y=this.entities[f];if(y){var g=i.block,b=i.elem,v=y.mix.exec(i);if(i.elem=b,i.block=g,v)for(var k=0;k<v.length;k++){var _=v[k];if(_&&(!_.block&&!_.elem||!s[c.build(_.block,_.elem)])){if(_.block)continue;_._block=p,_._elem=m,e=e.slice(0,u+1).concat(_,e.slice(u+1))}}}}}}return{out:l,jsParams:a,addJSInitClass:o}},o.prototype.buildModsClasses=function(t,e,n){if(!n)return"";var r,s="";for(r in n)if(n.hasOwnProperty(r)&&""!==r){var i=n[r];if(i||0===i){"boolean"!=typeof i&&(i+="");var a=this.classBuilder;s+=" "+(e?a.buildElemClass(t,e,r,i):a.buildBlockClass(t,r,i))}}return s}},{"../bemxjst":7,"../bemxjst/utils":10,"./entity":1,inherits:11}],3:[function(t,e,n){function r(t){this.modDelim=t.mod||"_",this.elemDelim=t.elem||"__"}n.ClassBuilder=r,r.prototype.build=function(t,e){return e?t+this.elemDelim+e:t},r.prototype.buildModPostfix=function(t,e){var n=this.modDelim+t;return!0!==e&&(n+=this.modDelim+e),n},r.prototype.buildBlockClass=function(t,e,n){var r=t;return n&&(r+=this.buildModPostfix(e,n)),r},r.prototype.buildElemClass=function(t,e,n,r){return this.buildBlockClass(t)+this.elemDelim+e+this.buildModPostfix(n,r)},r.prototype.split=function(t){return t.split(this.elemDelim,2)}},{}],4:[function(t,e,n){var r=t("./utils");function s(t){this._bemxjst=t,this.ctx=null,this.block="",this._currBlock="",this.elem=null,this.mods={},this.elemMods={},this.position=0,this._listLength=0,this._notNewList=!1,this.escapeContent=!0===t.options.escapeContent}n.Context=s,s.prototype._flush=null,s.prototype.isSimple=r.isSimple,s.prototype.isShortTag=r.isShortTag,s.prototype.extend=r.extend,s.prototype.identify=r.identify,s.prototype.xmlEscape=r.xmlEscape,s.prototype.attrEscape=r.attrEscape,s.prototype.jsAttrEscape=r.jsAttrEscape,s.prototype.isFirst=function(){return 1===this.position},s.prototype.isLast=function(){return this.position===this._listLength},s.prototype.generateId=function(){return r.identify(this.ctx)},s.prototype.reapply=function(t){return this._bemxjst.run(t)}},{"./utils":10}],5:[function(t,e,n){var r=t("./utils"),s=t("./match").Match,i=t("./tree"),a=i.Template,o=i.PropertyMatch,c=i.CompilerOptions;function l(t,e,n,r){this.bemxjst=t,this.block=null,this.elem=null,this.options={},this.canFlush=!0,this.def=new s(this),this.content=new s(this,"content"),this.rest={},this.init(e,n),this.initModes(r)}function u(){return this.ctx.content}n.Entity=l,l.prototype.init=function(t,e){this.block=t,this.elem=e},l.prototype.initModes=function(t){for(var e=0;e<t.length;e++){for(var n=t[e],s=n.predicates.length-1;s>=0;s--){if((i=n.predicates[s])instanceof o&&"_mode"===i.key){n.predicates.splice(s,1),this._initRest(i.value),this.rest[i.value].push(n);break}}-1===s&&this.def.push(n);for(s=n.predicates.length-1;s>=0;s--){var i;(i=n.predicates[s])instanceof c&&(this.options=r.extend(this.options,i.options))}}},l.prototype.prepend=function(t){for(var e=Object.keys(this.rest),n=0;n<e.length;n++){var r=e[n];t.rest[r]&&this.rest[r].prepend(t.rest[r])}e=Object.keys(t.rest);for(n=0;n<e.length;n++){r=e[n];this.rest[r]||(this._initRest(r),this.rest[r].prepend(t.rest[r]))}},l.prototype.run=function(t){return 0!==this.def.count?this.def.exec(t):this.defaultBody(t)},l.prototype.setDefaults=function(){if(0!==this.content.count&&this.content.push(new a([],u)),0!==this.def.count){this.canFlush=this.options.flush||!1;var t=this;this.def.push(new a([],function(){return t.defaultBody(this)}))}}},{"./match":8,"./tree":9,"./utils":10}],6:[function(t,e,n){function r(t,e){this.name="BEMXJSTError",this.message=t,Error.captureStackTrace?Error.captureStackTrace(this,e||this.constructor):this.stack=(new Error).stack}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,n.BEMXJSTError=r},{}],7:[function(t,e,n){var r=t("inherits"),s=t("./tree").Tree,i=t("./tree").PropertyMatch,a=t("./tree").AddMatch,o=t("./context").Context,c=t("./class-builder").ClassBuilder,l=t("./utils");function u(t){this.options=t||{},this.entities=null,this.defaultEnt=null,this.tree=null,this.match=null,this.contextConstructor=function(t){o.call(this,t)},r(this.contextConstructor,o),this.context=null,this.classBuilder=new c(this.options.naming||{}),this.depth=0,this.canFlush=!1,this.oninit=null,this.defaultEnt=new this.Entity(this,"","",[]),this.defaultElemEnt=new this.Entity(this,"","",[])}e.exports=u,u.prototype.locals=s.methods.concat("local","applyCtx","applyNext","apply"),u.prototype.compile=function(t){var e=this;function n(){return e._run(e.context.ctx)}function r(t,r){return r?e.local(r,function(){return e.local({ctx:t},n)}):e.local({ctx:t},n)}function i(t,n){return e.applyMode(t,n)}function a(t){return function(n){return e.local(t,n)}}var o=new s({refs:{applyCtx:r,local:a,apply:i}}),c=this.recompileInput(t),l=o.build(c,[a,r,function t(n){return n?e.local(n,t):e.applyNext()},i]);this.tree&&(l={templates:l.templates.concat(this.tree.templates),oninit:this.tree.oninit.concat(l.oninit)}),this.tree=l;var u=this.groupEntities(l.templates);u=this.transformEntities(u),this.entities=u,this.oninit=l.oninit},u.prototype.recompileInput=function(t){var e=u.prototype.locals;if("function"==typeof t&&t.length===e.length)return t;var n=t.toString();return n=n.replace(/^function[^{]+{|}$/g,""),n=new Function(e.join(", "),n)},u.prototype.groupEntities=function(e){for(var n={},r=0;r<e.length;r++){var s,o=e[r].clone(),c=null;s=void 0;for(var l=0;l<o.predicates.length;l++){if((h=o.predicates[l])instanceof i||h instanceof a){if("block"===h.key)c=h.value;else{if("elem"!==h.key)continue;s=h.value}o.predicates.splice(l,1),l--}}if(null===c){var u="block(…) subpredicate is not found.\n    See template with subpredicates:\n     * ";for(l=0;l<o.predicates.length;l++){var h=o.predicates[l];0!==l&&(u+="\n     * "),"_mode"===h.key?u+=h.value+"()":Array.isArray(h.key)?u+=h.key[0].replace("mods","mod").replace("elemMods","elemMod")+"('"+h.key[1]+"', '"+h.value+"')":h.value&&h.key?u+=h.key+"('"+h.value+"')":u+="match(…)"}throw u+="\n    And template body: \n    ("+("function"==typeof o.body?o.body:JSON.stringify(o.body))+")","undefined"==typeof BEMXJSTError&&(BEMXJSTError=t("./error").BEMXJSTError),new BEMXJSTError(u)}var d=this.classBuilder.build(c,s);n[d]||(n[d]=[]),n[d].push(o)}return n},u.prototype.transformEntities=function(t){for(var e=[],n=Object.keys(t),r=0;r<n.length;r++){var s=n[r],i=this.classBuilder.split(s),a=i[0],o=i[1];"*"===o&&e.push(a),t[s]=new this.Entity(this,a,o,t[s])}if(t.hasOwnProperty("*")){var c=t["*"];for(r=0;r<n.length;r++){"*"!==(s=n[r])&&t[s].prepend(c)}this.defaultEnt.prepend(c),this.defaultElemEnt.prepend(c)}for(r=0;r<e.length;r++){a=e[r];var l=this.classBuilder.build(a,"*");for(c=t[l],r=0;r<n.length;r++){if((s=n[r])!==l){var u=t[s];u.block===a&&void 0!==u.elem&&t[s].prepend(c)}}this.defaultElemEnt.prepend(c)}for(r=0;r<n.length;r++){t[s=n[r]].setDefaults(),this.defaultEnt.setDefaults(),this.defaultElemEnt.setDefaults()}return t},u.prototype._run=function(t){return void 0===t||""===t||null===t?this.runEmpty():Array.isArray(t)?this.runMany(t):"string"!=typeof t.html||t.tag||void 0!==t.block||void 0!==t.elem||void 0!==t.cls||void 0!==t.attrs?l.isSimple(t)?this.runSimple(t):this.runOne(t):this.runUnescaped(t)},u.prototype.run=function(t){var e=this.match,n=this.context;this.match=null,this.context=new this.contextConstructor(this),this.canFlush=null!==this.context._flush,this.depth=0;var r=this._run(t);return this.canFlush&&(r=this.context._flush(r)),this.match=e,this.context=n,r},u.prototype.runEmpty=function(){return this.context._listLength--,""},u.prototype.runUnescaped=function(t){return this.context._listLength--,""+t.html},u.prototype.runSimple=function(t){return this.context._listLength--,!t&&0!==t||!0===t?"":"string"==typeof t&&this.context.escapeContent?l.xmlEscape(t):t},u.prototype.runOne=function(t){var e=this.context,n=e.ctx,r=e.block,s=e._currBlock,i=e.elem,a=e.mods,o=e.elemMods;t.block||t.elem?e._currBlock="":e._currBlock=e.block,e.ctx=t,t.block?(e.block=t.block,t.mods?e.mods=t.mods:t.block===r&&t.elem||(e.mods={})):t.elem?s&&(e.block=s):e.block="",e.elem=t.elem,t.elemMods?e.elemMods=t.elemMods:e.elemMods={};var c=e.block||"",l=e.elem;c||l?e.position++:e._listLength--,this.depth++;var u=!1,h=this.entities[this.classBuilder.build(c,l)];h?this.canFlush&&!h.canFlush&&(u=!0,this.canFlush=!1):(h=this.defaultEnt,void 0!==l&&(h=this.defaultElemEnt),h.init(c,l));var d=!0===this.options.production?this.tryRun(e,h):h.run(e);return e.ctx=n,e.block=r,e.elem=i,e.mods=a,e.elemMods=o,e._currBlock=s,this.depth--,u&&(this.canFlush=!0),d},u.prototype.tryRun=function(t,e){try{return e.run(t)}catch(e){return console.error("BEMXJST ERROR: cannot render "+["block "+t.block,"elem "+t.elem,"mods "+JSON.stringify(t.mods),"elemMods "+JSON.stringify(t.elemMods)].join(", "),e),""}},u.prototype.renderContent=function(t,e){var n=this.context,r=n.position,s=n._listLength,i=n._notNewList;n._notNewList=!1,e&&(n.position=0,n._listLength=1);var a=this._run(t);return n.position=r,n._listLength=s,n._notNewList=i,a},u.prototype.local=function(t,e){for(var n=Object.keys(t),r=[],s=0;s<n.length;s++){for(var i=n[s],a=i.split("."),o=this.context,c=0;c<a.length-1;c++)o=o[a[c]];r.push({parts:a,value:o[a[c]]}),o[a[c]]=t[i]}var l=e.call(this.context);for(s=0;s<r.length;s++){for(a=r[s].parts,o=this.context,c=0;c<a.length-1;c++)o=o[a[c]];o[a[c]]=r[s].value}return l},u.prototype.applyNext=function(){return this.match.exec(this.context)},u.prototype.applyMode=function(t,e){var n=this.match.entity.rest[t];if(!n)return this.context.ctx[t];if(!e)return n.exec(this.context);var r=this;return this.local(e,function(){return n.exec(r.context)})},u.prototype.exportApply=function(t){var e=this;t.apply=function(t){return e.run(t)},t.compile=function(t){return e.compile(t)},t.BEMContext=e.contextConstructor;for(var n=0;n<e.oninit.length;n++){(0,e.oninit[n])(t,{BEMContext:t.BEMContext})}}},{"./class-builder":3,"./context":4,"./error":6,"./tree":9,"./utils":10,inherits:11}],8:[function(t,e,n){var r=t("./tree"),s=r.PropertyMatch,i=r.AddMatch,a=r.WrapMatch,o=r.ExtendMatch,c=r.CustomMatch;function l(t,e){this.template=t,this.keys=e.key,this.value=e.value}function u(t,e){this.template=t,this.body=e.body}function h(t){this.template=t,this.wrap=null}function d(t){this.template=t,this.wrap=null}function p(t,e){this.template=t,this.key=e.key,this.value=e.value}function m(t,e){this.mode=t,this.predicates=new Array(e.predicates.length),this.body=e.body;for(var n=[],r=0,m=0;r<this.predicates.length;r++,m++){var f=e.predicates[r];f instanceof s?this.predicates[m]=new l(this,f):f instanceof o?(m--,n.push(new d(this))):f instanceof i?this.predicates[r]=new p(this,f):f instanceof c?this.predicates[m]=new u(this,f):f instanceof a?(m--,n.push(new h(this))):m--}for(r=0;r<n.length;r++,m++)this.predicates[m]=n[r];this.predicates.length!==m&&(this.predicates.length=m)}function f(t,e){this.entity=t,this.modeName=e,this.bemxjst=this.entity.bemxjst,this.templates=[],this.mask=[0],this.maskSize=0,this.maskOffset=0,this.count=0,this.depth=-1,this.thrownError=null}l.prototype.exec=function(t){for(var e=t,n=0;n<this.keys.length-1;n++)if(!(e=e[this.keys[n]]))return!1;return e=e[this.keys[n]],!0===this.value?void 0!==e&&""!==e&&!1!==e&&null!==e:String(e)===this.value},u.prototype.exec=function(t){return this.body.call(t,t,t.ctx)},h.prototype.exec=function(t){var e=this.wrap!==t.ctx;return this.wrap=t.ctx,e},d.prototype.exec=function(t){var e=this.ext!==t.ctx;return this.ext=t.ctx,e},p.prototype.exec=function(t){return t[this.key]===this.value},n.MatchTemplate=m,n.Match=f,f.prototype.prepend=function(t){for(this.templates=t.templates.concat(this.templates),this.count+=t.count;Math.ceil(this.count/31)>this.mask.length;)this.mask.push(0);this.maskSize=this.mask.length},f.prototype.push=function(t){this.templates.push(new m(this,t)),this.count++,Math.ceil(this.count/31)>this.mask.length&&this.mask.push(0),this.maskSize=this.mask.length},f.prototype.tryCatch=function(t,e){try{return t.call(e,e,e.ctx)}catch(t){this.thrownError=t}},f.prototype.exec=function(t){for(var e,n=this.checkDepth(),r=this.maskOffset,s=this.mask[r],i=1,a=0;a<this.count;a++){if(0==(s&i)){e=this.templates[a];for(var o=0;o<e.predicates.length;o++){if(!e.predicates[o].exec(t))break}if(o===e.predicates.length)break}1073741824===i?(r++,s=this.mask[r],i=1):i<<=1}if(a===this.count)return t.ctx[this.modeName];var c,l=s,u=this.bemxjst.match;this.mask[r]|=i,this.bemxjst.match=this,this.thrownError=null,c="function"==typeof e.body?this.tryCatch(e.body,t):e.body,this.mask[r]=l,this.bemxjst.match=u,this.restoreDepth(n);var h=this.thrownError;if(null!==h)throw this.thrownError=null,h;return c},f.prototype.checkDepth=function(){if(-1===this.depth)return this.depth=this.bemxjst.depth,-1;if(this.bemxjst.depth===this.depth)return this.depth;var t=this.depth;for(this.depth=this.bemxjst.depth,this.maskOffset+=this.maskSize;this.mask.length<this.maskOffset+this.maskSize;)this.mask.push(0);return t},f.prototype.restoreDepth=function(t){-1!==t&&t!==this.depth&&(this.maskOffset-=this.maskSize),this.depth=t}},{"./tree":9}],9:[function(t,e,n){var r=t("minimalistic-assert"),s=t("inherits");function i(t,e){this.predicates=t,this.body=e}function a(){}function o(t,e){this.conditions=[],this.children=[];for(var n=e.length-1;n>=0;n--){var r=e[n];r instanceof a?this.conditions.push(r):r===t.boundBody?this.children[n]=t.queue.pop():this.children[n]=r}}function c(t){a.call(this),this.refs=t}function l(t){a.call(this),this.refs=t}function u(t){a.call(this),this.refs=t}function h(t,e){a.call(this),this.mode=t,this.refs=e}function d(t){a.call(this),this.options=t}function p(t,e){a.call(this),this.key=t,this.value=e}function m(t){a.call(this),this.body=t}function f(t){this.options=t,this.refs=this.options.refs,this.boundBody=this.body.bind(this);for(var e=this.methods("body"),n=0;n<e.length;n++){var r=e[n];this.boundBody[f.methods[n]]=r}this.queue=[],this.templates=[],this.initializers=[]}function x(t,e,n){var r=t[n],s=t.boundBody;return"body"!==e?"replace"===n||"extend"===n||"wrap"===n?function(){return r.apply(t,arguments)}:function(){return r.apply(t,arguments),s}:function(){var e=r.apply(t,arguments),i=t.queue.pop(),a=t.queue[t.queue.length-1];return a.conditions=a.conditions.concat(i.conditions),a.children=a.children.concat(i.children),"replace"===n||"extend"===n||"wrap"===n?e:s}}n.Template=i,i.prototype.wrap=function(){for(var t=this.body,e=0;e<this.predicates.length;e++){t=this.predicates[e].wrapBody(t)}this.body=t},i.prototype.clone=function(){return new i(this.predicates.slice(),this.body)},n.MatchBase=a,a.prototype.wrapBody=function(t){return t},s(c,a),n.WrapMatch=c,c.prototype.wrapBody=function(t){var e=this.refs.applyCtx;return"function"!=typeof t?function(){return e(t)}:function(){return e(t.call(this,this,this.ctx))}},s(l,a),n.ReplaceMatch=l,l.prototype.wrapBody=function(t){var e=this.refs.applyCtx;return"function"!=typeof t?function(){return e(t)}:function(){return e(t.call(this,this,this.ctx))}},s(u,a),n.ExtendMatch=u,u.prototype.wrapBody=function(t){var e=this.refs.applyCtx,n=this.refs.local;return"function"!=typeof t?function(){for(var r={},s=Object.keys(t),i=0;i<s.length;i++)r[s[i]]=t[s[i]];return n(r)(function(){return e(this.ctx)})}:function(){for(var r={},s=t.call(this,this,this.ctx),i=Object.keys(s),a=0;a<i.length;a++)r[i[a]]=s[i[a]];return n(r)(function(){return e(this.ctx)})}},s(h,a),n.AddMatch=h,h.prototype.wrapBody=function(t){return this[this.mode+"WrapBody"](t)},h.prototype.appendContentWrapBody=function(t){var e=this.refs,n=e.applyCtx,r=e.apply;return"function"!=typeof t?function(){return[r("content"),t]}:function(){return[r("content"),n(t.call(this,this,this.ctx))]}},h.prototype.prependContentWrapBody=function(t){var e=this.refs,n=e.applyCtx,r=e.apply;return"function"!=typeof t?function(){return[t,r("content")]}:function(){return[n(t.call(this,this,this.ctx)),r("content")]}},s(d,a),n.CompilerOptions=d,s(p,a),n.PropertyMatch=p,s(m,a),n.CustomMatch=m,n.Tree=f,f.methods=["match","wrap","block","elem","mode","mod","elemMod","def","tag","attrs","cls","js","bem","mix","content","replace","extend","oninit","xjstOptions","appendContent","prependContent"],f.prototype.build=function(t,e){var n=this.methods("global").concat(e);return n[0]=this.match.bind(this),t.apply({},n),{templates:this.templates.slice().reverse(),oninit:this.initializers}},f.prototype.methods=function(t){for(var e=new Array(f.methods.length),n=0;n<e.length;n++){var r=f.methods[n];e[n]=x(this,t,r)}return e},f.prototype.flush=function(t,e){var n;n=e.conditions?t.concat(e.conditions):e.conditions;for(var r=0;r<e.children.length;r++){var s=e.children[r];if(s instanceof o)this.flush(n,e.children[r]);else{var a=new i(t,s);a.wrap(),this.templates.push(a)}}},f.prototype.body=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new o(this,t);return this.queue[this.queue.length-1].children.push(n),1===this.queue.length&&this.flush([],this.queue.shift()),this.boundBody},f.prototype.match=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;e++){var n=arguments[e];"function"==typeof n&&(n=new m(n)),r(n instanceof a,"Wrong .match() argument"),t[e]=n}return this.queue.push(new o(this,t)),this.boundBody},f.prototype.applyMode=function(t,e){if(t.length)throw new Error("Predicate should not have arguments but "+JSON.stringify(t)+" passed");return this.mode(e)},f.prototype.xjstOptions=function(t){return this.queue.push(new o(this,[new d(t)])),this.boundBody},f.prototype.block=function(t){return this.match(new p("block",t))},f.prototype.elem=function(t){return this.match(new p("elem",t))},f.prototype.mode=function(t){return this.match(new p("_mode",t))},f.prototype.mod=function(t,e){return this.match(new p(["mods",t],void 0===e||String(e)))},f.prototype.elemMod=function(t,e){return this.match(new p(["elemMods",t],void 0===e||String(e)))},f.prototype.def=function(){return this.applyMode(arguments,"default")},["tag","attrs","cls","js","bem","mix","content"].forEach(function(t){f.prototype[t]=function(){return this.applyMode(arguments,t)}}),["appendContent","prependContent"].forEach(function(t){f.prototype[t]=function(){return this.content.apply(this,arguments).match(new h(t,this.refs))}}),f.prototype.wrap=function(){return this.def.apply(this,arguments).match(new c(this.refs))},f.prototype.replace=function(){return this.def.apply(this,arguments).match(new l(this.refs))},f.prototype.extend=function(){return this.def.apply(this,arguments).match(new u(this.refs))},f.prototype.oninit=function(t){this.initializers.push(t)}},{inherits:11,"minimalistic-assert":12}],10:[function(t,e,n){var r=/[&<>]/;n.xmlEscape=function(t){var e,n=""+t,s=r.exec(n);if(!s)return n;var i="",a=0,o=0;for(a=s.index;a<n.length;a++){switch(n.charCodeAt(a)){case 38:e="&amp;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}o!==a&&(i+=n.substring(o,a)),o=a+1,i+=e}return o!==a?i+n.substring(o,a):i};var s=/["&]/;n.attrEscape=function(t){var e,n=""+t,r=s.exec(n);if(!r)return n;var i="",a=0,o=0;for(a=r.index;a<n.length;a++){switch(n.charCodeAt(a)){case 34:e="&quot;";break;case 38:e="&amp;";break;default:continue}o!==a&&(i+=n.substring(o,a)),o=a+1,i+=e}return o!==a?i+n.substring(o,a):i};var i=/['&]/;n.jsAttrEscape=function(t){var e,n=""+t,r=i.exec(n);if(!r)return n;var s="",a=0,o=0;for(a=r.index;a<n.length;a++){switch(n.charCodeAt(a)){case 38:e="&amp;";break;case 39:e="&#39;";break;default:continue}o!==a&&(s+=n.substring(o,a)),o=a+1,s+=e}return o!==a?s+n.substring(o,a):s},n.extend=function(t,e){if(!t||!e)return t||e;var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r};var a={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1};n.isShortTag=function(t){return a.hasOwnProperty(t)},n.isSimple=function t(e){return!e||!0===e||(!(e.block||e.elem||e.tag||e.cls||e.attrs||!e.hasOwnProperty("html")||!t(e.html))||("string"==typeof e||"number"==typeof e))},n.isObj=function(t){return t&&"object"===(void 0===t?"undefined":_typeof(t))&&!Array.isArray(t)&&null!==t};var o=0,c=+new Date,l="__"+c,u="uniq"+c;function h(){return u+ ++o}n.getUniq=h,n.identify=function(t,e){if(!t)return h();if(e||t[l])return t[l];var n=h();return t[l]=n,n},n.fnToString=function(t){if(!t)return"";if("function"==typeof t){t=(t=t.toString()).replace(0===t.indexOf("function")?/^function\s*[^{]+{|}$/g:/^(_|\(\w|[^=>]+\))\s=>\s{|}$/g,"")}return t};var d=/^[:\w.-]+$/;n.isUnquotedAttr=function(t){return t&&d.exec(t)}},{}],11:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],12:[function(t,e,n){function r(t,e){if(!t)throw new Error(e||"Assertion failed")}e.exports=r,r.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},{}]},{},[2])(2)}),e.exports||r.BEMHTML}({},{}))({escapeContent:!0});return s.compile(function(t,n,r,s,i,a,o,c,l,u,h,d,p,m,f,x,y,g,b,v,k,_,w,M,z){g(function(t){var e=t.BEMContext.prototype,n=t["i-global"]=e["i-global"]=e.extend({lang:"ru",tld:"ru","content-region":"ru","click-host":"//clck.yandex.ru","passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","export-host":"https://export.yandex.ru",login:"","lego-static-host":"https://yastatic.net/lego/2.10-142"},e["i-global"]);n._public={id:!0,lang:!0,tld:!0,"content-region":!0,"user-region":!0,login:!0,displayName:!0,index:!0,yandexuid:!0,"passport-host":!0,"pass-host":!0,"passport-msg":!0,"static-host":!0,"lego-static-host":!0,"social-host":!0,clck:!0,"click-host":!0,"export-host":!0,"i-host":!0,"social-retpath":!0,"lego-path":!0,sid:!0,retpath:!0,uid:!0},n.makePublic=function(t,r){"object"!==(void 0===t?"undefined":_typeof(t))?(void 0===r&&(r=!0),n._public[t]=r):n._public=e.extend(n._public,t)},n.isPublic=function(t){return Boolean(n._public[t])},n.setTld=function(t){var e="tr"===t?"yandex.com.tr":"yandex."+t,r=-1!==["ua","by","kz"].indexOf(t)?"yandex.ru":e;n.tld=t,n["content-region"]=t,n["click-host"]="//clck."+r,n["passport-host"]="https://passport."+r,n["pass-host"]="https://pass."+e,n["social-host"]="https://social."+e,n["export-host"]="https://export."+e},e._iGlobalBackup={_backup:null,exists:function(){return Boolean(this._backup)},save:function(){this._backup=e.extend({},n)},restore:function(){var t;for(t in n)delete n[t];for(t in this._backup)n[t]=this._backup[t]}}}),r("i-global")(l()(""),c()(function(){var t=this.ctx.params||{},e=this["i-global"];for(var n in this._iGlobalBackup.exists()?!1!==this.ctx.reset&&this._iGlobalBackup.restore():this._iGlobalBackup.save(),t.tld&&t.tld!==e.tld&&e.setTld(t.tld),t)e[n]=t[n];return""})),g(function(t){t["i-global"].makePublic("pageContext"),t["i-global"].makePublic("basePath"),t["i-global"].makePublic("avatarsMds"),t["i-global"].makePublic("safeHtmlContent"),t["i-global"].makePublic("safeHtmlOptions"),t["i-global"].makePublic("staticPath"),t["i-global"].makePublic("nonce"),t["i-global"].makePublic("secretkey"),t["i-global"].makePublic("visitId"),t["i-global"].makePublic("yandexLoginCookie"),t["i-global"].makePublic("isRtl"),t["i-global"].makePublic("needReset"),t["i-global"].makePublic("metrikaId"),t["i-global"].makePublic("questionsStat"),t["i-global"].makePublic("isIframe"),t["i-global"].makePublic("cloud")}),r("i-ua")(p()(!1),l()("script"),u()(function(){return{nonce:this.ctx.nonce||this["i-global"].nonce}}),f()(function(){return[{html:[";(function(d,e,c,r){","e=d.documentElement;",'c="className";','r="replace";','e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");','if(d.compatMode!="CSS1Compat")','e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")',"})(document);"].join("")}]})),r("i-ua").content()(function(){var t=[";(function(d,e,c,n,w,v,f){","e=d.documentElement;",'c="className";','n="createElementNS";','f="firstChild";','w="http://www.w3.org/2000/svg";','e[c]+=" i-ua_svg_"+(!!d[n]&&!!d[n](w,"svg").createSVGRect?"yes":"no");','v=d.createElement("div");','v.innerHTML="<svg/>";','e[c]+=" i-ua_inlinesvg_"+((v[f]&&v[f].namespaceURI)==w?"yes":"no");',"})(document);"].join("");return[].concat(M(),{html:t})}),r("i-bem").elem("i18n").def()(function(){if(!this.ctx)return"";var t=this.ctx,e=t.keyset,n=t.key,r=t.params||{};return e||n?(t.content&&(r.content=this.reapply(t.content)),BEM.I18N(e,n,r)):""}),g(function(){!function(t,e){if(!e.I18N){t.BEM=e;var n=e.I18N=function(t,e){return e};n.keyset=function(){return n},n.key=function(t){return t},n.lang=function(){}}}(this,"undefined"==typeof BEM?{}:BEM)}),r("b-statcounter").tag()("i"),r("b-statcounter").elem("metrika").match(function(){return this.elem})(l()("img"),u()(function(){return{alt:"",src:"//mc.yandex.ru/watch/"+this.ctx.counter+(this.ctx._noindex?"?ut=noindex":"")}}),p()(!1),c()(t(function(){return!this.ctx.counter})(function(){return""}),t(function(){return void 0===this.ctx._noindex})(function(){return M({_noindex:this.ctx.js&&("noindex"===this.ctx.js.ut||0===this.ctx.js.ut)})}))),r("b-statcounter").elem("metrika").elemMod("type","js")(l()("i"),u()(function(){return{}}),h()("i-bem"),p()(!0),d()(function(){return{id:Number(this.ctx.counter)}}),f()(function(){return{tag:"noscript",content:{tag:"img",attrs:{alt:"",src:"//mc.yandex.ru/watch/"+this.ctx.counter+(this.ctx._noindex?"?ut=noindex":"")}}}})),r("title").mod("size","xxl").tag()("h1"),r("title").mod("size","xl").tag()("h2"),r("title").mod("size","l").tag()("h3"),r("title").mod("size","m").tag()("h4"),r("title").mod("size","s").tag()("h5"),r("button")(c()(function(){this.mods;return M()}),l()("button"),t(function(){return this.ctx.url}).tag()("a"),d()(!0),u()(t(function(){return!0})(function(){var t=this.ctx,e={};return e.tabindex=t.tabindex,e}),t(function(){return this.ctx.url})(function(){var t=this.ctx,e=t.attrs,n=M(),r={href:t.url,target:t.target},s=void 0!==Object(e).rel?String(e.rel):"";return"_blank"===r.target&&(r.rel="noopener",s&&-1===s.indexOf("noopener")&&(e.rel=s+" noopener")),this.extend(n,r)}),t(function(){return!this.ctx.url})(function(){var t=this.ctx,e=M(),n={type:t.type||"button",autocomplete:"off",name:t.name,value:t.value};return this.extend(e,n)})),f()(function(){return{elem:"text",tag:"span",content:this.ctx.content}})),r("button").mod("disabled","yes").attrs()(function(){var t={};return this.ctx.url?t["aria-disabled"]="true":t.disabled=!0,this.extend(M(),t)}),g(function(t){t.BEMContext.prototype.util||(t.BEMContext.prototype.util={})}),g(function(t){var e=Object.prototype.toString;function n(t){return"object"===(void 0===t?"undefined":_typeof(t))&&"[object Object]"===e.call(t)}function r(t,e,s){var i,a;for(i in t=Object(t),e=Object(e))void 0!==(a=s&&s(t[i],e[i],i))?t[i]=a:n(t[i])&&n(e[i])?t[i]=r(t[i],e[i],s):t[i]=e[i];return t}t.BEMContext.prototype.util.merge=r,t.BEMContext.prototype.util.mergeBemjson=function(t,e){return r(t,e,function(t,e,n){if("mix"===n)return[].concat(t,e)})}}),r("link")(c()(function(){this.mods;var t=this.ctx.url;return void 0===this.ctx.tabindex&&(this.ctx.tabindex="0"),this._url=this.isSimple(t)?t:this.reapply(t),M()}),l()(function(){return void 0!==this._url?"a":"span"}),d()(function(){return{_tabindex:this.mods.disabled?this.ctx.tabindex:void 0}}),t(function(){return"_blank"===this.ctx.target}).attrs()(function(){var t=this.ctx.attrs,e=void 0!==Object(t).rel?String(t.rel):"";return e&&-1===e.indexOf("noopener")&&(t.rel=e+" noopener"),this.extend(M(),{rel:"noopener"})}),u()(function(){var t=this.ctx,e=this._url,n=void 0!==e,r=Boolean(this.mods.disabled),s=r?n&&-1:t.tabindex;return this.extend(M(),{id:t.id,name:t.name,title:t.title,target:t.target,tabindex:s,href:e,role:n?void 0:"button","aria-disabled":r?"true":void 0})}),t(function(){return void 0===this.ctx.content}).content()(function(){var t,e=this.ctx,n=Boolean(e.text),r=[e.icon,e.iconLeft,e.iconRight].filter(Boolean),s=r.length>0,i=n||r.length>1,a=(t=this.xmlEscape,function(e){return"string"==typeof e?{html:t(e)}:e});return[e.icon&&this.util.mergeBemjson({block:"icon",mix:{block:"link",elem:"icon",elemMods:{side:i?"left":""}}},e.icon),e.iconLeft&&this.util.mergeBemjson({block:"icon",mix:{block:"link",elem:"icon",elemMods:{side:i?"left":""}}},e.iconLeft),n&&(this.isSimple(e.text)?s?{elem:"inner",content:a(e.text)}:a(e.text):e.text.block?this.util.mergeBemjson({mix:{block:"link",elem:"inner"}},e.text):this.extend({block:"link",elem:"inner"},e.text)),e.iconRight&&this.util.mergeBemjson({block:"icon",mix:{block:"link",elem:"icon",elemMods:{side:i?"right":""}}},e.iconRight)]}),s("inner").tag()("span")),r("link")(c()(function(){var t=this.ctx,e=t.metrikaParams,n=t.metrikaGoal;return(e||n)&&(this.mods["has-metrika"]="yes"),M()})),r("link").mod("has-metrika","yes")(d()(function(){var t=this.ctx,e=t.metrikaParams,n=t.metrikaGoal;return this.extend(M(),{metrikaParams:e,metrikaGoal:n})})),r("copyright")(i("wrapLink")(function(){var t=this.ctx;return{block:"i-bem",elem:"i18n",keyset:"copyright",key:"link",content:{block:"copyright",elem:"link",mix:t.elemLinkMix,url:void 0===t.url?this["i-services"].serviceUrl("www"):t.url}}}),f()(function(){return["© ",{elem:"dates",start:this.ctx.start},"  ",this.ctx.content||z("wrapLink")]})),r("copyright").elem("link")(l()(!1),t(function(){return this.ctx.url})(l()("a"),u()(function(){return{href:this.ctx.url}})),f()(function(){return this.ctx.content||BEM.I18N("copyright","yandex")})),r("copyright").elem("dates")(l()("span"),f()(function(){var t=this.ctx.start,e=(new Date).getFullYear();return[t&&t!==e&&t+"–",e]})),g(function(t){var e=t["i-services"]=t.BEMContext.prototype["i-services"]={},n=t["i-global"];e.serviceName=function(t){return BEM.I18N("i-services",t||n.id)},e.serviceUrl=function(t,r){var s=n;return t||(t=s.id),r||(r=s["content-region"]),e._data[t](r)}}),r("i-services").def()(s("name")(function(){return w(this["i-services"].serviceName(this.ctx.id))}),s("url")(function(){return w(this["i-services"].serviceUrl(this.ctx.id,this.ctx.region))})),g(function(t){t["i-services"]._data={404:function(t){switch(t){case"ua":return"http://404.yandex.ua";case"by":return"http://404.yandex.by";case"kz":return"http://404.yandex.kz";case"com":return"http://404.yandex.com";case"tr":return"http://404.yandex.com.tr";default:return"http://404.yandex.ru"}},adresa:function(){return"http://adresa.yandex.ru"},advertising:function(t){switch(t){case"ua":return"https://advertising.yandex.ua";case"by":return"https://advertising.yandex.by";case"kz":return"https://advertising.yandex.kz";case"com":return"https://advertising.yandex.com";case"tr":return"https://yandex.com.tr/adv";default:return"https://advertising.yandex.ru"}},afisha:function(t){switch(t){case"ua":return"https://afisha.yandex.ua";case"by":return"https://afisha.yandex.by";case"kz":return"https://afisha.yandex.kz";default:return"https://afisha.yandex.ru"}},all:function(t){switch(t){case"ua":return"//yandex.ua/all";case"by":return"//yandex.by/all";case"kz":return"//yandex.kz/all";case"com":return"//yandex.com/all";case"tr":return"//yandex.com.tr/all";default:return"//yandex.ru/all"}},api:function(t){switch(t){case"com":return"http://api.yandex.com";default:return"http://api.yandex.ru"}},appmetrica:function(t){switch(t){case"ua":return"https://appmetrica.yandex.ua";case"by":return"https://appmetrica.yandex.by";case"kz":return"https://appmetrica.yandex.kz";case"com":return"https://appmetrica.yandex.com";case"tr":return"https://appmetrica.yandex.com.tr";default:return"https://appmetrica.yandex.ru"}},appsearch:function(){return"//appsearch.yandex.ru"},audience:function(t){switch(t){case"ua":return"https://audience.yandex.ua";case"by":return"https://audience.yandex.by";case"kz":return"https://audience.yandex.kz";case"com":return"https://audience.yandex.com";case"tr":return"https://audience.yandex.com.tr";default:return"https://audience.yandex.ru"}},auto:function(t){switch(t){case"ua":return"https://auto.yandex.ua";default:return"https://auto.yandex.ru"}},autoru:function(){return"https://auto.ru"},avia:function(t){switch(t){case"ua":return"https://avia.yandex.ua";default:return"https://avia.yandex.ru"}},aziada:function(){return"http://aziada2011.yandex.kz"},ba:function(t){switch(t){case"ua":return"https://ba.yandex.ua";case"by":return"https://ba.yandex.by";case"kz":return"https://ba.yandex.kz";case"com":return"https://ba.yandex.com";default:return"https://ba.yandex.ru"}},backapv:function(){return"http://backapv.yandex.ru"},balance:function(){return"https://balance.yandex.ru"},bar:function(t){switch(t){case"ua":return"http://bar.yandex.ua";case"by":return"http://bar.yandex.by";case"kz":return"http://bar.yandex.kz";case"tr":return"http://bar.yandex.com.tr";default:return"http://bar.yandex.ru"}},"bar-ie":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},"bar-ie9":function(t){switch(t){case"ua":return"http://bar.yandex.ua/ie";case"by":return"http://bar.yandex.by/ie";case"kz":return"http://bar.yandex.kz/ie";case"com":return"http://bar.yandex.com/ie";case"tr":return"http://bar.yandex.com.tr/ie";default:return"http://bar.yandex.ru/ie"}},bayan:function(){return"http://bayan.yandex.ru"},blogs:function(t){switch(t){case"ua":return"https://blogs.yandex.ua";case"by":return"https://blogs.yandex.by";case"kz":return"https://blogs.yandex.kz";default:return"https://blogs.yandex.ru"}},books:function(){return"http://books.yandex.ru"},browser:function(t){switch(t){case"ua":return"https://browser.yandex.ua";case"by":return"https://browser.yandex.by";case"kz":return"https://browser.yandex.kz";case"com":return"https://browser.yandex.com";case"tr":return"https://browser.yandex.com.tr";default:return"https://browser.yandex.ru"}},calendar:function(){return"https://calendar.yandex.ru"},catalogwdgt:function(){return"https://www.yandex.ru/catalog"},chrome:function(){return"http://chrome.yandex.ru"},city:function(t){switch(t){case"ua":return"https://gorod.yandex.ua";case"by":return"https://gorod.yandex.by";case"kz":return"https://gorod.yandex.kz";case"com":return"https://city.yandex.com";case"tr":return"https://city.yandex.com.tr";default:return"https://gorod.yandex.ru"}},cityday:function(){return"http://cityday.yandex.ru"},clickhouse:function(){return"https://clickhouse.yandex/"},collection:function(){return"https://collection.yandex.ru"},commander:function(t){switch(t){case"ua":case"by":case"kz":case"com":case"tr":default:return"https://yandex.ru/promo/commander/new?source=tableau_direct"}},company:function(t){switch(t){case"com":return"https://company.yandex.com";case"tr":return"https://company.yandex.com.tr";default:return"https://company.yandex.ru"}},contest:function(t){switch(t){case"com":return"https://contest.yandex.com";default:return"https://contest.yandex.ru"}},delivery:function(){return"https://delivery.yandex.ru"},desktop:function(){return"http://desktop.yandex.ru"},direct:function(t){switch(t){case"ua":return"https://direct.yandex.ua";case"by":return"https://direct.yandex.by";case"kz":return"https://direct.yandex.kz";case"com":return"https://direct.yandex.com";case"tr":return"https://direct.yandex.com.tr";default:return"https://direct.yandex.ru"}},"direct-api":function(t){switch(t){case"ua":case"by":case"kz":return"https://tech.yandex.ru/direct/?source=tableau_direct";case"com":case"tr":return"https://tech.yandex.com/direct/?source=tableau_direct";default:return"https://tech.yandex.ru/direct/?source=tableau_direct"}},"direct.market":function(){return"https://partner.market.yandex.ru/yandex.market/"},disk:function(t){switch(t){case"ua":return"https://disk.yandex.ua";case"by":return"https://disk.yandex.by";case"kz":return"https://disk.yandex.kz";case"com":return"https://disk.yandex.com";case"tr":return"https://disk.yandex.com.tr";case"az":return"https://disk.yandex.az";case"il":return"https://disk.yandex.co.il";case"am":return"https://disk.yandex.com.am";case"ge":return"https://disk.yandex.com.ge";case"ee":return"https://disk.yandex.ee";case"fr":return"https://disk.yandex.fr";case"kg":return"https://disk.yandex.kg";case"lt":return"https://disk.yandex.lt";case"lv":return"https://disk.yandex.lv";case"md":return"https://disk.yandex.md";case"tj":return"https://disk.yandex.tj";case"tm":return"https://disk.yandex.tm";case"uz":return"https://disk.yandex.uz";default:return"https://disk.yandex.ru"}},display:function(t){switch(t){case"tr":return"https://display.yandex.com.tr";default:return"https://display.yandex.ru"}},ege:function(t){switch(t){case"ua":return"https://zno.yandex.ua";default:return"https://ege.yandex.ru"}},expert:function(){return"http://expert.yandex.ru"},feedback:function(t){switch(t){case"ua":return"http://feedback.yandex.ua";case"by":return"http://feedback.yandex.by";case"kz":return"http://feedback.yandex.kz";case"com":return"http://feedback.yandex.com";case"tr":return"http://contact.yandex.com.tr";default:return"http://feedback.yandex.ru"}},feedback2:function(t){switch(t){case"ua":return"//feedback2.yandex.ua";case"by":return"//feedback2.yandex.by";case"kz":return"//feedback2.yandex.kz";case"com":return"//feedback2.yandex.com";case"tr":return"//contact2.yandex.com.tr";default:return"//feedback2.yandex.ru"}},ff:function(){return"http://ff.yandex.ru"},fotki:function(){return"https://fotki.yandex.ru"},fresh:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},fx:function(t){switch(t){case"ua":return"https://fx.yandex.ua";case"tr":return"https://fx.yandex.com.tr";default:return"https://fx.yandex.ru"}},games:function(){return"http://games.yandex.ru"},geocontext:function(){return"https://geocontext.yandex.ru"},goroda:function(){return"http://goroda.yandex.ru"},help:function(t){switch(t){case"ua":return"https://help.yandex.ua";case"com":return"https://help.yandex.com";case"tr":return"https://yardim.yandex.com.tr";default:return"https://help.yandex.ru"}},i:function(){return"http://i.yandex.ru"},ie:function(t){switch(t){case"ua":return"https://ie.yandex.ua";case"tr":return"https://ie.yandex.com.tr";default:return"https://ie.yandex.ru"}},images:function(t){switch(t){case"ua":return"https://yandex.ua/images/";case"by":return"https://yandex.by/images/";case"kz":return"https://yandex.kz/images/";case"com":return"https://yandex.com/images/";case"tr":return"https://yandex.com.tr/gorsel/";case"az":return"https://yandex.az/images/";case"il":return"https://yandex.co.il/images/";case"am":return"https://yandex.com.am/images/";case"ge":return"https://yandex.com.ge/images/";case"ee":return"https://yandex.ee/images/";case"fr":return"https://yandex.fr/images/";case"kg":return"https://yandex.kg/images/";case"lt":return"https://yandex.lt/images/";case"lv":return"https://yandex.lv/images/";case"md":return"https://yandex.md/images/";case"tj":return"https://yandex.tj/images/";case"tm":return"https://yandex.tm/images/";case"uz":return"https://yandex.uz/images/";default:return"https://yandex.ru/images/"}},"images-com":function(){return"https://yandex.com/images/"},interests:function(){return"http://interests.yandex.ru"},internet:function(t){switch(t){case"com":return"//internet.yandex.com";case"tr":return"//internet.yandex.com.tr";default:return"//internet.yandex.ru"}},kassa:function(){return"https://kassa.yandex.ru"},keyboard:function(){return"http://www.yandex.ru/index_engl_qwerty.html"},kraski:function(){return"http://kraski.yandex.ru"},kuda:function(){return"http://kuda.yandex.ru"},large:function(){return"http://large.yandex.ru"},legal:function(t){switch(t){case"ua":return"https://yandex.ua/legal";case"com":return"https://yandex.com/legal";case"tr":return"https://yandex.com.tr/legal";default:return"https://yandex.ru/legal"}},lenta:function(){return"http://lenta.yandex.ru"},literacy:function(){return"https://literacy.yandex.ru"},local:function(){return"http://local.yandex.ru"},lost:function(){return"http://lost.yandex.ru"},love:function(){return"http://love.yandex.ru"},mail:function(t){switch(t){case"ua":return"https://mail.yandex.ua";case"by":return"https://mail.yandex.by";case"kz":return"https://mail.yandex.kz";case"com":return"https://mail.yandex.com";case"tr":return"https://mail.yandex.com.tr";case"az":return"https://mail.yandex.az";case"il":return"https://mail.yandex.co.il";case"am":return"https://mail.yandex.com.am";case"ge":return"https://mail.yandex.com.ge";case"ee":return"https://mail.yandex.ee";case"fr":return"https://mail.yandex.fr";case"kg":return"https://mail.yandex.kg";case"lt":return"https://mail.yandex.lt";case"lv":return"https://mail.yandex.lv";case"md":return"https://mail.yandex.md";case"tj":return"https://mail.yandex.tj";case"tm":return"https://mail.yandex.tm";case"uz":return"https://mail.yandex.uz";default:return"https://mail.yandex.ru"}},maps:function(t){switch(t){case"ua":return"https://yandex.ua/maps/";case"com":return"https://yandex.com/maps/";case"tr":return"https://yandex.com.tr/harita/";case"az":return"https://yandex.az/maps/";case"il":return"https://yandex.co.il/maps/";case"am":return"https://yandex.com.am/maps/";case"ge":return"https://yandex.com.ge/maps/";case"ee":return"https://yandex.ee/maps/";case"fr":return"https://yandex.fr/maps/";case"kg":return"https://yandex.kg/maps/";case"lt":return"https://yandex.lt/maps/";case"lv":return"https://yandex.lv/maps/";case"md":return"https://yandex.md/maps/";case"tj":return"https://yandex.tj/maps/";case"tm":return"https://yandex.tm/maps/";case"uz":return"https://yandex.uz/maps/";default:return"https://yandex.ru/maps/"}},"maps-com":function(){return"https://yandex.com/maps/"},"maps-wiki":function(){return"http://nk.yandex.ru"},market:function(t){switch(t){case"ua":return"https://market.yandex.ua";case"by":return"https://market.yandex.by";case"kz":return"https://market.yandex.kz";default:return"https://market.yandex.ru"}},"market.advertising":function(t){switch(t){case"com":return"https://yandex.com/adv/products/classified/market";default:return"https://yandex.ru/adv/products/classified/market"}},master:function(){return"https://master.yandex.ru"},metrika:function(t){switch(t){case"ua":return"https://metrika.yandex.ua";case"by":return"https://metrika.yandex.by";case"kz":return"https://metrika.yandex.kz";case"com":return"https://metrica.yandex.com";case"tr":return"https://metrica.yandex.com.tr";case"az":return"https://metrika.yandex.az";case"il":return"https://metrika.yandex.co.il";case"am":return"https://metrika.yandex.com.am";case"ge":return"https://metrika.yandex.com.ge";case"ee":return"https://metrika.yandex.ee";case"fr":return"https://metrika.yandex.fr";case"kg":return"https://metrika.yandex.kg";case"lt":return"https://metrika.yandex.lt";case"lv":return"https://metrika.yandex.lv";case"md":return"https://metrika.yandex.md";case"tj":return"https://metrika.yandex.tj";case"tm":return"https://metrika.yandex.tm";case"uz":return"https://metrika.yandex.uz";default:return"https://metrika.yandex.ru"}},metro:function(){return"https://metro.yandex.ru"},mobile:function(t){switch(t){case"ua":return"https://mobile.yandex.ua";case"tr":return"https://mobil.yandex.com.tr";default:return"https://mobile.yandex.ru"}},moikrug:function(){return"http://moikrug.ru"},money:function(){return"https://money.yandex.ru"},museums:function(){return"http://18.yandex.ru"},music:function(t){switch(t){case"ua":return"https://music.yandex.ua";case"by":return"https://music.yandex.by";case"kz":return"https://music.yandex.kz";default:return"https://music.yandex.ru"}},"music-partner":function(){return"http://music-partner.yandex.ru"},nahodki:function(t){switch(t){case"ua":return"https://nahodki.yandex.ua";case"kz":return"https://nahodki.yandex.kz";default:return"https://nahodki.yandex.ru"}},nano:function(){return"http://nano.yandex.ru"},news:function(t){switch(t){case"ua":return"https://news.yandex.ua";case"by":return"https://news.yandex.by";case"kz":return"https://news.yandex.kz";case"tr":return"https://haber.yandex.com.tr";case"az":return"https://news.yandex.az";case"il":return"https://news.yandex.co.il";case"am":return"https://news.yandex.com.am";case"ge":return"https://news.yandex.com.ge";case"ee":return"https://news.yandex.ee";case"fr":return"https://news.yandex.fr";case"kg":return"https://news.yandex.kg";case"lt":return"https://news.yandex.lt";case"lv":return"https://news.yandex.lv";case"md":return"https://news.yandex.md";case"tj":return"https://news.yandex.tj";case"tm":return"https://news.yandex.tm";case"uz":return"https://news.yandex.uz";default:return"https://news.yandex.ru"}},"news-com":function(){return"https://news.yandex.com"},notifications:function(t){switch(t){case"ua":return"https://notifications.yandex.ua";case"by":return"https://notifications.yandex.by";case"kz":return"https://notifications.yandex.kz";case"com":return"https://notifications.yandex.com";case"tr":return"https://notifications.yandex.com.tr";default:return"https://notifications.yandex.ru"}},oauth:function(t){switch(t){case"com":return"https://oauth.yandex.com";default:return"https://oauth.yandex.ru"}},online:function(){return"http://online.yandex.ru"},openid:function(){return"http://openid.yandex.ru"},opera:function(t){switch(t){case"tr":return"https://opera.yandex.com.tr";default:return"https://opera.yandex.ru"}},opinion:function(){return"http://opinion.yandex.ru"},partners:function(t){switch(t){case"ua":return"http://partner.yandex.ua";case"by":return"http://partner.yandex.by";case"kz":return"http://partner.yandex.kz";case"com":return"http://partner.yandex.com";default:return"http://partner.yandex.ru"}},"partners-en":function(t){switch(t){case"ua":return"http://partner.yandex.ua";case"by":return"http://partner.yandex.by";case"kz":return"http://partner.yandex.kz";case"com":return"http://partner.yandex.com";default:return"http://partner.yandex.ru"}},partnersearch:function(){return"http://yandex.ru"},pass:function(t){switch(t){case"ua":return"https://pass.yandex.ua";case"by":return"https://pass.yandex.by";case"kz":return"https://pass.yandex.kz";case"com":return"https://pass.yandex.com";case"tr":return"https://pass.yandex.com.tr";case"az":return"https://pass.yandex.az";case"il":return"https://pass.yandex.co.il";case"am":return"https://pass.yandex.com.am";case"ge":return"https://pass.yandex.com.ge";case"ee":return"https://pass.yandex.ee";case"fr":return"https://pass.yandex.fr";case"kg":return"https://pass.yandex.kg";case"lt":return"https://pass.yandex.lt";case"lv":return"https://pass.yandex.lv";case"md":return"https://pass.yandex.md";case"tj":return"https://pass.yandex.tj";case"tm":return"https://pass.yandex.tm";case"uz":return"https://pass.yandex.uz";default:return"https://pass.yandex.ru"}},passport:function(t){switch(t){case"ua":return"https://passport.yandex.ua";case"by":return"https://passport.yandex.by";case"kz":return"https://passport.yandex.kz";case"com":return"https://passport.yandex.com";case"tr":return"https://passport.yandex.com.tr";case"az":return"https://passport.yandex.az";case"il":return"https://passport.yandex.co.il";case"am":return"https://passport.yandex.com.am";case"ge":return"https://passport.yandex.com.ge";case"ee":return"https://passport.yandex.ee";case"fr":return"https://passport.yandex.fr";case"kg":return"https://passport.yandex.kg";case"lt":return"https://passport.yandex.lt";case"lv":return"https://passport.yandex.lv";case"md":return"https://passport.yandex.md";case"tj":return"https://passport.yandex.tj";case"tm":return"https://passport.yandex.tm";case"uz":return"https://passport.yandex.uz";default:return"https://passport.yandex.ru"}},pdd:function(){return"https://pdd.yandex.ru"},peoplesearch:function(t){switch(t){case"ua":return"http://people.yandex.ua";default:return"http://people.yandex.ru"}},perevod:function(){return"https://perevod.yandex.ru"},plus:function(){return"https://plus.yandex.ru"},probki:function(t){switch(t){case"ua":return"http://probki.yandex.ua";default:return"http://probki.yandex.ru"}},pulse:function(t){switch(t){case"ua":return"http://blogs.yandex.ua/pulse";case"by":return"http://blogs.yandex.by/pulse";case"kz":return"http://blogs.yandex.kz/pulse";default:return"http://blogs.yandex.ru/pulse"}},punto:function(){return"https://punto.yandex.ru"},pvo:function(){return"http://ask.yandex.ru"},rabota:function(t){switch(t){case"ua":return"https://rabota.yandex.ua";case"by":return"https://rabota.yandex.by";case"kz":return"https://rabota.yandex.kz";default:return"https://rabota.yandex.ru"}},radar:function(t){switch(t){case"ru":return"https://radar.metrika.yandex?lang=ru";case"com":return"https://radar.metrika.yandex?lang=en";case"tr":return"https://radar.metrika.yandex?lang=tr";default:return"https://radar.metrika.yandex"}},rasp:function(t){switch(t){case"ua":return"https://rasp.yandex.ua";case"by":return"https://rasp.yandex.by";case"kz":return"https://rasp.yandex.kz";case"tr":return"https://seferler.yandex.com.tr";default:return"https://rasp.yandex.ru"}},realty:function(t){switch(t){case"ua":return"https://realty.yandex.ua";case"by":return"https://realty.yandex.by";case"kz":return"https://realty.yandex.kz";default:return"https://realty.yandex.ru"}},referats:function(){return"https://referats.yandex.ru"},review:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";default:return"https://yandex.ru"}},rk:function(){return"http://rk.yandex.ru"},root:function(){return"https://root.yandex.ru"},school:function(){return"http://school.yandex.ru"},search:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";case"az":return"https://yandex.az";case"il":return"https://yandex.co.il";case"am":return"https://yandex.com.am";case"ge":return"https://yandex.com.ge";case"ee":return"https://yandex.ee";case"fr":return"https://yandex.fr";case"kg":return"https://yandex.kg";case"lt":return"https://yandex.lt";case"lv":return"https://yandex.lv";case"md":return"https://yandex.md";case"tj":return"https://yandex.tj";case"tm":return"https://yandex.tm";case"uz":return"https://yandex.uz";default:return"https://yandex.ru"}},serp:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";case"az":return"https://yandex.az";case"il":return"https://yandex.co.il";case"am":return"https://yandex.com.am";case"ge":return"https://yandex.com.ge";case"ee":return"https://yandex.ee";case"fr":return"https://yandex.fr";case"kg":return"https://yandex.kg";case"lt":return"https://yandex.lt";case"lv":return"https://yandex.lv";case"md":return"https://yandex.md";case"tj":return"https://yandex.tj";case"tm":return"https://yandex.tm";case"uz":return"https://yandex.uz";default:return"https://yandex.ru"}},server:function(){return"http://company.yandex.ru/technology/server/"},shtrafi:function(){return"https://money.yandex.net/debts"},site:function(t){switch(t){case"ua":return"https://site.yandex.ua";case"tr":return"https://ozel.yandex.com.tr";default:return"https://site.yandex.ru"}},slovari:function(t){switch(t){case"ua":return"https://slovari.yandex.ua";case"by":return"https://slovari.yandex.by";case"kz":return"https://slovari.yandex.kz";default:return"https://slovari.yandex.ru"}},so:function(){return"http://so.yandex.ru"},social:function(t){switch(t){case"ua":return"https://social.yandex.ua";case"by":return"https://social.yandex.by";case"kz":return"https://social.yandex.kz";case"com":return"https://social.yandex.ru";case"tr":return"https://social.yandex.com.tr";default:return"https://social.yandex.ru"}},soft:function(t){switch(t){case"ua":return"https://soft.yandex.ua";case"tr":return"https://soft.yandex.com.tr";default:return"https://soft.yandex.ru"}},sport:function(t){switch(t){case"ua":return"http://sport.yandex.ua";case"by":return"http://sport.yandex.by";case"kz":return"http://sport.yandex.kz";case"tr":return"http://spor.yandex.com.tr";default:return"http://sport.yandex.ru"}},sprav:function(t){switch(t){case"ua":return"https://yandex.ru/sprav";case"by":return"https://sprav.yandex.by";case"kz":return"https://sprav.yandex.kz";case"com":return"https://yandex.com/sprav";case"tr":return"https://rehber.yandex.com.tr";default:return"https://sprav.yandex.ru"}},start:function(t){switch(t){case"ua":return"https://help.yandex.ua/start/";case"com":return"https://help.yandex.com/start/";case"tr":return"https://yardim.yandex.com.tr/start";default:return"https://help.yandex.ru/start/"}},stat:function(t){switch(t){case"ua":return"https://stat.yandex.ua";case"by":return"https://stat.yandex.by";default:return"https://stat.yandex.ru"}},subs:function(){return"https://subs.yandex.ru"},support:function(t){switch(t){case"ua":return"https://yandex.ua/support/";case"by":return"https://yandex.by/support/";case"kz":return"https://yandex.kz/support/";case"com":return"https://yandex.com/support/";case"tr":return"https://yandex.com.tr/support/";default:return"https://yandex.ru/support/"}},surveys:function(){return"https://surveys.yandex.ru"},taxi:function(){return"https://taxi.yandex.ru"},telephony:function(){return"https://telephony.yandex.ru/"},terms:function(){return"http://terms.yandex.ru"},tests:function(){return"http://tests.yandex.ru"},ticket:function(){return"http://ticket.yandex.ru"},time:function(t){switch(t){case"ua":return"https://time.yandex.ua";case"by":return"https://time.yandex.by";case"kz":return"https://time.yandex.kz";case"com":return"https://time.yandex.com";case"tr":return"https://saat.yandex.com.tr";default:return"https://time.yandex.ru"}},toloka:function(t){switch(t){case"com":return"https://toloka.yandex.com";case"tr":return"https://toloka.yandex.com.tr";default:return"https://toloka.yandex.ru"}},toster:function(){return"http://toster.yandex.ru"},translate:function(t){switch(t){case"ua":return"https://translate.yandex.ua";case"by":return"https://translate.yandex.by";case"kz":return"https://translate.yandex.kz";case"com":return"https://translate.yandex.com";case"tr":return"https://ceviri.yandex.com.tr";case"az":return"https://translate.yandex.az";case"il":return"https://translate.yandex.co.il";case"am":return"https://translate.yandex.com.am";case"ge":return"https://translate.yandex.com.ge";case"ee":return"https://translate.yandex.ee";case"fr":return"https://translate.yandex.fr";case"kg":return"https://translate.yandex.kg";case"lt":return"https://translate.yandex.lt";case"lv":return"https://translate.yandex.lv";case"md":return"https://translate.yandex.md";case"tj":return"https://translate.yandex.tj";case"tm":return"https://translate.yandex.tm";case"uz":return"https://translate.yandex.uz";default:return"https://translate.yandex.ru"}},tune:function(t){switch(t){case"ua":return"https://yandex.ua/tune";case"by":return"https://yandex.by/tune";case"kz":return"https://yandex.kz/tune";case"com":return"https://yandex.com/tune";case"tr":return"https://yandex.com.tr/tune";case"uz":return"https://yandex.uz/tune";default:return"https://yandex.ru/tune"}},tv:function(t){switch(t){case"ua":return"https://tv.yandex.ua";case"by":return"https://tv.yandex.by";case"kz":return"https://tv.yandex.kz";default:return"https://tv.yandex.ru"}},uslugi:function(){return"http://uslugi.yandex.ru"},video:function(t){switch(t){case"ua":return"https://yandex.ua/video/";case"by":return"https://yandex.by/video/";case"kz":return"https://yandex.kz/video/";case"com":return"https://yandex.com/video/";case"tr":return"https://yandex.com.tr/video/";case"az":return"https://yandex.az/video/";case"il":return"https://yandex.co.il/video/";case"am":return"https://yandex.com.am/video/";case"ge":return"https://yandex.com.ge/video/";case"ee":return"https://yandex.ee/video/";case"fr":return"https://yandex.fr/video/";case"kg":return"https://yandex.kg/video/";case"lt":return"https://yandex.lt/video/";case"lv":return"https://yandex.lv/video/";case"md":return"https://yandex.md/video/";case"tj":return"https://yandex.tj/video/";case"tm":return"https://yandex.tm/video/";case"uz":return"https://yandex.uz/video/";default:return"https://yandex.ru/video/"}},"video-com":function(){return"https://yandex.com/video/"},vno:function(){return"https://zno.yandex.ua"},wdgt:function(t){switch(t){case"ua":return"https://wdgt.yandex.ua";case"by":return"https://wdgt.yandex.by";case"kz":return"https://wdgt.yandex.kz";case"tr":return"https://wdgt.yandex.com.tr";default:return"https://wdgt.yandex.ru"}},weather:function(t){switch(t){case"ua":return"https://pogoda.yandex.ua";case"by":return"https://pogoda.yandex.by";case"kz":return"https://pogoda.yandex.kz";case"tr":return"https://hava.yandex.com.tr";case"az":return"https://pogoda.yandex.az";case"il":return"https://pogoda.yandex.co.il";case"am":return"https://pogoda.yandex.com.am";case"ge":return"https://pogoda.yandex.com.ge";case"ee":return"https://pogoda.yandex.ee";case"fr":return"https://pogoda.yandex.fr";case"kg":return"https://pogoda.yandex.kg";case"lt":return"https://pogoda.yandex.lt";case"lv":return"https://pogoda.yandex.lv";case"md":return"https://pogoda.yandex.md";case"tj":return"https://pogoda.yandex.tj";case"tm":return"https://pogoda.yandex.tm";case"uz":return"https://pogoda.yandex.uz";default:return"https://pogoda.yandex.ru"}},webmaster:function(t){switch(t){case"ua":return"https://webmaster.yandex.ua";case"com":return"https://webmaster.yandex.com";case"tr":return"https://webmaster.yandex.com.tr";default:return"https://webmaster.yandex.ru"}},"webmaster-api":function(t){switch(t){case"com":case"tr":return"https://tech.yandex.com/webmaster/";default:return"https://tech.yandex.ru/webmaster/"}},widgets:function(t){switch(t){case"ua":return"https://widgets.yandex.ua";case"by":return"https://widgets.yandex.by";case"kz":return"https://widgets.yandex.kz";case"tr":return"https://widgets.yandex.com.tr";default:return"https://widgets.yandex.ru"}},wordstat:function(){return"https://wordstat.yandex.ru"},wow:function(){return"http://my.ya.ru"},www:function(t){switch(t){case"ua":return"https://yandex.ua";case"by":return"https://yandex.by";case"kz":return"https://yandex.kz";case"com":return"https://yandex.com";case"tr":return"https://yandex.com.tr";case"az":return"https://yandex.az";case"il":return"https://yandex.co.il";case"am":return"https://yandex.com.am";case"ge":return"https://yandex.com.ge";case"ee":return"https://yandex.ee";case"fr":return"https://yandex.fr";case"kg":return"https://yandex.kg";case"lt":return"https://yandex.lt";case"lv":return"https://yandex.lv";case"md":return"https://yandex.md";case"tj":return"https://yandex.tj";case"tm":return"https://yandex.tm";case"uz":return"https://yandex.uz";default:return"https://yandex.ru"}},xmlsearch:function(t){switch(t){case"ua":return"https://xml.yandex.ua";case"by":return"https://xml.yandex.by";case"kz":return"https://xml.yandex.kz";case"com":return"https://xml.yandex.com";case"tr":return"https://xml.yandex.com.tr";default:return"https://xml.yandex.ru"}},yaca:function(t){switch(t){case"ua":return"https://yaca.yandex.ua";case"by":return"https://yaca.yandex.by";default:return"https://yaca.yandex.ru"}},yamb:function(){return"https://yamb.yandex.ru"},zakladki:function(){return"http://zakladki.yandex.ru"},znatoki:function(){return"https://yandex.ru/znatoki/"}}}),r("footer")(c()(function(){return M({_inFooter:!0})}),m()(function(){return[{block:"clearfix"}]}),u()(function(){return{role:"contentinfo"}}),t(function(){return!this.ctx.content}).content()(function(){var t=this["i-services"],e=this.ctx.region,n=[],r=[];n.push({elem:"link",url:e?t.serviceUrl("mobile",e):BEM.I18N("footer","apps-url"),content:BEM.I18N("footer","apps")});var s=-1===this.ctx.tld.indexOf("com");return s&&r.push({elem:"link",url:e?t.serviceUrl("advertising",e)+"/kupislova.xml?advertising":BEM.I18N("footer","advert-url"),content:BEM.I18N("footer","advert")}),s&&this.ctx.statUrl&&r.push({elem:"link",url:this.ctx.statUrl,content:BEM.I18N("footer","stat")}),r.push({elem:"link",url:e?t.serviceUrl("legal",e)+"/termsofuse":BEM.I18N("footer","termsofuse-url"),content:BEM.I18N("footer","termsofuse")}),r.push({elem:"link",url:e?t.serviceUrl("company",e):BEM.I18N("footer","about-url"),content:BEM.I18N("footer","about")}),r.push({block:"copyright",elemLinkMix:{block:this.block,elem:"link"},start:this.ctx.start}),[{elem:"column",content:n},{elem:"column",elemMods:{side:"right"},content:r}]})),r("footer")(c()(function(){var t=this.ctx.isIframe;return this.mods.iframe=t,M()}),i("teaser-text")(function(){return BEM.I18N("footer","created-with",{url:this.ctx.urls.adminUrl})}),t(function(t){return"biz"===t.ctx.siteType}).mode("teaser-text")(function(){return BEM.I18N("footer","created-by-user-with",{url:this.ctx.urls.adminUrl})}),f()(function(){var t=this.ctx,e=t.isIframe,n=t.urls,r=t.siteType,s=t.yandexUrl;return[{elem:"promo",mix:{block:this.block,elem:"section"},content:{html:z("teaser-text")}},!e&&{elem:"links",content:[{elem:"link",url:n.feedbackUrl,content:BEM.I18N("footer","feedback")},"biz"===r&&{elem:"link",url:n.confidentialUrl,content:BEM.I18N("footer","confidential")},{block:"copyright",content:{block:"link",mods:{theme:"normal"},mix:[{block:this.block,elem:"link"}],url:s,content:BEM.I18N("footer","copyright")}}]}]})),r("footer").elem("link").def()(function(){var t=this.extend(this.ctx,{block:"link",mods:{theme:"normal"},mix:[{block:this.block,elem:this.elem,elemMods:this.elemMods}]});return this.ctx.mix&&(t.mix=t.mix.concat(this.ctx.mix)),delete t.elem,w(t)}),r("header2")(u()(function(){return{role:"banner"}}),t(function(){return void 0===this.ctx.content}).content()(function(){var t=this.ctx;return[{elem:"main",content:[t.logo,{elem:"left",content:t.left},t.right&&{elem:"right",content:t.right}]},t.under&&{elem:"under",content:t.under}]}),s("logo").content()(function(){return this.ctx.serviceLogo?[].concat(M(),{block:"icon",mix:[{block:"header2",elem:"logo"},{block:"logo",mods:{service:"yes"}}]}):M()})),r("f-mini-profile")(d()(!0),f()(function(){return this.ctx.data.user?[{block:"f-user-avatar",data:this.ctx.data},{block:"popup2",mods:{target:"anchor",theme:"normal",autoclosable:"yes"},directions:["bottom-right"],mix:{block:this.block,elem:"popup"},content:{block:this.block,elem:"content",data:this.ctx.data}}]:{block:this.block,elem:"login",data:{loginUrl:this.ctx.data.loginUrl}}}),s("content")(f()(function(){var t=this.ctx.data,e=t.logoutUrl,n=t.user,r=[{elem:"name",content:n.displayName||n.login},{elem:"email",content:n.email||n.federationName||n.federationId}];return[{block:this.block,elem:"avatar",content:{block:"f-user-avatar",data:Object.assign({},t,{size:"m",interactive:!1})}},{block:this.block,elem:"info",content:r.reduce(function(t,e){var n=e.elem,r=e.content;return r&&t.push({elem:"info-elem",data:{elem:n,content:r}}),t},[])},{block:"link",mix:{block:this.block,elem:"button-logout"},url:e,content:{tag:"svg",attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512","xml:space":"preserve",fill:"currentColor"},content:[{tag:"path",attrs:{d:"M255.15,468.625H63.787c-11.737,0-21.262-9.526-21.262-21.262V64.638c0-11.737,9.526-21.262,21.262-21.262H255.15 c11.758,0,21.262-9.504,21.262-21.262S266.908,0.85,255.15,0.85H63.787C28.619,0.85,0,29.47,0,64.638v382.724 c0,35.168,28.619,63.787,63.787,63.787H255.15c11.758,0,21.262-9.504,21.262-21.262 C276.412,478.129,266.908,468.625,255.15,468.625z"}},{tag:"path",attrs:{d:"M505.664,240.861L376.388,113.286c-8.335-8.25-21.815-8.143-30.065,0.213s-8.165,21.815,0.213,30.065l92.385,91.173 H191.362c-11.758,0-21.262,9.504-21.262,21.262c0,11.758,9.504,21.263,21.262,21.263h247.559l-92.385,91.173 c-8.377,8.25-8.441,21.709-0.213,30.065c4.167,4.21,9.653,6.336,15.139,6.336c5.401,0,10.801-2.041,14.926-6.124l129.276-127.575 c4.04-3.997,6.336-9.441,6.336-15.139C512,250.302,509.725,244.88,505.664,240.861z"}}]}}]})),s("info-elem")(x()(function(){var t=this.ctx.data,e=t.elem,n=t.content;return{block:this.block,elem:e,tag:"p",content:n,attrs:{title:n}}}))),r("f-user-avatar")(d()(!0),f()(function(){var t=this.ctx.data,e=t.user,n=t.url,r=t.size,s=void 0===r?"s":r,i=t.title,a=void 0===i?"":i,o=t.interactive,c=void 0!==o&&o,l=t.internal,u="";return e?u=z("get-user-avatar",{user:e,size:s,internal:l}):n&&(u=n),{block:this.block,elem:"photo",attrs:Object.assign(u?{style:"background-image: url("+u+")"}:{},a?{title:a}:{}),mix:{block:this.block,mods:{size:s,interactive:c,federation:e.isFederationUser}},content:e.isFederationUser&&{elem:"federation",content:{tag:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:z("federation-icon-size-map")[s],height:z("federation-icon-size-map")[s]},content:[{tag:"path",attrs:{d:"M4.005 15.365v-4.732c0-.349.284-.634.634-.634H5v-.79c0-1.868 1.294-3.205 2.999-3.205 1.707 0 2.999 1.333 2.999 3.205V10h.369c.35 0 .633.285.633.634v4.732c0 .35-.284.635-.633.635h-6.73a.635.635 0 0 1-.633-.635zM7 15v-3H6v1H5v1h1v1zm3 0v-1h1v-1h-1v-1H9v3zm-.001-5.001v-.79c0-1.362-.886-2.205-1.999-2.205-1.112 0-1.999.847-1.999 2.205V10zM4 9.209V9H1c-.657 0-1-.344-1-1 0-1.15 1.83-3 3-3h2c.355 0 .77.17 1.176.439-.488.25-.915.601-1.195.953l-.112.14a3.938 3.938 0 0 0-.221.325 3.731 3.731 0 0 0-.32.628c-.013.03-.032.076-.048.126-.02.046-.043.112-.061.181-.012.03-.028.08-.042.132a1.755 1.755 0 0 0-.049.193 2.627 2.627 0 0 0-.072.37 3.789 3.789 0 0 0-.045.425c-.007.099-.01.197-.01.297zm7.987-.296a3.789 3.789 0 0 0-.03-.332c-.005-.032-.009-.064-.015-.093a2.627 2.627 0 0 0-.072-.37 1.755 1.755 0 0 0-.05-.194 1.144 1.144 0 0 0-.041-.132 1.425 1.425 0 0 0-.061-.181 1.273 1.273 0 0 0-.048-.126 1.883 1.883 0 0 0-.084-.19 3.731 3.731 0 0 0-.363-.632 3.938 3.938 0 0 0-.095-.131l-.112-.14a3.766 3.766 0 0 0-1.193-.953C10.231 5.17 10.645 5 11 5h2c1.17 0 3 1.85 3 3 0 .656-.343 1-1 1h-3.001v.21c0-.1-.004-.2-.011-.297zM1.998 2a2.002 2.002 0 0 1 4.003 0A2.002 2.002 0 0 1 2 2zm8 0a2.002 2.002 0 0 1 4.003 0A2.002 2.002 0 0 1 10 2z"}},{tag:"path",attrs:{d:"M0 .001V16h15.999V.001z",fill:"none"}}]}}}}),i("text-size-map")(function(){return{xxs:"small",xs:"small",s:"middle",m:"middle",l:"50"}}),i("federation-icon-size-map")(function(){return{xxs:8,xs:8,s:8,m:10,l:10}}),i("get-user-avatar")(function(t){var e=t.user,n=t.size,r=t.internal,s="object"===("undefined"==typeof window?"undefined":_typeof(window))&&window.devicePixelRatio>1;function i(t){return t?s?t.replace(/\/islands-(?!retina-)([^/]+)$/,"/islands-retina-$1"):t:""}if(e.avatarData)return"data:image/jpeg;base64,"+e.avatarData;if(r&&e.avatarHost&&e.login)return e.avatarHost+"/api/v1/user/"+e.login+"/avatar/100.jpg";var a=e.avatar||"https://avatars.mds.yandex.net/get-yapic/0/0-0/";if(e.avatarHost&&e.avatarId)a=e.avatarHost+"/get-yapic/"+e.avatarId+"/";else{if(e.isFederationUser&&e.avatar)return i(e.avatar);if(a.includes("/islands-"))return i(e.avatar)}return a+"islands"+(s?"-retina":"")+"-"+z("text-size-map")[n]})),r("popup2")(c()(function(){return void 0===this.mods.view&&(this.mods.view="classic"),M()}),d()(function(){var t=this.ctx;return{mainOffset:t.mainOffset,secondaryOffset:t.secondaryOffset,viewportOffset:t.viewportOffset,tailOffset:t.tailOffset,tailSize:t.tailSize,directions:t.directions,zIndexGroupLevel:t.zIndexGroupLevel}}),t(function(){return this.ctx.hasTail}).content()(function(){var t=this.ctx,e=[].concat(t.content);return[].concat({elem:"tail"},e)})),r("popup2").mod("target","anchor").def()(function(){return void 0===this.mods.hiding&&(this.mods.hiding="yes"),M()}),r("popup2").mod("target","anchor").mod("visible","yes").def()(function(){return this.mods.outside="yes",M()}),r("popup2").mod("hiding","yes").def()(function(){return"anchor"!==this.mods.target&&(this.mods.target="anchor"),M()}),r("f-mini-profile").elem("login").replace()(function(){var t=BEM.I18N("user2","enter");return[{block:"button2",mods:{size:"m",theme:"pseudo",type:"link"},mix:[{block:this.block,elem:"login"},{block:"user2",elem:"enter"}],url:this.ctx.data.loginUrl,text:t,title:t,tabindex:"-1",iconLeft:{mix:{block:"user2",elem:"enter-icon"}}}]}),r("button2")(c()(function(){return void 0===this.mods.view&&(this.mods.view="classic"),this.mods.progress&&(this.mods.disabled="yes"),void 0===this.ctx.tabindex&&(this.ctx.tabindex="0"),M()}),t(function(){return void 0===this.ctx.tag}).tag()("button"),d()(function(){return{_tabindex:this.mods.disabled?this.ctx.tabindex:void 0}}),u()(function(){var t=this.ctx,e=Boolean(this.mods.disabled);return{type:"button",autocomplete:"off",id:t.id,title:t.title,name:t.name,value:t.val,tabindex:e?void 0:t.tabindex,disabled:e,"aria-disabled":e&&"true"}}),t(function(){return!this.ctx.content}).content()(function(){var t=this.ctx;return[t.icon&&{elem:"icon",icon:t.icon},t.iconLeft&&{elem:"icon",elemMods:{side:"left"},icon:t.iconLeft},t.iconRight&&{elem:"icon",elemMods:{side:"right"},icon:t.iconRight},void 0!==t.text&&(this.isSimple(t.text)?{elem:"text",content:{html:this.xmlEscape(t.text)}}:this.extend(t.text,{elem:"text"}))].filter(Boolean)})),r("button2")(c()(function(){var t=this.ctx,e=t.metrikaParams,n=t.metrikaGoal;return(e||n)&&(this.mods["has-metrika"]="yes"),M()})),r("button2").elem("text").tag()("span"),r("button2").mod("has-metrika","yes")(d()(function(){var t=this.ctx,e=t.metrikaParams,n=t.metrikaGoal;return this.extend(M(),{metrikaParams:e,metrikaGoal:n})})),r("button2").elem("icon").def()(function(){var t=this.extend({},this.ctx.icon);return t.block="icon",t.mix=[{block:"button2",elem:"icon",elemMods:this.elemMods}].concat(t.mix),t.mods=this.extend({size:this.mods.size},t.mods),w(t)}),r("icon")(l()("span"),u()(function(){var t=this.ctx,e=void 0!==t.url,n=void 0!==Object(t.attrs).style,r=(n?t.attrs.style:"")+(e?";background-image:url('"+t.url+"');":"");return n&&(t.attrs.style=r),{style:r||void 0}})),r("button2").mod("type","link")(c()(function(){var t=this.ctx.url;return this._url=this.isSimple(t)?t:this.reapply(t),M()}),l()("a"),t(function(){return"_blank"===this.ctx.target}).attrs()(function(){var t=this.ctx.attrs,e=void 0!==Object(t).rel?String(t.rel):"";return e&&-1===e.indexOf("noopener")&&(t.rel=e+" noopener"),this.extend(M(),{rel:"noopener"})}),u()(function(){var t=void 0!==this._url,e=Boolean(this.mods.disabled)?t&&-1:this.ctx.tabindex;return this.extend(M(),{target:this.ctx.target,href:this.mods.disabled?void 0:this.ctx.url,autocomplete:void 0,type:void 0,disabled:void 0,tabindex:e})}),d()(function(){return this.extend(M(),{_url:this.mods.disabled?this.ctx.url:void 0})})),r("user2")(c()(function(){var t=this.ctx,e="undefined"!=typeof window?window.location:{},n=this["i-services"],r=t.accountAttributes||{},s={uid:!!t.hasOwnProperty("uid")&&t.uid,yu:t.yu,plus:r.has_plus||r.plus_available&&!1,retpath:t.hasOwnProperty("retpath")?t.retpath:e.href||"",name:t.hasOwnProperty("name")?t.name:t.uid||!1,maxLength:t.maxLength,subname:t.subname,avatarId:t.hasOwnProperty("avatarId")?t.avatarId:"",passportHost:t.hasOwnProperty("passportHost")?t.passportHost:n.serviceUrl("passport"),userAccount:t.userAccount||{},avatarHost:t.avatarHost,passportLinkParams:t.passportLinkParams||""};s.retpathEncoded=encodeURIComponent(s.retpath);var i=[s.passportHost,"/passport?mode=embeddedauth","&action=logout","&yu="+s.yu,"&uid="+s.uid,"&retpath="+s.retpathEncoded].join("");return M({_user2Mods:this.mods,_params:s,_exitUrl:i,_unreadCount:this.ctx.unreadCount||0})}),d()(function(){var t=this.ctx.js||{};return this.extend({_uid:this._params.uid,_plus:this._params.plus,_retpath:this._params.retpath,_yu:this._params.yu,_passportHost:this._params.passportHost,_avatarHost:this._params.avatarHost,accountsUrl:this["i-services"].serviceUrl("pass")+"/accounts"},t)}),t(function(){return void 0===this.ctx.content}).content()(function(){return z("default-content")}),f()(function(){return this.ctx.uid?M():{block:"user2",elem:"enter"}}),i("default-content")(function(){var t=this.ctx.accounts||[],e=this.mods.provider||"",n=this.ctx.accountAttributes||{},r=!1===this.ctx.yaplus?this.ctx.hat:void 0,s=r&&(r.mods||{})["fetch-data"],i=n.has_plus||n.plus_available&&!1;this.ctx.mods&&this.ctx.mods["has-logout"]&&(t=t.map(function(t){return t.mods=t.mods||{},t.mods["has-logout"]="yes",t}));var a={action:"plus",elemMods:{hidden:r&&!s&&"yes"},plus:this.ctx.yaplus,plusLinkParams:this.ctx.plusLinkParams},o=this.ctx.actionsMenu?[].concat(this.ctx.actionsMenu).filter(function(t){return"plus"===t.action?(a=this.extend(a,t),!1):t},this).filter(Boolean):[{action:"mail"}];return[{elem:"current-account",plus:i,name:this._params.name,maxLength:this._params.maxLength,unreadCount:this._unreadCount,avatarId:this._params.avatarId,avatarHost:this._params.avatarHost,provider:e},{elem:"a11y-exit"},this.extend({elem:"popup",content:{block:"user2",elem:"menu",hat:r,plus:i,addAccount:this.ctx.addAccount,actionsMenu:void 0===this.ctx.yaplus?o:o.concat(a),multiAuthMenu:this.ctx.multiAuthMenu||[{action:"passport"},{action:"exit"}],settingsUrl:this.ctx.settingsUrl,helpUrl:this.ctx.helpUrl,accounts:t,avatarHost:this._params.avatarHost,provider:e}},this.ctx.popup)]})),r("i-ua").content()(function(){return[].concat(M(),{html:';document.documentElement.className+=" i-ua_orient_"+(window.innerWidth>window.innerHeight?"landscape":"portrait");'})}),r("user2").elem("enter").replace()(function(){var t=BEM.I18N("user2","enter"),e=this._params,n=e.passportHost+"/auth?retpath="+e.retpathEncoded;return""!==e.passportLinkParams&&(n+="&"+e.passportLinkParams),[{block:"button2",mods:{size:"m",theme:"pseudo",type:"link"},mix:{block:"user2",elem:"enter"},url:n,tabindex:"-1",iconLeft:{mix:{block:"user2",elem:"enter-icon"}},title:t,text:t}]}),r("user2").elem("current-account").replace()(function(){var t=!1!==this.ctx.avatarId&&"yes",e=this._params.passportHost;return""!==this._params.passportLinkParams&&(e+="?"+this._params.passportLinkParams),this.util.mergeBemjson({block:"user-account",mix:{block:"user2",elem:"current-account",elemMods:this.elemMods},mods:{"has-ticker":t,"has-accent-letter":"yes",provider:this.ctx.provider},name:this.ctx.name,maxLength:this.ctx.maxLength,subname:this.ctx.subname,url:e,ticker:t?{count:this.ctx.unreadCount}:void 0,pic:!1===this.ctx.avatarId?void 0:{avatarId:this.ctx.avatarId,plus:this.ctx.plus},avatarHost:this.ctx.avatarHost},this._params.userAccount)}),r("user-account")(d()(!0),u()({tabindex:"0"}),t(function(){return this.ctx.url})(l()("a"),u()(function(){return this.extend(M(),{href:this.ctx.url})})),t(function(){return!1!==this.ctx.name&&void 0===this.ctx.content}).content()(function(){var t=this.ctx.maxLength||16,e=this.ctx.name&&this.ctx.name.length>t?this.ctx.name.substring(0,t-1)+"…":this.ctx.name;return[this.isSimple(e)?{elem:"name",text:e||"",subname:this.ctx.subname}:this.extend(e,{elem:"name",subname:this.ctx.subname})]}),t(function(){return void 0!==this.ctx.pic})(f()(function(){return[{elem:"pic",pic:this.extend({plus:this.ctx.plus},this.ctx.pic),avatarHost:this.ctx.avatarHost,provider:this.ctx.mods&&this.ctx.mods.provider},M()]}))),r("link").mod("pseudo","yes")(f().match(function(){return!this.mods.inner})(function(){return{elem:"inner",content:M()}})),r("user-account").elem("pic").match(function(){return this.ctx.pic}).replace()(function(){return this.util.mergeBemjson({block:"user-pic",mods:{provider:this.ctx.provider},host:this.ctx.avatarHost,mix:{block:"user-account",elem:"pic",elemMods:this.elemMods}},this.ctx.pic)}),r("user-pic")(c()(function(){return this.ctx.plus&&(this.mods["has-plus"]="yes"),M()}),i("avatar-url")(function(){var t=this.ctx.host||"https://avatars.mds.yandex.net",e=this.ctx.avatarId||"0/0-0";return{lodpiUrl:t+"/get-yapic/"+e+"/islands-middle",hidpiUrl:t+"/get-yapic/"+e+"/islands-retina-middle"}}),t(function(){return void 0===this.ctx.content}).content()(function(){var t=z("avatar-url");return[{elem:"image",elemMods:{lodpi:"yes"},attrs:{style:"background-image: url("+t.lodpiUrl+");"}},{elem:"image",elemMods:{hidpi:"yes"},attrs:{style:"background-image: url("+t.hidpiUrl+");"}}]})),r("i-ua").content()(function(){var t=[";(function(w,e,s,c,x,l,p,d){",'c="className";','x="deviceXDPI";','l="logicalXDPI";','p="devicePixelRatio";',"d=x in s&&l in s&&s[x]/s[l]||p in w&&w[p];",'d>1&&(e[c]+=" i-ua_retina_yes")',"})(window,document.documentElement,screen);"].join("");return[].concat(M(),{html:t})}),r("user-account").elem("name")(l()("span"),t(function(){return void 0===this.ctx.content&&this.ctx.text}).content()(function(){return{html:this.xmlEscape(this.ctx.text)}})),r("user-account").match(function(){return void 0!==this.ctx.ticker}).def()(function(){return this.mods["has-ticker"]="yes",M()}),r("user-account").mod("has-ticker","yes").match(function(){return!this.ctx.content}).content()(function(){return[M(),{elem:"ticker",ticker:this.ctx.ticker}]}),r("user-account").elem("ticker").replace()(function(){return this.util.mergeBemjson({block:"ticker",mix:{block:"user-account",elem:"ticker",elemMods:this.elemMods}},this.ctx.ticker)}),r("ticker")(c()(function(){return M({_count:this.ctx.count||0,_maxCount:this.ctx.maxCount||99,_url:this.ctx.url})}),l()("span"),u()(function(){return{role:"alert","aria-live":"assertive","aria-atomic":"true"}}),t(function(){return!this._count}).mix()(function(){return[{mods:{state:"empty"}}]}),d()(function(){return{count:this._count,maxCount:this._maxCount}}),f()(function(){return{elem:"count",url:this.ctx.url,content:this.ctx.count}})),r("ticker").elem("count")(l()("span"),t(function(){return!this.ctx.url}).mix()(function(){return[{elem:"plain"}]}),t(function(){return this.ctx.url})(l()("a"),u()(function(){return{href:this.ctx.url}})),f()(function(){return[{elem:"text"},{elem:"value",count:this.ctx.content}]})),r("ticker").elem("text")(l()("span"),m()(function(){return[{block:"a11y-hidden"}]}),f()(function(){return BEM.I18N("ticker__text","notifications")})),r("ticker").elem("value")(l()("span"),i("format-value")(function(){return this._count>this._maxCount?this._maxCount:this._count}),u()(function(){return{title:this._count}}),f()(function(){return z("format-value")})),r("user-account").mod("has-accent-letter","yes").elem("name")(t(function(){return this.ctx.text&&!this.ctx.content}).content()(function(){var t=String(this.ctx.text);return[{elem:"accent-letter",tag:"span",content:{html:this.xmlEscape(t.charAt(0))}},{html:this.xmlEscape(t.slice(1))}]})),r("user2").elem("a11y-exit").replace()(function(){var t=this._exitUrl;return""!==this._params.passportLinkParams&&(t+="&"+this._params.passportLinkParams),{block:"link",mods:{theme:"pseudo"},mix:[{block:"user2",elem:"a11y-exit"},{block:"a11y-hidden"}],attrs:{accesskey:"x"},tabindex:"-1",url:t,content:BEM.I18N("user2","exit")}}),r("user2").elem("popup").replace()(function(){var t=this.extend({directions:["bottom-right"],mainOffset:-46,secondaryOffset:-2},this.ctx);return t.mods={target:"anchor",theme:"normal",autoclosable:"yes",hiding:"yes"},t.block="popup2",t.mix=[{block:"user2",elem:"popup",elemMods:t.elemMods}].concat(t.mix||[]),delete t.elem,t}),r("user2").elem("menu")(t(function(){return void 0!==this.ctx.hat}).mode("hat")(function(){var t=this.ctx.hat;return!t.banner&&(t.banner={}),t.banner.closeButtonMix={block:"user2",elem:"hat-closer"},{block:"user2",elem:"menu-hat",content:t}}),x()(function(){var t=function(e){return[].concat.apply([],e.map(function(e){return e.items?t(e.items):(e.block="user2",e.elem="menu-item",e.action&&(e.elemMods=this.extend(e.elemMods,{action:e.action})),e)},this))}.bind(this),e=this.ctx.actionsMenu||[],n=this.ctx.multiAuthMenu||[],r=[].concat(e,n);return{block:"menu",mix:[{block:"user2",elem:"menu",elemMods:this.ctx.elemMods}].concat(this.ctx.mix||[]),mods:this.extend({type:"navigation"},this.ctx.elemMods),attrs:this.ctx.attrs,content:this.ctx.content||[z("hat"),{block:"user2",elem:"menu-header",content:{block:"user-account",mods:{provider:this.ctx.provider},mix:{block:"user2",elem:"account"},plus:this.ctx.plus,name:this._params.name,maxLength:this._params.maxLength,subname:this._params.subname,pic:{avatarId:this._params.avatarId},avatarHost:this._params.avatarHost}},{block:"menu",elem:"group",content:t(r)},{block:"user2",elem:"multi-auth",addAccount:this.ctx.addAccount,accounts:this.ctx.accounts,avatarHost:this.ctx.avatarHost,maxLength:this.ctx.maxLength,provider:this.ctx.provider},{block:"user2",elem:"menu-footer",settingsUrl:this.ctx.settingsUrl,helpUrl:this.ctx.helpUrl}]}})),r("user2").elem("menu-footer").content()(function(){return[{block:"button2",mods:{theme:"clear",size:"s",type:"link"},mix:{block:this.block,elem:"footer-link"},url:this.ctx.settingsUrl||this["i-services"].serviceUrl("tune"),text:BEM.I18N("user2","settings")},{block:"button2",mods:{theme:"clear",size:"s",type:"link"},mix:{block:this.block,elem:"footer-link"},url:this.ctx.helpUrl||this["i-services"].serviceUrl("support"),text:BEM.I18N("user2","help")}]}),r("user2").elem("multi-auth").content()(function(){return this.ctx.content||[{elem:"accounts",addAccount:this.ctx.addAccount,accounts:this.ctx.accounts,avatarHost:this.ctx.avatarHost,maxLength:this.ctx.maxLength,provider:this.ctx.provider},this.ctx.menu&&this.ctx.menu.length?{block:"menu",elem:"group",content:this.ctx.menu}:""]}),r("menu")(i("tabindex")(void 0),c()(function(){var t=this.ctx,e=void 0!==t.tabindex?t.tabindex:z("tabindex");return t.val=void 0!==t.val?[].concat(t.val):[],void 0===this.mods.view&&(this.mods.view="classic"),-1!==["radio","radiocheck"].indexOf(this.mods.type)&&(t.val=t.val.slice(0,1)),M({_tabindex:e})}),d()(function(){return{_tabindex:null!==this._tabindex&&this.mods.disabled?this._tabindex:void 0}}),u()(function(){return{tabindex:this.mods.disabled?void 0:null===this._tabindex?void 0:this._tabindex,"aria-disabled":!!this.mods.disabled&&"true"}}),t(function(){return!this.ctx.content}).content()(function(){return(this.ctx.items||[]).map(function t(e){if(!1!==e&&null!==e&&void 0!==e)return this.isSimple(e)&&(e={text:e}),e.items?(e.elem="group",e.content||(e.content=e.items.map(t,this))):(e.elem="item",-1!==["check","radio","radiocheck"].indexOf(this.mods.type)?e.elemMods=this.extend({type:"option",checked:-1!==this.ctx.val.indexOf(e.val)?"yes":void 0},e.elemMods):"navigation"===this.mods.type&&(e.elemMods=this.extend({type:"link"},e.elemMods))),e},this)})),r("menu").elem("item")(t(function(){return this._inMenuTypeNavigation}).wrap()(function(){return{elem:"list-item",content:this.ctx}}),d()(function(){return{val:this.ctx.val}}),u()(function(){return{title:this.ctx.title,"aria-disabled":!!this.elemMods.disabled&&"true","aria-selected":!!this.elemMods.checked&&"true"}}),t(function(){return!this.ctx.content}).content()(function(){return[this.ctx.icon&&{elem:"icon",icon:this.ctx.icon},void 0!==this.ctx.text&&{elem:"text",content:{html:this.isSimple(this.ctx.text)?this.xmlEscape(this.ctx.text):this.reapply(this.ctx.text)}}].filter(Boolean)})),r("menu").elem("list-item").tag()("li"),r("menu").elem("group")(t(function(){return this._inMenuTypeNavigation}).tag()("ul"),u()(function(){return{role:"group"}}),t(function(){return this.ctx.title})(u()(function(){return this.extend(M(),{"aria-labelledby":this.generateId()})}),f()(function(){var t=this.ctx.title;return[{elem:"title",attrs:{id:this.generateId(),"aria-hidden":"true"},content:{html:this.isSimple(t)?this.xmlEscape(t):this.reapply(t)}},M()]}))),r("menu").mod("type","navigation")(l()("ul"),c()(function(){return M({_inMenuTypeNavigation:!0})})),r("menu").elem("item").elemMod("type","link")(l()("a"),u()(function(){return this.extend(M(),{role:"link",href:this.ctx.url,target:this.ctx.target})})),r("spin2")(c()(function(){return void 0===this.mods.view&&(this.mods.view="default"),void 0===this.mods.tone&&(this.mods.tone="default"),M()})),r("user2").elem("menu-item").replace()(function(){var t=this.extend(this.ctx,{block:"menu",elem:"item"});return t.mix=[{block:"user2",elem:"menu-item",elemMods:{action:this.elemMods.action}}].concat(this.ctx.mix||[]),delete this.elemMods.action,t.elemMods=this.extend({type:"link"},this.elemMods),t.attrs=this.extend(t.attrs||{},{tabindex:0}),t.content=this.ctx.content,t}),r("menu").elem("text").tag()("span"),r("user2").elem("menu-item").elemMod("action","disk").def()(function(){return this.ctx.text=BEM.I18N("user2","upload_files"),this.ctx.url=this["i-services"].serviceUrl("disk")+"?source=main-loginmenu",M()}),r("user2").elem("menu-item").elemMod("action","edit-accounts").def()(function(){return this.ctx.text=BEM.I18N("user2","edit-accounts"),this.ctx.url=this._params.passportHost+"/auth?mode=edit&retpath="+this._params.retpathEncoded,""!==this._params.passportLinkParams&&(this.ctx.url+="&"+this._params.passportLinkParams),M()}),r("user2").elem("menu-item").elemMod("action","exit").def()(function(){return this.ctx.text=BEM.I18N("user2","exit"),this.ctx.url=this._exitUrl,""!==this._params.passportLinkParams&&(this.ctx.url+="&"+this._params.passportLinkParams),M()}),r("user2").elem("menu-item").elemMod("action","mail-compose").def()(function(){return this.ctx.text=BEM.I18N("user2","mail_compose"),this.ctx.url=this["i-services"].serviceUrl("mail")+"/compose",M()}),r("user2").elem("menu-counter")(c()(function(){return M({params:{maxCount:this.ctx.maxCount||9999}})}),l()("span"),u()({role:"alert"}),t(function(){return 0===this.ctx.count}).mix()([{elemMods:{state:"empty"}}]),f()(function(){return this.ctx.count>this.params.maxCount?this.params.maxCount:this.ctx.count})),r("user2").elem("menu-item").elemMod("action","mail").def()(function(){return this.ctx.url=this["i-services"].serviceUrl("mail"),this.ctx.text=[this["i-services"].serviceName("mail"),{block:"user2",elem:"menu-counter",count:this._unreadCount}],M()}),r("user2").elem("menu-item").elemMod("action","passport").def()(function(){return this.ctx.text=BEM.I18N("user2","passport"),this.ctx.url=this._params.passportHost,""!==this._params.passportLinkParams&&(this.ctx.url+="?"+this._params.passportLinkParams),M()}),r("user2").elem("menu-item").elemMod("action","settings").def()(function(){return this.ctx.text=BEM.I18N("user2","settings"),this.ctx.url=this["i-services"].serviceUrl("tune"),M()}),r("user2").elem("menu-item").elemMod("action","plus").def()(function(){var t=this.ctx.plus,e="string"==typeof this.ctx.plusLinkParams?this.ctx.plusLinkParams:"";return this.ctx.url=this["i-services"].serviceUrl("plus")+e,t&&(this.ctx.url=this["i-services"].serviceUrl("passport")+"/profile/services",""!==this._params.passportLinkParams&&(this.ctx.url+="?"+this._params.passportLinkParams)),this.ctx.content=[{block:"menu",elem:"text",content:BEM.I18N("user2",t?"ya_plus_on":"ya_plus")}],M()}),r("user2").elem("plus-badge")(l()("span")),r("user-account").mod("has-logout","yes").content()(function(){return[{block:"icon",mods:{glyph:"x-sign",size:"xs"},mix:{block:"user-account",elem:"logout"}},M()]}),r("icon").match(function(){return void 0!==this.mods.glyph}).def()(function(){return this.mods["has-glyph"]="yes",M()}),r("icon").mod("glyph","x-sign").content()(function(){return{html:'<svg focusable="false" width="0" height="0" viewBox="0 0 20 20"><path d="M10,20 C4.5,20 0,15.5 0,10 C0,4.5 4.5,0 10,0 C15.5,0 20,4.5 20,10 C20,15.5 15.5,20 10,20 L10,20 L10,20 L10,20 Z M15,6.4 L13.6,5 L10,8.6 L6.4,5 L5,6.4 L8.6,10 L5,13.6 L6.4,15 L10,11.4 L13.6,15 L15,13.6 L11.4,10 L15,6.4 L15,6.4 L15,6.4 L15,6.4 Z"/></svg>'}}),r("user2").elem("accounts").match(function(){return void 0===this.ctx.content}).content()(function(){return[{elem:"accounts-container",content:[].concat(this.ctx.accounts).map(function(t){return{block:"menu",elem:"item",content:this.extend({mods:{provider:this.ctx.provider},avatarHost:this.ctx.avatarHost,maxLength:this._params.maxLength},t)}},this)},{block:"user2",elem:"add-account",account:this.ctx.addAccount}]}),r("user2").elem("add-account").replace()(function(){var t=this._params.passportHost+"/auth?mode=add-user&retpath="+this._params.retpathEncoded;""!==this._params.passportLinkParams&&(t+="&"+this._params.passportLinkParams);var e=this.util.mergeBemjson({block:"user-account",name:BEM.I18N("user2","add-account"),url:t,mix:{block:"user2",elem:"add-account"}},this.ctx.account);return e.content=void 0!==e.content?e.content:[{elem:"pic"},{elem:"name",text:e.name}],{block:"menu",elem:"item",content:e}}),r("user")(c()(function(){var t=(this.ctx.js||{}).uid||this.ctx.uid||this["i-global"].uid,e=this.ctx.login,n=e||this["i-global"].login||(this["i-global"].displayName||{}).name;return M({_uid:t,_login:e,_hasDisplayName:n})}),l()("a"),d()(function(){return this.extend({uid:this._uid,login:this._login||this["i-global"].login},M())}),u()(function(){var t=this["i-global"],e=this._login||t.login,n={href:e&&/^uid-/.test(e)?t["social-host"]:t["passport-host"]+"/passport?mode=passport"},r=this.ctx.counter||(this.ctx.counters||{}).user;return r&&(n.onmousedown=r),n}),f()(function(){return this._hasDisplayName?[this.ctx.content]:{elem:"enter"}})),r("user")(d()(function(){return this.extend(M()||{},{avatarHost:this["i-global"].avatarsMds})})),g(function(t){t.BEMContext.prototype.cleverSubstring=function(t,e,n){return t.length>e+n?t.substring(0,e-1)+"…":t}}),r("user").elem("name")(l()("span"),c()(function(){var t=this.ctx,e=this["i-global"],n=t.content||t.login||this._login||(e.displayName||{}).name,r=!1;return n||(/^uid-/.test(e.login)?(n="",r=!0):n=e.login),M({_maxLength:void 0!==t.maxLength?t.maxLength:16,_maxLengthRelative:void 0!==t.maxLengthRelative?t.maxLengthRelative:3,_userName:n,_isUglyUserName:t.isUglyUserName||r})}),i("pre-content")(function(){var t=this.ctx;return[{elem:"first-letter",tag:"span",content:{html:this.xmlEscape(t.charAt(0))}},{html:this.xmlEscape(t.slice(1))}]}),f()(function(){return z("pre-content",{ctx:this.cleverSubstring(this._userName,this._maxLength,this._maxLengthRelative)})}),d()(function(){return{maxLength:this._maxLength,maxLengthRelative:this._maxLengthRelative,isUglyUserName:this._isUglyUserName}})),r("user2")(t(function(){return this.ctx.maxLength}).js()(function(){return this.extend(M(),{maxLength:this.ctx.maxLength})}),t(function(){return this._user2Mods["fetch-accounts"]}).elem("accounts").content()(function(){return[{block:"spin2",mods:{size:"xs"},mix:{block:"user2",elem:"accounts-spin"}},M()]})),r("user-account").match(function(){return void 0!==this.ctx.subname}).def()(function(){return this.mods["has-subname"]="yes",M()}),r("user-account").mod("has-subname","yes").elem("name").content()(function(){var t="object"===_typeof(this.ctx.subname)?{fb:"Facebook",tw:"Twitter",mr:"Mail.ru",gg:"Google",ok:"Odnoklassniki",vk:"Vkontakte",dz:"Deezer",fs:"Foursquare",ig:"Instagram",lf:"Last.FM",lj:"LiveJournal",in:"LinkedIn",mt:"МТС-Россия",ms:"Microsoft",yh:"Yahoo",ya:"Yandex",vf:"Vodafone-Украина",tg:"Telegram"}[this.ctx.subname.provider]:this.ctx.subname;return t&&t!==this.ctx.text?[M(),{elem:"subname",text:t}]:M()}),r("user-account").elem("subname")(l()("span"),f().match(function(){return void 0===this.ctx.content&&this.ctx.text})(function(){return{html:this.xmlEscape(this.ctx.text)}})),g(function(t){var e=void 0,n=void 0;t.BEMContext.prototype.safeContentHtml=function(t){if(!this["i-global"].safeHtmlContent)return t;if(!e){var n=this["i-global"].safeHtmlOptions,r=this.require("xss").FilterXSS;e=new r(n)}return e.process(t)},t.BEMContext.prototype.safeContentFormatted=function(t){var e=this;if(!n){var r=this["i-global"].safeHtmlContent;n=_extends({gfm:!0,tables:!0,breaks:!0},r&&{sanitize:!0,sanitizer:function(t){return e.safeContentHtml(t)}})}return this.require("marked")(t,n)}}),r("safe-content")(t(function(t){return t.ctx.formatted}).content()(function(){return{html:this.safeContentFormatted(this.ctx.content)}}),t(function(t){return!t.ctx.formatted}).replace()(function(){return{html:this.safeContentHtml(this.ctx.content)}})),r("b-page")(s("root")(p()(!1),l()("html"),u()(function(){return{lang:this["i-global"].lang||"ru"}}),h()("i-ua_js_no i-ua_css_standard")),i("js-params")(function(){var t=this["i-global"],e={},n={block:"i-global",js:e};return Object.keys(t).forEach(function(n){t.isPublic(n)&&(e[n]=t[n])}),n}),i("doctype")(function(){return this.ctx.doctype||"<!DOCTYPE html>"}),n()(function(){var t=this.ctx;return[{html:z("doctype")},{elem:"root",content:[{elem:"head",content:[t.csp&&this.extend(t.csp,{elem:"csp"}),!1!==t.title&&{tag:"meta",attrs:{charset:t.charset||"utf-8"}},!1!==t["x-ua-compatible"]&&z("xUACompatible"),void 0!==t.title&&{tag:"title",content:t.title},t.favicon&&{elem:"favicon",url:t.favicon},z("defaultMeta"),t.meta,{block:"i-ua",nonce:t.nonce},t.head]},t]}]}),l()("body"),s("head")(p()(!1),l()("head")),s("meta")(p()(!1),l()("meta"),u()(function(){return this.ctx.attrs})),s("favicon").replace()(function(){return{elem:"link",rel:"shortcut icon",url:this.ctx.url}}),f()(function(){return{elem:"body",content:this.ctx.content}}),s("body").tag()(""),m()(function(){return[].concat(M(),[{elem:"body"},z("js-params"),{block:"i-ua",js:!0}])})),r("b-page")(i("xUACompatible")(function(){return{tag:"meta",attrs:{"http-equiv":"X-UA-Compatible",content:this.ctx["x-ua-compatible"]||"IE=edge"}}})),r("b-page")(d()(!0),c()(function(){return M({_isPreview:this.ctx.isPreview})})),r("b-page").elem("js")(p()(!1),l()("script"),u()(function(){return{src:this.ctx.url,nonce:this.ctx.content?this.ctx.nonce||this["i-global"].nonce:null}})),r("b-page").elem("css")(c()(function(){return M()}),p()(!1),l()("style"),u()(function(){return{nonce:this.ctx.nonce||this["i-global"].nonce}}),x().match(function(){return void 0!==this.ctx.ie})(t(function(){return!0===this.ctx.ie})(function(){var t=this.ctx.url;return{elem:"cc",condition:"IE 9",content:{elem:"css",url:t?/\.css$/.test(t)?t:t+".ie9.css":void 0,content:this.ctx.content}}}),t(function(){return!1===this.ctx.ie})(function(){return{elem:"cc",condition:"gt IE 9",others:!0,content:{elem:"css",url:this.ctx.url,content:this.ctx.content}}}),t(function(){return"string"==typeof this.ctx.ie})(function(){return{elem:"cc",condition:this.ctx.ie,others:this.ctx.ie.indexOf("!")>-1,content:{elem:"css",url:this.ctx.url,content:this.ctx.content}}})),t(function(){return this.ctx.url})(l()("link"),u()(function(){return{rel:"stylesheet",href:this.ctx.url}}))),r("b-page").elem("css")(t(function(){return!0===this.ctx.ie}).replace()(function(){var t=this.ctx.url;return[{elem:"cc",condition:"IE 8",content:{elem:"css",url:t?/\.css$/.test(t)?t:t+".ie8.css":void 0,content:this.ctx.content}},{html:M()}]})),r("b-page").elem("cc")(l()(!1),f()(function(){var t=this.ctx.others,e=this.ctx.condition.indexOf("!")>-1;return[{html:["\x3c!--[if "+this.ctx.condition+"]>",t?"<!":"",e||t?"--\x3e":""].join("")},this.ctx.content,{html:[e||t?"\x3c!--":"","<![endif]--\x3e"].join("")}]})),r("b-page").elem("link")(p()(!1),l()("link"),u()(function(){return{rel:this.ctx.rel,type:this.ctx.type,href:this.ctx.url,sizes:this.ctx.sizes,title:this.ctx.title}})),r("b-page").elem("root")(t()(function(){return Boolean(this._isPreview)}).cls()("b-page__preview-html")),r("b-page").elem("icon-set")(x()(function(){var t=this.ctx.data,e=t.staticPath,n=t.faviconDir;return[{elem:"favicon",url:e+"/public/i/icons/"+n+"/favicon-16.png",sizes:"16x16"},{elem:"favicon",url:e+"/public/i/icons/"+n+"/favicon-32.png",sizes:"32x32"},{elem:"favicon",url:e+"/public/i/icons/"+n+"/favicon-64.png",sizes:"64x64"},{tag:"link",attrs:{rel:"mask-icon",href:e+"/public/i/icons/favicon.svg",color:"#338EF5"}}]})),r("b-page").elem("favicon")(l()("link"),p()(!1),u()(function(){return{rel:"icon",href:this.ctx.url,sizes:this.ctx.sizes}})),r("b-page").elem("js-dataurl")(p()(!1),l()("script"),u()(function(){return{src:this.ctx.url,nonce:this.ctx.nonce||this["i-global"].nonce}})),r("survey")(l()("form"),u()({method:"POST",action:"",novalidate:"",enctype:"multipart/form-data"}),f()(function(){return[{tag:"input",attrs:{type:"hidden",name:"sk",value:this["i-global"].secretkey}},{tag:"input",attrs:{type:"hidden",name:"visitId",value:this["i-global"].visitId}},{elem:"section",content:[{block:"survey-validation",elem:"message",elemMods:{role:"main"},mix:[{block:"survey",elem:"line",elemMods:{type:"main-message"}}],content:BEM.I18N("survey","error-text")},this.ctx.content]},{elem:"submit-button",userTexts:this.ctx.userTexts}]})),r("survey").mod("preview","yes").tag()("div"),r("custom-styles")(f()(function(){return[this.ctx.stylesCss&&{block:"b-page",elem:"css",content:this.ctx.stylesCss,attrs:{id:"template-styles"}}]})),r("custom-styles")(f()(function(){return[].concat(_toConsumableArray(M()),[{block:"b-page",elem:"js",url:this.ctx.staticPath+"/public/less/less.min.js"}])})),r("survey").elem("control").tag()("td"),r("survey").elem("label").content()(function(){var t=this.ctx.content,e={tag:"label",attrs:{for:this.ctx.for},content:["string"==typeof t?{block:"safe-content",formatted:!0,content:t}:t]};return this.ctx.hint&&e.content.push({elem:"hint",content:this.ctx.hint}),e}),r("survey").elem("label").tag()("td"),r("survey").elem("required").tag()("td"),r("survey").elem("required-star")(l()("span"),f()("*")),r("survey").elem("group")(l()("fieldset"),f()(function(){var t=this.ctx.fields,e=this.ctx.extraSurveyData;return t.map(function(t){return{block:this.block,elem:"question",field:t,extraSurveyData:e}})})),r("survey").elem("line-inner")(l()("table"),f()(function(){return{tag:"tr",content:this.ctx.content}}),o("long","yes").content()(function(){var t=this.ctx.content[1].content,e=this.ctx.labelImage;return t?e?[{tag:"tr",content:[this.ctx.content[0],this.ctx.content[1]]},{tag:"tr",content:[{elem:"required"},{elem:"image",data:e}]},{tag:"tr",content:[{elem:"required"},this.ctx.content[2]]}]:[{tag:"tr",content:[this.ctx.content[0],this.ctx.content[1]]},{tag:"tr",content:[{elem:"required"},this.ctx.content[2]]}]:e?[{tag:"tr",content:[this.ctx.content[0],{elem:"image",data:e}]},{tag:"tr",content:this.ctx.content[2]}]:{tag:"tr",content:[this.ctx.content[0],this.ctx.content[2]]}})),r("survey").elem("submit-button").content()(function(){return[{block:"button",mods:{theme:"action",size:"m",role:"prev"},content:{block:"safe-content",content:this.ctx.userTexts.prevButton}},{block:"button",mods:{theme:"action",size:"m",role:"next"},content:{block:"safe-content",content:this.ctx.userTexts.nextButton}},{block:"button",mods:{theme:"action",size:"m",role:"submit"},attrs:{title:{block:"safe-content",content:this.ctx.userTexts.submitButton}},type:"button",content:{block:"safe-content",content:this.ctx.userTexts.submitButton}}]}),r("survey").elem("line").content()(function(){var t={elem:"line-inner",elemMods:{long:"yes"===this.elemMods.long||this.ctx.labelImage?"yes":"",image:this.ctx.labelImage?"yes":""},labelImage:this.ctx.labelImage,content:this.ctx.content};return t.content instanceof Array&&t.content.unshift({elem:"required",content:{elem:"required-star"}}),t}),r("survey").elem("hint")(l()("span"),f()(function(){var t=this.ctx.content;return t?"string"==typeof t?{block:"safe-content",formatted:!0,content:t}:t:null})),r("survey").elem("captcha")(d()(function(){return{captchaType:this.ctx.captchaType}}),f()(function(){var t=this.ctx.tags[0]||"",e=this.ctx.tags[1]||"",n="std"===this.ctx.captchaType?{type:"number"}:{};return[{tag:"input",attrs:t.attrs},{block:"input",js:{},mods:{size:"m"},content:[{elem:"control",controlAttrs:this.extend(e.attrs,n)}]},{elem:"captcha-img",src:t.attrs["data-captcha-image-url"]},{elem:"captcha-updater",content:BEM.I18N("survey","captcha-updater")}]})),r("survey").elem("captcha-updater").content()(function(){return{block:"link",mods:{theme:"pseudo",pseudo:"yes",inner:"yes"},content:[{block:"icon",mods:{type:"updater"},mix:[{block:"survey",elem:"captcha-updater-ico"}]},{elem:"inner",content:BEM.I18N("survey","captcha-updater")}]}}),r("survey").elem("captcha-img")(l()("img"),u()(function(){return{src:this.ctx.src}})),r("survey").elem("question")(m()(function(){var t=this.ctx.field,e=this.ctx.extraSurveyData||{},n=e.query,r=t.name,s=t.group_slug,i=t.is_hidden||"",a=t.is_required||"",o=t.value||[],c=n[r],l=z("getShowConditions"),u=z("getFieldFiltersForField",{_field:t}),h=z("getWidget"),d=[{block:"survey-question",mods:{name:r,required:a?"yes":"",hidden:i?"yes":"","hidden-by-default":i?"yes":"",widget:h},js:{showConditions:l||"",name:r,groupSlug:s,defaultFromQuery:c||"",savedValue:o,fieldFilters:u.length?u:"",isMultiple:t.is_allow_multiple_choice,extraSurveyData:e,isHidden:i}}];switch(h){case"tickets":d.push({block:"payment-question",js:!0})}return d}),f()(function(){var t=this.ctx.field,e=this.ctx.extraSurveyData||{},n=t.name,r=void 0,s={},i=e.language||"",a=e.regionId||"",o=e.questionGroups,c=z("getBuilders"),l=z("getWidget");switch(l){case"input":case"autocomplete-selection":s.language=i,s.regionId=a;break;case"questions-group":s.groupFields=o[t.name]}return c.hasOwnProperty(l)&&(r=c[l](t,n,s,e)),r}),i("getBuilders")(function(){var t=this.ctx.field.type||"";return z(t?"questionBEMJSONBuildersNew":"questionBEMJSONBuilders")}),i("getWidget")(function(){var t=void 0,e=this.ctx.field;if(e.type||"")t=e.widget||"",e.data_source&&e.data_source.items?"list"===t&&!0===e.is_allow_multiple_choice?t="checkbox-list":"list"===t&&!1===e.is_allow_multiple_choice?t="radio-list":"select"===t?t="select":"matrix"===t&&(t="scale"):t="autocomplete-selection";else if(t="GroupWidget"===e.widget?"questions-group":"PaymentWidget"===e.widget?"payment":e.other_data&&e.other_data.widget||"","DateInput"!==e.widget&&"DateRangeFieldInput"!==e.widget||(t="date-widget"),!t||"radio_or_checkbox_list"===t){var n=e.tags&&e.tags[0]||"",r=n.tag||"",s=n.attrs&&n.attrs.type||"";r&&(t="checkbox"===s||"radio"===s?s+"-list":r)}return t}),i("getShowConditions")(function(){var t=this.ctx.field;return t.type||""?t.show_conditions||"":t.other_data&&t.other_data.show_conditions||""}),i("inputPopupParams")(function(){return{directions:this["i-global"].isRtl?"bottom-right":"bottom-left"}}),i("inputPopupMix")(function(){return[{block:"popup",mods:{autosize:"yes"}}]}),i("selectPopupParams")(function(){var t=this["i-global"].isRtl?"right":"left";return{directions:[{to:"bottom",axis:t,offset:{top:8}},{to:"top",axis:t,offset:{bottom:8}}]}}),i("buildSelectBEMJSON")(function(){var t=this._tag,e=this._params||{},n=this._js,r=t.options||[],s=t.attrs||{},i=s.name||"",a=s.id||"",o=e.width,c=r[0]&&r[0].content;return{block:"select",mods:{size:"m",theme:"normal",width:o,suggest:e.suggest?"yes":"",disabled:!r.length,to:"bottom"},js:_extends({popupParams:z("selectPopupParams"),popupMods:{autosize:"yes"}},n),name:i,id:a,content:[{block:"button",mods:{theme:"normal"},content:c||" "},e.suggest?{block:"input",mods:{size:"m",clear:"no"},mix:{block:"select",elem:"suggest"},value:c,content:[{elem:"hint",content:BEM.I18N("survey","choose")},{elem:"control"}]}:"",{elem:"control",content:r.map(function(t){return{elem:"option",attrs:t.attrs||{},content:{block:"safe-content",content:t.content}}})}]}}),i("buildInputTextBEMJSON")(function(){var t=this._tag,e=this._hints||[],n=t.attrs||{},r=n.type||"",s="hidden"===r,i=/^id_answer_phone_/.test(n.id);return(i||"number"===r)&&(n.dir="ltr"),i?z("buildPhoneBEMJSON",{_tag:t}):"number"===r?z("buildNumberBEMJSON",{_tag:t}):{block:"input",js:{},mods:{theme:"normal",size:"m",hidden:s?"yes":void 0},mix:[],content:[{elem:"control",controlAttrs:n},e.length?{elem:"samples",content:e.map(function(t,n){return[{block:"link",mods:{theme:"pseudo",pseudo:"yes"},mix:[{block:"input",elem:"sample"}],content:t},n!==e.length-1?", ":""]})}:""]}}),i("buildTextareaBEMJSON")(function(){var t=this._tag,e=z("buildInputTextBEMJSON",{_tag:t});return e.mods.type="textarea",e.value=t.content,e}),i("buildNumberBEMJSON")(function(){var t=this._tag.attrs||{};return t.pattern="[0-9]*",{block:"textinput",js:{},mods:{type:"number",theme:"normal",size:"m","has-clear":"yes"},mix:[],controlAttrs:t}}),i("buildPhoneBEMJSON")(function(){var t=this._tag.attrs||{};return{block:"input",js:{},mods:{theme:"normal",size:"m"},mix:[],content:{elem:"control",controlAttrs:_extends({},t,{type:"tel"})}}}),i("buildCheckboxBEMJSON")(function(){var t=this._tag,e=this._label||t.label,n=this._hint,r=this._size||"m",s=this._mods;return{block:"checkbox",mods:_extends({theme:"normal",size:r},s),mix:[],checkboxAttrs:t.attrs,text:{elem:"label",content:[{block:"safe-content",formatted:!0,content:e},n?{block:"survey",elem:"hint",mix:[{block:"i-font",mods:{face:"textbook"}}],content:n}:""],attrs:{title:t.attrs&&t.attrs.title}}}}),i("questionBEMJSONBuildersNew")(function(){return{"checkbox-list":function(t,e){var n=t.label||"",r=t.help_text||"",s=t.data_source&&t.data_source.items||[],i=(t.value||[]).map(function(t){return t.id}),a=t.errors||"",o=[],c=[],l=s.some(function(t){return t.label_image});return o.push(s.map(function(t){var n={},r=t.text||"",s=t.id||"",a=[];n.label=r,n.attrs={value:s,name:e,title:l&&r||""},-1!==i.indexOf(s)&&(n.attrs.checked=!0);var o=z("buildCheckboxBEMJSON",{_tag:n,_size:l?"s":"m",_mods:{slug:t.slug}});return o.mix.push({block:"survey",elem:"control-control"}),o.mix.push({block:"survey",elem:"checkbox"}),l&&a.push({elem:"answer-image",data:t.label_image}),a.push(o),l?{tag:"label",elem:"checkbox-list",mix:{block:"survey",elem:"answer-image-container"},content:a}:{elem:"checkbox-list",content:a}})),o.push(z("buildErrorsBEMJSON",{_errors:a})),o.push(z("buildClientMessageBEMJSON",{_messageKey:"choose-options",_validatorType:"required"})),o.push(z("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})),l?c.push({block:"survey",elem:"checkbox-list-wrap",elemMods:{"answer-image":l?"yes":""},content:o}):c.push(o),{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:n,hint:r},{elem:"control",content:c}]}},"radio-list":function(t,e){var n=t.label||"",r=t.help_text||"",s=t.data_source&&t.data_source.items||[],i=t.value||[],a=t.errors||"",o=[],c=[],l={},u=void 0,h=s.some(function(t){return t.label_image});return s.forEach(function(t){var e=t.text||"",n=[];i.forEach(function(t){u=t.id}),n.push({block:"radiobox",elem:"radio",elemMods:{slug:t.slug},content:{block:"safe-content",formatted:!0,content:e},controlAttrs:{value:t.id||""},attrs:{title:h&&e||""}}),t.slug&&(l[t.slug]=t.id),h?c.push({block:"survey",elem:"answer-image-container",tag:"label",content:[{block:"survey",elem:"answer-image",data:t.label_image},n]}):c.push(n)}),o.push({block:"radiobox",js:{slugMap:l},mods:{theme:"normal",size:h?"s":"m"},mix:[{block:"survey",elem:"radiobox",elemMods:{"answer-image":h?"yes":""}}],name:e,content:c,value:u}),o.push(z("buildErrorsBEMJSON",{_errors:a})),o.push(z("buildClientMessageBEMJSON",{_messageKey:"choose-options",_validatorType:"required"})),o.push(z("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})),{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:n,hint:r},{elem:"control",content:o}]}},select:function(t,e){var n=t.label||"",r=t.help_text||"",s=t.data_source&&t.data_source.items||[],i=t.value&&t.value[0]||"",a=t.suggest_choices,o=t.errors||"",c={attrs:{},options:[]},l={},u=void 0,h=t.is_disabled_init_item||!1;return c.attrs.name=e,s.forEach(function(t){var e={content:"",attrs:{}};e.content=t.text,e.attrs.value=t.id,i&&i.id===t.id&&(e.attrs.selected=!0),c.options.push(e),t.slug&&(l[t.slug]=t.id)}),h&&(u={content:"--",attrs:{selected:!0,value:""}},t.is_required&&(u.attrs.disabled=!0),c.options.unshift(u)),{elem:"line",labelImage:t.label_image,content:[{elem:"label",content:n},{elem:"control",content:[z("buildSelectBEMJSON",{_tag:c,_params:{width:300,suggest:a},_js:{slugMap:l}}),{elem:"hint",content:r},z("buildErrorsBEMJSON",{_errors:o}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"}),z("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})]}]}},"autocomplete-selection":function(t,e){var n,r,s=t.label||"",i=t.help_text||"",a=t.errors||"",o=t.is_allow_multiple_choice,c=t.value&&t.value[0]||{},l=t.__suggest_url?t.__suggest_url:"";return{elem:"line",labelImage:t.label_image,content:[{elem:"label",for:e,content:s,hint:i},{elem:"control",content:(n={block:"survey-question",elem:"data",mods:{},content:[]},r=z("buildInputTextBEMJSON",{_tag:{attrs:{type:"text",id:e,value:o?"":c.text}}}),r.mix=[].concat(r.mix,{block:"survey-question",elem:"control"}),l&&(r.mods.suggest="yes",r.js.doEmptyRequests=l.includes("yt-table-source"),r.js.dataprovider={url:l},r.js.popupParams=z("inputPopupParams"),r.js.popupMixs=z("inputPopupMix"),o&&(n.mods.multiple="yes")),[r,n,z("buildErrorsBEMJSON",{_errors:a}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"}),z("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})])}]}},scale:function(t,e){var n=t.label||"",r=t.help_text||"",s=t.data_source&&t.data_source.items||[],i=t.errors||"",a=function(t){return s.filter(function(e){return e.type&&e.type===t})},o=function(t){return t.sort(function(t,e){return t.position>e.position?1:-1})},c=o(a("column")),l=o(a("row")),u=t.value||"",h={};u&&u.forEach(function(t){var e=t.id.split("_")[0];h[e]=t.id});var d={block:"scale",content:l.map(function(t){var n=[];return c.forEach(function(e){var r=[t.id,e.id].join("_");n.push({elem:"radio",mix:[{block:"scale",elem:"cell"}],content:{block:"scale",elem:"cell-text",content:{block:"safe-content",formatted:!0,content:e.text}},controlAttrs:{value:r}})}),{elem:"row",mix:[{block:"scale-question",js:!0}],content:[{elem:"title",content:{block:"safe-content",formatted:!0,content:t.text}},{elem:"answer",mix:[{block:"scale-question",elem:"answer"}],attrs:{name:e,value:h[t.id],checked:Boolean(h[t.id])}},{block:"radiobox",mods:{theme:"normal",size:"s",id:t.id},name:[e,t.id].join("_question_"),mix:[{block:"scale-question",elem:"value"}],content:n,value:h[t.id]}]}})};return{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:n,hint:r},{elem:"control",content:[d,z("buildErrorsBEMJSON",{_errors:i}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}}}}),i("questionBEMJSONBuilders")(function(){return{number:function(t){var e=t.label||"",n=t.tags||[],r=t.help_text||"",s=t.errors||"";return n.map(function(n){var i=n.attrs.id||"";return{elem:"line",labelImage:t.label_image,mix:[],content:[{elem:"label",for:i,content:e},{elem:"control",content:[z("buildInputTextBEMJSON",{_tag:n}),{elem:"hint",content:r},z("buildErrorsBEMJSON",{_errors:s}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"}),z("buildClientMessageBEMJSON",{_messageKey:"incorrect-number",_validatorType:"incorrectNumber"})]}]}})},tickets:function(t){var e=t.label||"",n=t.tags||[],r=t.help_text||"",s=t.errors||"";return n.map(function(n){var i=n.attrs.max&&parseInt(n.attrs.max,10)||1,a=n.attrs.min&&parseInt(n.attrs.min,10)||1,o=n.attrs.price&&parseInt(n.attrs.price,10)||0,c=n.attrs.name||"",l=n.attrs.id||"",u=n.attrs.currency&&n.attrs.currency.toLowerCase()||"rub",h={elem:"line",elemMods:{type:"price"},labelImage:t.label_image,content:[{elem:"label",content:BEM.I18N("survey","sum")},{elem:"control",mix:[{block:"payment-question",elem:"price"}],content:[{block:"price",mods:{currency:u},content:o},z("buildErrorsBEMJSON",{_errors:s}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]},d={};if(1===i)d=z("buildInputTextBEMJSON",{_tag:{attrs:{type:"hidden",name:c,id:l,value:a}}});else if(i<=5){for(var p=[],m=a;m<=i;m++)p.push({elem:"radio",controlAttrs:{value:m},content:m});d={elem:"line",mods:{"short-payment-control":"yes"},labelImage:t.label_image,mix:[],content:[{elem:"label",for:l,content:e,hint:r},{elem:"control",content:[{block:"radio-button",mods:{size:"m"},name:c,value:a,content:p}]}]}}else d={elem:"line",mix:[],labelImage:t.label_image,content:[{elem:"label",for:l,content:e,hint:r},{elem:"control",content:[z("buildInputTextBEMJSON",{_tag:n})]}]};return d.mix.push({block:"payment-question",elem:"control",js:{min:a,max:i,price:o}}),[d,h]})},agreement:function(t){var e=t.label||"",n=t.tags||[],r=t.errors||"";return n.map(function(t){return{elem:"line",elemMods:{type:"agreement"},content:[{elem:"control",content:[z("buildCheckboxBEMJSON",{_tag:t,_label:e}),z("buildErrorsBEMJSON",{_errors:r}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}})},checkbox:function(t){var e=t.label||"",n=t.tags||[],r=t.help_text||"",s=t.errors||"";return n.map(function(n){return{elem:"line",labelImage:t.label_image,elemMods:{type:"checkbox"},content:[{elem:"control",content:[z("buildCheckboxBEMJSON",{_tag:n,_label:e,_hint:r}),z("buildErrorsBEMJSON",{_errors:s}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}})},"checkbox-list":function(t){var e=t.label||"",n=t.help_text||"",r=t.tags||[],s=t.errors||"",i=[];return i.push(r.map(function(t){var e=z("buildCheckboxBEMJSON",{_tag:t});return e.mix.push({block:"survey",elem:"control-control"}),e.mix.push({block:"survey",elem:"checkbox"}),{elem:"checkbox-list",content:e}})),i.push(z("buildErrorsBEMJSON",{_errors:s})),i.push(z("buildClientMessageBEMJSON",{_messageKey:"choose-options",_validatorType:"required"})),i.push(z("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})),{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:e,hint:n},{elem:"control",content:i}]}},"radio-list":function(t,e){var n=t.label||"",r=t.help_text||"",s=t.tags||[],i=t.errors||"",a=[],o=void 0;return a.push({block:"radiobox",js:!0,mods:{theme:"normal",size:"m"},mix:[{block:"survey",elem:"radiobox"}],name:e,content:s.map(function(t){var e=t.label||"";return t.attrs.checked&&(o=t.attrs.value),{elem:"radio",content:e,controlAttrs:t.attrs||{}}}),value:o}),a.push(z("buildErrorsBEMJSON",{_errors:i})),a.push(z("buildClientMessageBEMJSON",{_messageKey:"choose-options",_validatorType:"required"})),{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:n,hint:r},{elem:"control",content:a}]}},date:function(t){var e=t.label||"",n=t.help_text||"",r=t.tags||[],s=t.errors||"";return{elem:"line",labelImage:t.label_image,content:[{elem:"label",content:e,hint:n},{elem:"control",content:[r.map(function(t){return z("buildSelectBEMJSON",{_tag:t})}),z("buildErrorsBEMJSON",{_errors:s}),z("buildClientMessageBEMJSON",{_messageKey:"incorrect-date",_validatorType:"required"})]}]}},"date-widget":function(t){var e=t.label||"",n=t.help_text||"",r=t.errors||"",s=t.other_data&&t.other_data.allowed_range||"",i={},a=[],o=[];t.tags.forEach(function(t){var e=t.attrs;a.push(e.value),o.push(e.name)}),i.min=s.from||"",i.max=s.to||"";var c={block:"DateInput"===t.widget?"date-input":"date-range-input",name:o,value:a,js:{limits:i}};return{elem:"line",labelImage:t.label_image,content:[{elem:"label",content:e,hint:n},{elem:"control",content:[c,z("buildErrorsBEMJSON",{_errors:r}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}},statement:function(t){var e=t.label||"",n=t.help_text||"";return{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:e,mix:t.other_data.is_section_header?[{elem:"title",elemMods:{type:"h3"}}]:[],hint:n}]}},file:function(t){var e=t.label||"",n=t.help_text||"",r=t.tags||[],s=t.errors||"",i=t.other_data&&t.other_data.already_uploaded_filename||"",a=t.other_data&&t.other_data.max_file_size||"";return{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:e,hint:n},{elem:"control",content:[{block:"attach",js:{alreadyUploaded:Boolean(i),maxFileSize:a},mods:{size:"m"},content:[{block:"button",mods:{theme:"normal",size:"m"},mix:[{block:"attach",elem:"button"}],name:r.length&&r[0].attrs.name,id:r.length&&r[0].attrs.id,content:{block:"i-bem",elem:"i18n",keyset:"attach",key:"button-text"}},{elem:"holder",content:{block:"i-bem",elem:"i18n",keyset:"attach",key:"no-file"}}]},i?{elem:"message",content:[{block:"safe-content",content:BEM.I18N("survey","attach-file-already-uploaded",{file:i})}]}:"",a?{elem:"message",content:[{block:"safe-content",content:BEM.I18N("survey","attach-file-max-file-size",{size:a})}]}:"",z("buildErrorsBEMJSON",{_errors:s}),z("buildClientMessageBEMJSON",{_messageKey:"attach-file",_validatorType:"required"}),z("buildClientMessageBEMJSON",{_messageKey:"file-too-large",_validatorType:"fileTooLarge"})]}]}},multifile:function(t){var e=t.label||"",n=t.help_text||"",r=t.errors||"",s=t.other_data&&t.other_data.already_uploaded_files||"",i=t.other_data&&t.other_data.max_file_size||"",a=t.other_data&&t.other_data.max_files_count||"";return{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:e,hint:n},{elem:"control",content:[{block:"file-upload",js:{files:s},maxFilesSize:i,maxFilesCount:a},z("buildErrorsBEMJSON",{_errors:r}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}},captcha:function(t){var e=t.label||"",n=t.tags||[],r=t.errors||"",s=(t.other_data||{}).captcha_type;return{elem:"line",elemMods:{long:"yes"},content:[{elem:"label",content:e,for:n[1].attrs.id},{elem:"control",content:[{elem:"captcha",tags:n,captchaType:s},z("buildErrorsBEMJSON",{_errors:r}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}},input:function(t,e,n,r){n=n||{};var s=t.label||"",i=t.help_text||"",a=t.tags||[],o=t.errors||"",c=n.language||"",l=n.regionId||"",u=t.hints,h=void 0,d=void 0,p=r.enableSamples;return u&&(Array.isArray(u.items)&&p?h=u.items.map(function(t){return t.text}):t.__suggest_url&&(d=t.__suggest_url)),a.map(function(e){var n;return e.attrs.dataprovider&&(d=e.attrs.dataprovider+"&http_accept_language="+c+"&http_x_geobase_id="+l),{elem:"line",labelImage:t.label_image,content:[{elem:"label",for:e.attrs.id,content:s},{elem:"control",content:(n=z("buildInputTextBEMJSON",{_tag:e,_hints:h}),d&&(n.mods.suggest="yes",n.js.doEmptyRequests=d.includes("yt-table-source"),n.js.dataprovider={url:d},n.js.popupParams=z("inputPopupParams"),n.js.popupMixs=z("inputPopupMix"),t.is_allow_multiple_choice&&(n.mods.multiple="yes")),[n,{elem:"hint",content:i},z("buildErrorsBEMJSON",{_errors:o}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})])}]}})},textarea:function(t){var e=t.label||"",n=t.help_text||"",r=t.tags||[],s=t.errors||"";return r.map(function(r){return{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",for:r.attrs.id,content:e,hint:n},{elem:"control",content:[z("buildTextareaBEMJSON",{_tag:r}),z("buildErrorsBEMJSON",{_errors:s}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"})]}]}})},select:function(t){var e=t.label||"",n=t.help_text||"",r=t.tags||[],s=t.errors||"";return r.map(function(r){return{elem:"line",labelImage:t.label_image,content:[{elem:"label",content:e},{elem:"control",content:[z("buildSelectBEMJSON",{_tag:r,_params:{width:300}}),{elem:"hint",content:n},z("buildErrorsBEMJSON",{_errors:s}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"}),z("buildClientMessageBEMJSON",{_messageKey:"no-options",_validatorType:"noOptions"})]}]}})},"questions-group":function(t,e,n,r){var s=t.label||"",i=[];return n.groupFields&&(Object.keys(n.groupFields).map(function(t){i.push({block:"survey-question",elem:"list",mix:{block:this.block,elem:"list"},fields:n.groupFields[t],extraSurveyData:r,copyNum:t,js:{copyNum:t,fields:n.groupFields[t]}})}),i.push({elem:"actions",content:[{block:"button2",mods:{size:"m",theme:"clear",type:"add-group",width:"auto"},mix:{block:"survey-question",elem:"add-questions-group"},content:[{elem:"text",content:[{block:"icon",mods:{type:"plus",size:"m"}},{elem:"text-inner",tag:"span",content:BEM.I18N("survey","add-more")+(s?" «"+s.toLowerCase()+"»":"")}]}]}]})),{elem:"line",elemMods:{long:"yes"},labelImage:t.label_image,content:[{elem:"label",content:s,mix:[{elem:"title",elemMods:{type:"group"}}]},{elem:"control",content:i}]}},payment:function(t){var e=t.label,n=void 0===e?"":e,r=t.help_text,s=void 0===r?"":r,i=t.errors,a=void 0===i?"":i,o=t.label_image,c=t.tags,l=void 0===c?[]:c,u=t.other_data,h=_slicedToArray(l,1)[0],d=u.is_fixed,p=u.max;return{elem:"line",labelImage:o,content:[{elem:"label",content:n},{elem:"control",content:[{block:"payment",mods:{fixed:d},defaultSettings:{amount:0,type:"PC"},types:["PC","AC","MC"],tagData:h,otherData:u},{elem:"hint",content:s},z("buildErrorsBEMJSON",{_errors:a}),z("buildClientMessageBEMJSON",{_messageKey:"empty-field",_validatorType:"required"}),z("buildClientMessageBEMJSON",{_messageKey:"incorrect-number",_validatorType:"isCorrectNumber"}),z("buildClientMessageBEMJSON",{_messageKey:"exceeded-max-amount",_validatorType:"checkMaxAmount",_keyParams:{max:p}})]}]}}}}),i("buildErrorsBEMJSON")(function(){return this._errors.map(function(t){return{block:"survey-validation",elem:"message",elemMods:{visibility:"visible"},content:{block:"safe-content",formatted:!1,content:t}}})}),i("buildClientMessageBEMJSON")(function(){var t=this._messageKey,e=this._validatorType,n=this._keyParams;return{block:"survey-validation",elem:"message",elemMods:{from:"client",type:e},content:BEM.I18N("survey",t,n)}}),i("getFieldFiltersForField")(function(){var t=this._field,e=t.data_source||"",n=t.hints||"",r=(e||n||{}).filters||[];return r=r.filter(function(t){return"field_value"===t.type})})),r("survey").elem("groups-by-header")(l()(null),f()(function(){return[z("groups-list")]}),i("groups-list")(function(){var t=this.ctx.fields,e=this.ctx.extraSurveyData,n=[],r=[];return t.forEach(function(t){var e=t.other_data&&t.other_data.widget||"",s=t.other_data&&t.other_data.is_section_header||"";"statement"===e&&s&&r.length&&(n.push(r),r=[]),r.push(t)}),n.push(r),n.map(function(t){return{block:this.block,elem:"group",fields:t,extraSurveyData:e}})})),r("survey").elem("image")(l()("td"),f()(function(){var t=this.ctx.data,e=t&&t.links||{};return{tag:"img",attrs:{src:e["720x"],srcset:e["1280x"]?e["1280x"]+" 2x":""},elem:"image-pic"}})),r("survey").elem("answer-image")(f().match(function(){return this.ctx.data})(function(){return{tag:"img",attrs:{src:(this.ctx.data.links||{})["324x180"]},elem:"answer-image-pic"}})),r("input")(l()("span"),i("live")(!1),i("getLive")(function(){var t=z("live"),e=this.ctx.js,n=this.mods,r={autofocus:"yes",width:"content","tap-ahead":"yes"};return e?(void 0!==e.live?Boolean(e.live):t)&&!e.autoFocus&&!Object.keys(r).some(function(t){return n[t]===r[t]}):t}),d()(function(){return{live:this._live}}),c()(function(){var t,e=z("value",{ctx:this.ctx.value}),n=this.ctx.id||this.generateId(),r=this.mods,s=z("getLive",{}),i=this.ctx.placeholder;return r.theme=r.theme||"normal",this.ctx.hasOwnProperty("placeholder")&&(t=this.isSimple(i)?i:this.reapply(i)),M({_inputId:n,_labelId:"label"+n,_hintId:"hint"+n,_name:this.ctx.name||"",_value:e,_inputLink:!0,_iconLeft:this.ctx.icon||this.ctx.iconLeft,_iconRight:this.ctx.iconRight,_disabled:r.disabled,_live:s,_placeholder:t,_hasClear:"no"!==r.clear})}),i("value")("",t(function(){return this.ctx})(function(){return this.reapply(this.ctx)}),t(function(){return this.isSimple(this.ctx)})(function(){return this.ctx}))),r("input").elem("box")(l()("span"),f()(function(){return[this._iconLeft&&{elem:"icon",icon:this._iconLeft,elemMods:{side:"left"}},this._iconRight&&{elem:"icon",icon:this._iconRight,elemMods:{side:"right"}},this._hasClear&&{elem:"clear",elemMods:this._value||0===this._value?{visibility:"visible"}:void 0,content:" "},this.ctx.content].filter(Boolean)})),r("input").elem("control")(l()("input"),u()(function(){var t=this.extend({id:this._inputId,name:this._name,placeholder:this._placeholder},this.ctx.controlAttrs);return(this._value||0===this._value||""===this._value)&&(t.value=this._value),this.mods.disabled&&(t.disabled=!0),this._live&&(t.autocomplete="off"),t["aria-labelledby"]=this._labelId+" "+this._hintId,t}),n()(function(){return{elem:"box",content:this.ctx}})),r("input").elem("clear")(l()("span"),u()(function(){return{unselectable:"on"}}),f().match(function(){return!this.ctx.content})("")),r("input").elem("samples")(l()("span"),u()(function(){return{role:"list"}})),r("input").elem("sample")(l()("span"),u()(function(){return{role:"listitem"}})),r("link").match(function(){return this._inputLink&&this._disabled}).mix()(function(){return[{mods:{disabled:"yes"}}]}),r("input").mod("type","textarea").elem("control")(l()("textarea"),u()(function(){var t=M({_value:null});return this.extend(t,{rows:10,cols:10})}),f()(function(){return{html:this.xmlEscape(this._value||this.ctx.content||"")}})),r("popup")(c().match(function(){return!this._popupDefaults})(function(){var t=this.ctx,e=this.mods;if(e.hasOwnProperty("theme")||(e.theme="ffffff"),e.hasOwnProperty("autoclosable")||(e.autoclosable="yes"),e.hasOwnProperty("adaptive")||(e.adaptive="yes"),e.hasOwnProperty("animate")||(e.animate="yes"),t.zIndex){var n=t.attrs||(t.attrs={});n.style=(n.style||"")+";z-index:"+t.zIndex+";"}return z("default",{_popupDefaults:!0})}),f()(function(){return delete this._popupDefaults,[{elem:"under",elemMods:this.ctx.underMods},this.ctx.content]})),r("b-autocomplete-item")(l()("li"),t(function(){return this.ctx.search_cgi&&Array.isArray(this.ctx.search_cgi)}).js()(function(){return{cgi:this.ctx.search_cgi}}),d()(!0),m()(function(){return[{mods:{pers:this.ctx.pers?"yes":""}}]}),f()(function(){var t=this.ctx.data;return(0,BEM.blocks["b-autocomplete-item"].highlight)(this.xmlEscape(Array.isArray(t)?t[1]:t),this.ctx.hl)})),r("b-autocomplete-item").mod("type","nav")(c()(function(){var t=this.ctx.data,e=t[4],n=(e.match(/^\w[\w-]*:\/\//g)?"":"http://")+e,r=BEM.blocks["i-common__string"].escapeHTML(t[3]),s=" — "+BEM.blocks["b-autocomplete-item"].highlight(t[2],this.ctx.hl);return M({_linkUrlContent:r,_linkInfoConten:s,_url:n})}),d()(function(){return{val:this._url}}),f()(function(){return{elem:"link",tag:"a",attrs:{href:this._url,target:"_blank"},content:[{elem:"link-url",tag:"span",content:this._linkUrlContent},{elem:"link-info",tag:"span",content:this._linkInfoConten}]}})),r("b-autocomplete-item").mod("type","foot")(m()(function(){return[{mods:{enterable:"no"}}]}),f()(function(){return this.ctx.data.slice(1).map(function(t){return Array.isArray(t)?{tag:"span",elem:"foot",content:t[0]}:t},this)})),r("b-autocomplete-item").mod("type","lingvo").content()(function(){var t=this.ctx.data[1];return[{tag:"span",elem:"text",content:t.text},{tag:"span",elem:"translation",content:[" — ",t.translation]}]}),r("b-autocomplete-item").mod("type","proxy")(d()(function(){return{id:this.ctx.data[1].id}}),f()(function(){return this.ctx.data[1].text})),r("input").elem("message")(l()("span"),u()(function(){return{"aria-hidden":"true"}})),r("textinput")(l()("span"),d()(function(){return{_tabindex:this.mods.disabled?this.ctx.tabindex:void 0}}),f()(function(){var t=this.ctx,e=this.mods;return void 0===e.view&&(e.view="classic"),[{elem:"control",attrs:this.extend({type:e.type,id:t.id,name:t.name,value:t.text,tabindex:t.tabindex,placeholder:t.placeholder,autocomplete:!1===t.autocomplete&&"off",disabled:Boolean(e.disabled)},t.controlAttrs)},{elem:"box"}]})),r("textinput")(t(function(){return this.ctx.mods&&this.ctx.mods.focused||this.ctx.controlAttrs&&this.ctx.controlAttrs.autofocus}).js()(function(){var t=Boolean(this.ctx.mods&&this.ctx.mods.focused||this.ctx.controlAttrs.autofocus);return this.extend(M(),{autofocus:t,live:!t})})),r("textinput").elem("box").tag()("span"),r("textinput").elem("control").tag()("input"),r("textinput").mod("type","number")(c()(function(){return this.mods["has-clear"]=!1,M()})),r("textinput").mod("has-clear","yes")(f()(function(){return[].concat(M(),{elem:"clear",elemMods:{theme:this.mods.theme,visible:Boolean(this.ctx.text)&&"yes"}})}),t(function(){return this.ctx.controlAttrs&&this.ctx.controlAttrs.readonly}).def()(function(){return this.mods["has-clear"]=!1,M()})),r("textinput").elem("clear")(x()(function(){return{elem:"icon",icon:this.extend({mods:{type:z("icon-type"),glyph:z("icon-glyph")},mix:{block:this.block,elem:"clear",elemMods:this.elemMods}},this.ctx.icon)}})),r("textinput").elem("icon").replace()(function(){var t=this.ctx.icon||{};return t.block="icon",t.mix=[].concat(t.mix,{block:this.block,elem:this.elem,elemMods:this.elemMods}),t.mods=this.extend({size:this.mods.size,disabled:this.mods.disabled},t.mods),t}),r("checkbox")(c()(function(){var t=this.ctx;return t.controlAttrs=this.extend({id:this.generateId(),checked:Boolean(this.mods.checked),disabled:Boolean(this.mods.disabled),tabindex:t.tabindex,name:t.name,value:t.value},void 0===t.controlAttrs?t.checkboxAttrs:t.controlAttrs),t.controlAttrs["aria-labelledby"]="label"+t.controlAttrs.id,void 0===this.mods.view&&(this.mods.view="classic"),void 0===this.mods.lines&&(this.mods.lines="multi"),M({_labelAttrs:{id:t.controlAttrs["aria-labelledby"],for:t.controlAttrs.id}})}),l()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)}),t(function(){return void 0===this.ctx.content}).content()(function(){return[this.util.merge({elem:"box",tag:"span",content:[this.util.merge({elem:"control",attrs:this.ctx.controlAttrs},this.ctx.control),{elem:"tick",tag:"i"}]},this.ctx.box),void 0!==this.ctx.text&&this.util.merge({elem:"label"},this.isSimple(this.ctx.text)?{content:{html:this.xmlEscape(this.ctx.text)}}:this.ctx.text)].filter(Boolean)})),r("checkbox").elem("control")(l()("input"),u()(function(){return{type:"checkbox",autocomplete:"off"}})),r("checkbox").elem("label")(l()("label"),u()(function(){return this.extend({"aria-hidden":"true"},this._labelAttrs)})),r("radiobox")(c()(function(){var t=this.ctx,e=this.mods;return void 0===this.mods.view&&(this.mods.view="classic"),M({_disabled:e.disabled,_name:t.name,_value:t.value})}),l()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)})),r("radiobox").elem("radio")(c()(function(){var t=this.ctx,e=this.elemMods,n=this.extend({id:this.generateId(),type:"radio",name:this._name,value:t.value},t.controlAttrs),r=void 0!==n.value&&n.value===this._value;return e.disabled||(e.disabled=this._disabled),e.checked||(e.checked=r?"yes":""),e.disabled&&(n.disabled=!0,n.tabindex=-1),e.checked&&(n.checked=!0),M({_controlAttrs:n})}),l()("label"),u()(function(){return{for:this._controlAttrs.id}}),f()(function(){return[{elem:"box",tag:"span",content:{elem:"control"}},{elem:"text",tag:"span",content:M()}]})),r("radiobox").elem("control")(l()("input"),u()(function(){return this._controlAttrs})),r("radio-button")(c()(function(){var t=this.ctx,e=this.mods;return void 0===this.mods.view&&(this.mods.view="classic"),M({_radioButton:{name:t.name,value:t.value,disabled:Boolean(e.disabled)}})}),l()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)}),f()(function(){var t=this.ctx.content;return Array.isArray(t)?t.filter(function(t){return!this.isSimple(t)&&t},this):t})),r("radio-button").elem("radio")(c()(function(){var t=this.elemMods,e=this._radioButton,n=e.disabled,r=this.extend({},this.ctx.controlAttrs);return void 0!==r.value&&r.value===e.value&&(t.checked="yes"),n&&(t.disabled="yes"),"default"===this.mods.view||t.side||(t.side=["","right","left","both"][2*this.isFirst()+this.isLast()]),r.checked=Boolean(t.checked),r.disabled=Boolean(t.disabled),r.id||(r.id=this.generateId()),M({_controlAttrs:r})}),l()("label"),u()(function(){return{for:this._controlAttrs.id}}),f()(function(){return[{elem:"control"},{elem:"text",tag:"span",content:this.ctx.content}]})),r("radio-button").elem("radio")(u()(function(){var t=this.ctx.attrs,e=void 0===t?{}:t;return _extends({},M(),e)})),r("radio-button").elem("control")(l()("input"),u()(function(){var t=this._controlAttrs;return t.checked=Boolean(t.checked),t.disabled=Boolean(t.disabled),t.disabled&&(t.tabindex="-1"),t.type="radio",t.name=this._radioButton.name,t})),r("select")(c()(function(){var t=this.ctx,e=t.id||this.generateId();return M({_controlAttrs:{id:e,name:t.name},_formSelect:{block:this.block,mods:this.mods,tabindex:t.tabindex}})}),d()(function(){return this.extend({live:!1},this.ctx.js)}),l()("span"),s("option").tag()("option"),s("option-group").tag()("optgroup"),s("text").tag()("span")),r("select").def()(function(){var t=this.ctx;if((z("js")||{}).live){var e=t.content.filter(function(t){return"control"===t.elem})[0].content;if(e.length){var n=function t(e){for(var n,r,s=0;s<e.length&&("option"===(n=e[s]).elem&&Object(n.attrs).selected?r=n:"option-group"===n.elem&&(r=t(n.content)),!r);s++);return r}(e);return n||"option-group"===(n=e[0]).elem&&(n=n.content[0]),M({_initValue:n.attrs.value,_initText:n.content})}}return M()}),r("select").elem("item").attrs()(function(){return{id:this.generateId()}}),r("select").elem("item").match(function(){return this.elemMods.label}).attrs()(function(){var t=M()||{};return this._labelId&&(t.id=this._labelId),t["aria-hidden"]="true",t}),r("button").match(function(){return this._formSelect})(u()(function(){var t=M()||{};t.role="listbox",t.type="button",t["aria-haspopup"]="true",t["aria-expanded"]="false";var e=this._formSelect.tabindex;return void 0!==e&&(t.tabindex=e),t}),c()(function(){var t=this.ctx,e=this._formSelect.mods,n=this.mods;return n.arrow="down",e.theme&&(n.theme=e.theme),e.size&&(n.size=e.size),e.disabled&&(n.disabled="yes"),this._initText&&(t.content=this._initText),M({"ctx._theme":!0})}),m()(function(){return[{block:this._formSelect.block,elem:"button"}]})),r("select").elem("group")(u()(function(){return{role:"group","aria-labelledby":this._labelId}}),m()(function(){return{elemMods:{position:this.isFirst()?this.isLast()?"both":"first":this.isLast()?"last":"middle"}}}),c()(function(){return M({_labelId:this.generateId()})})),r("select").elem("control")(t(function(){return this._initValue}).def()(function(){var t=this.ctx;return t.attrs=this.extend(t.attrs,{value:this._initValue}),M()}),l()("select"),u()(function(){var t={};return["id","name","tabindex"].forEach(function(e){this._controlAttrs[e]&&(t[e]=this._controlAttrs[e])}.bind(this)),t.disabled=Boolean(this.mods.disabled),t.tabindex=-1,t["aria-hidden"]="true",this.ctx.controlAttrs||t})),r("attach")(l()("span"),d()(function(){return this.extend({live:!1},this.ctx.js)}),c()(function(){var t=this.ctx;this.mods;return this.mods.theme||(this.mods.theme="normal"),M({_attachButton:!0,_id:t.id||this.generateId(),_name:t.name||"attachment",_tabindex:t.tabindex,_disabled:this.mods.disabled})}),t(function(){return!this.ctx.content}).content()(function(){var t=this.ctx,e=t.text&&{html:this.xmlEscape(t.text)},n=[];return"button2"!==this.mods.use&&n.push(this.util.mergeBemjson({block:"button",mods:{size:this.mods.size,theme:this.mods.theme},mix:{block:"attach",elem:"button"},id:this._id,name:this._name,tabindex:t.tabindex,content:e||BEM.I18N("attach","button-text")},t.button||{})),void 0!==t.holder&&n.push("string"==typeof t.holder?{elem:"holder",content:{html:this.xmlEscape(t.holder)}}:this.extend(t.holder,{elem:"holder"})),n})),r("button").match(function(){return this._attachButton})(l()("span"),t(function(){return this._disabled}).mix()(function(){return[{mods:{disabled:"yes"}}]}),c()(function(){this.ctx.content||(this.ctx.content=BEM.I18N("attach","button-text"));var t=this.ctx;return t.id&&(this._id=t.id),t.name&&(this._name=t.name),M({_name:this._name,_id:this._id,_textId:"text"+this._id,_tabindex:t.tabindex||this._tabindex})}),u()(function(){return{}}),f()(function(){return[M(),{block:"attach",elem:"control",attrs:this.extend({autocomplete:"off"},this.ctx.controlAttrs||{})}]}),s("text").attrs()(function(){var t=M()||{};return t.id=this._textId,t["aria-hidden"]="true",t})),r("attach").elem("control")(m()(function(){return[{block:"button",elem:"control"}]}),l()("input"),u()(function(){var t=this.extend(this.ctx.attrs||{},{type:"file",name:this._name,id:this._id,"aria-labelledby":this._textId});return t.disabled=Boolean(this._disabled),this._disabled&&(t["aria-disabled"]="true"),this._tabindex&&(t.tabindex=this._tabindex),t})),r("attach").elem("holder")(c()(function(){return this.elemMods.state="hidden",M()}),l()("span"),u()(function(){return{"aria-hidden":"true"}}),f()(function(){return[{block:"image",mix:{block:"attach",elem:"icon-file"}},{elem:"text",tag:"label",attrs:{for:this._id},content:this.ctx.content||BEM.I18N("attach","no-file")},{block:"image",mix:{block:"attach",elem:"reset"}}]})),r("image")(l()("img"),u()(function(){var t=this.ctx,e={src:"https://yastatic.net/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif",alt:""};return t.url&&(e.src=t.url),["alt","width","height"].forEach(function(n){t[n]&&(e[n]=t[n])}),e})),r("date-input")(s("label").tag()("label"),c()(function(){var t=this.ctx,e=t.value||"",n=t.name||"";return e instanceof Array&&(e=e[0]),n instanceof Array&&(n=n[0]),e&&(e=e.split(".").reverse().join("-")),M({name:n,value:e})})),r("date-input")(f()(function(){var t=this.ctx;return[{block:"m-calendar",mix:[{block:t.block,elem:"control"}],mods:{toggler:"input",type:"month",has:"clear"},js:this.extend(t.js||{},{autoclose:!0,value:this.value}),size:"m",attrs:t.attrs,theme:"grey"},{block:this.ctx.block,elem:"iso-date",tag:"input",attrs:{type:"hidden",name:this.name,value:this.value}}]})),g(function(t,e){var n,r,s,i,a;t.BEMContext.prototype["mi-helpers"]={getDateFromHumanString:function(t){var e,n=Math.abs(~t.search(/\./)||~t.search("Z")),r=t;return r=r.replace(/-/g,",").replace("T",",").replace(/:/g,","),(r=(r=n?r.substr(0,n-1):r).split(","))[1]=r[1]-1,e=this.getUTC_YMD(r[0],r[1],r[2]),r[3]&&e.setHours(r[3]),r[4]&&e.setMinutes(r[4]),r[5]&&e.setSeconds(r[5]),e},getUTC_YMD:function(t,e,n){var r=new Date(Date.UTC(2e3,10));return r.setUTCFullYear(t),r.setUTCMonth(e),r.setUTCDate(n),r.setUTCMinutes(r.getMinutes()+r.getTimezoneOffset()),r},getHumanStringFromDate:function(t){var e,n=t.date,r=n.getFullYear(),s=(n.getMonth()+1).toString(),i=n.getDate().toString(),a=n.getHours().toString(),o=n.getMinutes().toString(),c=n.getSeconds().toString();return 1===s.length&&(s="0"+s),e=r+"-"+s,!1!==t.needDay&&(1===i.length&&(i="0"+i),e=e+"-"+i,t.needHours&&(1===a.length&&(a="0"+a),e=e+"T"+a,t.needMinutes&&(1===o.length&&(o="0"+o),e=e+":"+o,t.needSeconds&&(1===c.length&&(c="0"+c),e=e+":"+c)))),e},htmlSpecialChars:function(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):t},dateFormat:(n=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,r=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,s=/[^-+\dA-Z]/g,i=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t},a={default:"d mmm yyyy",shortDate:"d mmm yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"HH:MM",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",dayMonthTime:"dd.mm hh:mm",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},function(t,e,o){1!=arguments.length||"[object String]"!=Object.prototype.toString.call(t)||/\d/.test(t)||(e=t,t=void 0);try{if(t=t?new Date(t):new Date,isNaN(t))throw SyntaxError("invalid date");"UTC:"==(e=String(a[e]||e||a.default)).slice(0,4)&&(e=e.slice(4),o=!0);var c=o?"getUTC":"get",l=t[c+"Date"](),u=t[c+"Day"](),h=t[c+"Month"](),d=t[c+"FullYear"](),p=t[c+"Hours"](),m=t[c+"Minutes"](),f=t[c+"Seconds"](),x=t[c+"Milliseconds"](),y=o?0:t.getTimezoneOffset(),g={d:l,dd:i(l),ddd:BEM.I18N("i-tanker__days","short"+(u||7)),dddd:BEM.I18N("i-tanker__days","n"+(u||7)),m:h+1,mm:i(h+1),mmm:BEM.I18N("i-tanker__months","short"+(h+1)),mmmm:BEM.I18N("i-tanker__months","g"+(h+1)),yy:String(d).slice(2),yyyy:d,h:p%12||12,hh:i(p%12||12),H:p,HH:i(p),M:m,MM:i(m),s:f,ss:i(f),l:i(x,3),L:i(x>99?Math.round(x/10):x),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:o?"UTC":(String(t).match(r)||[""]).pop().replace(s,""),o:(y>0?"-":"+")+i(100*Math.floor(Math.abs(y)/60)+Math.abs(y)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return e.replace(n,function(t){return t in g?g[t]:t.slice(1,t.length-1)})}catch(t){}})}}),r("m-datepicker")(d()(!0),s("great-chooser").tag()("form")),r("awesome-icon").tag()("span"),r("i-ua").content()(function(){var t=[";(function(d,e,p){","e=d.documentElement;",'p="placeholder";','e.className+=" i-ua_"+p+(p in d.createElement("input")?"_yes":"_no")',"})(document);"].join("");return[].concat(M()||[],{html:t})}),r("input").elem("hint")(l()("label"),u()(function(){return{id:this._hintId,for:this._inputId,"aria-hidden":"true"}}),c()(function(){return this._iconLeft&&(this.elemMods.lpad="yes"),this._iconRight&&(this.elemMods.rpad="yes"),this._value||0===this._value||(this.elemMods.visibility="visible"),M()})),r("input").elem("control").match(function(){return this._placeholder}).wrap()(function(){return[{elem:"hint",content:this._placeholder},this.ctx]}),r("m-calendar").mod("toggler","input").content()(function(){return{elem:"toggler",content:{block:"input",mods:{size:this.ctx.size,clear:"no",toggler:"datepicker",disabled:this.ctx.mods.disabled||""},placeholder:this.ctx.js.defaultText,content:[{elem:"control",attrs:this.extend(this.ctx.attrs||{},{readonly:"yes"})}]}}}),r("date-range-input").content()(function(){var t=this.ctx,e=this.ctx.block,n=t.value||"",r=t.name||"",s=["from","to"],i=t.js.limits;return n.map(function(t,n){var a=s[n],o=void 0;return t||(o=i.min||i.max),{block:"date-input",mods:{type:a},mix:[{block:e,elem:a}],name:r[n],attrs:{id:r[n]},value:t,js:{defaultText:BEM.I18N(e,a),limits:i,date:o}}})}),r("price").mod("currency","rub").content()(function(){return[{elem:"val",content:this.ctx.content}," ₽"]}),r("price").mod("currency","eur").content()(function(){return[{elem:"val",content:this.ctx.content}," €"]}),r("price").elem("val").tag()("span"),r("survey-question").elem("list")(f()(function(){var t=this.ctx.fields,e=this.ctx.extraSurveyData;return{content:[z("remove-elem"),{block:"survey",elem:"groups-by-header",fields:t,extraSurveyData:e}]}}),t(function(){return Number(this.ctx.copyNum)}).mode("remove-elem")(function(){return{elem:"list-remove",content:[{block:"icon",mods:{size:"m",type:"close"}}]}})),r("autocomplete-item")(d()(function(){return this.ctx.data}),f()(function(){return[{elem:"label",tag:"span",content:this.ctx.data.label},{elem:"data",data:this.ctx.data},{elem:"clear",tag:"span",content:"×"}]})),r("autocomplete-item").elem("data")(l()("input"),u()(function(){return{type:"hidden",name:this.ctx.data.name,value:this.ctx.data.value}})),r("file")(d()(function(){return{attrs:this.ctx.fileAttrs}}),f()(function(){var t=this.ctx.fileAttrs||"",e=t.size||"s",n=t.name||"";return[{block:"button",mods:{theme:"normal",size:e,side:"left",active:"no"},content:n.length>20?n.substr(0,20)+"…":n,attrs:{title:n}},{block:"button",mods:{theme:"normal",size:e,side:"right","only-icon":"yes"},mix:[{block:"file",elem:"delete"}],content:[{block:"spin2",mods:{size:"xxs",progress:"yes"}},{block:"image",mix:[{block:"button",elem:"icon",elemMods:{10:"delete"}}],alt:""}]}]})),r("file").mod("hidden","yes")(l()("input"),u()(function(){return{type:"hidden",name:this.ctx.name,value:this.ctx.content}})),r("file-upload")(d()(function(){return this.extend(this.ctx.js,{maxFilesSize:this.ctx.maxFilesSize,maxFilesCount:this.ctx.maxFilesCount})}),f()(function(){return[{block:"attach",mods:{size:"m"},content:[{block:"button",mods:{theme:"normal",size:"m"},mix:[{block:"attach",elem:"button"}],controlAttrs:{multiple:"multiple"},name:"file",content:[{block:"image",mix:[{block:"button",elem:"icon",elemMods:{16:"upload"}}],alt:BEM.I18N("file-upload","upload-text")},BEM.I18N("file-upload","upload-text")]}]},{elem:"limit",content:1===this.ctx.maxFilesCount?BEM.I18N("file-upload","limit-hint-one-file",{size:this.ctx.maxFilesSize}):BEM.I18N("file-upload","limit-hint",{count:this.ctx.maxFilesCount,size:this.ctx.maxFilesSize})}]})),r("file-upload").elem("limit").tag()("span"),r("survey-validation").elem("message-list").tag()("ul"),r("scale").elem("cell-text").tag()("span"),r("scale").elem("answer")(l()("input"),u()(function(){return this.extend(this.ctx.attrs,{type:"checkbox"})})),r("payment")(d()(function(){var t=this.ctx.tagData.attrs,e=this.ctx.otherData.max,n=this.ctx,r=n.types,s=n.defaultSettings,i=t.value,a=(void 0===i?"":i).split(" ");return{amount:_slicedToArray(a,1)[0]||s.amount,maxAmount:e,types:r,defaultSettings:s}}),f()(function(){var t=this,e=this.ctx.tagData.attrs,n=e.value,r=void 0===n?"":n,s=e.id,i=e.name,a=this.ctx,o=a.types,c=a.defaultSettings,l=c.amount,u=c.type,h=r.split(" "),d=_slicedToArray(h,2),p=d[0],m=d[1],f=void 0===m?"":m;return p=p||l,-1===o.indexOf(f.toUpperCase())&&(f=u),[{elem:"amount",value:Number(p)},{block:"input",mods:{hidden:"yes"},mix:[{block:this.block,elem:"payment-value"}],content:[{elem:"control",controlAttrs:{id:s,name:i,value:p+" "+f}}]},{block:"radio-button",mods:{theme:"normal",size:"m"},mix:[{block:this.block,elem:"payment-type"}],value:f,content:o.map(function(e){return{elem:"radio",controlAttrs:{value:e},attrs:{title:BEM.I18N("payment","title-"+e.toLowerCase())},elemMods:{"only-icon":"yes",checked:f===e?"yes":""},content:[{block:"icon",mods:{type:"payment-"+e.toLowerCase()},mix:[{block:t.block,elem:"icon"}]}]}})}]})),r("payment").elem("amount")(f()(function(){var t=this.ctx.value;return{block:"input",js:{},mods:{theme:"normal",size:"m",clear:"no"},mix:[{block:this.block,elem:"amount-input"}],content:[{elem:"control",controlAttrs:{type:"number",min:0,value:t}}]}})),r("payment").mod("fixed",!0)(s("amount").content()(function(){return{block:"price",mods:{currency:"rub"},content:this.ctx.value}})),r("user").elem("icon").match(function(){return this._uid})(c()(function(){var t=this.ctx.avatarId||(this["i-global"].displayName||{}).default_avatar;return M({_avatarId:t})}),l()("span"),i("host")("//avatars.mds.yandex.net"),d()(function(){return{avatarId:this._avatarId}})),r("user").elem("icon").mode("iconSize")("middle"),r("user")(s("enter").def()(function(){var t=BEM.I18N("user","enter");return w([{block:"button",mods:{pseudo:"yes",size:"m",theme:"pseudo"},mix:[{block:"user",elem:"enter"}],attrs:{tabindex:"-1",title:t,"aria-label":t},content:[{block:"image",mix:[{block:"button",elem:"icon",elemMods:{16:"enter"}}],alt:""},{block:"user",elem:"enter-label"}]},{block:"domik",mods:{type:"hidden"}}])}),s("enter-label")(l()("span"),u()(function(){return{"aria-hidden":"true"}}),f()(function(){return BEM.I18N("user","enter")}))),r("domik")(c().match(function(){return!this.mods.logo})(function(){var t;return this.ctx.lang?t=this.ctx.lang:BEM.blocks&&BEM.blocks["i-global"]?t=BEM.blocks["i-global"].param("lang"):this["i-global"]&&(t=this["i-global"].lang),this.mods.logo=-1!==["en","tr","hy","ka","az"].indexOf(t)?"en":"ru",M()}),f()(function(){return[{elem:"roof",content:[{elem:"roof-border"},{elem:"roof-body"},{elem:"logo"}]},{elem:"content",content:this.ctx.content}]}),s("roof-border").tag()("i"),s("roof-body").tag()("i"),s("logo").tag()("i")),r("auth")(c()(function(){var t=this.ctx,e=function(t,e){return t?BEM.blocks["i-global"].param(e):this["i-global"][e]}.bind(this,BEM&&BEM.blocks);return void 0===t.retpath&&(t.retpath=e("retpath")),void 0===t.from&&(t.from=e("passport-msg")),M({_passportHost:e("passport-host")})}),l()("form"),d()(!0),u()(function(){return{method:"post",action:this.ctx.url||this._passportHost+"/auth",role:"form","aria-label":BEM.I18N("auth","auth")}}),i("auto-content")([]),f()(function(){var t=this.ctx;return[t.content||z("auto-content"),["retpath","from","origin","timestamp"].map(function(e){return{elem:"hidden",mix:{elem:e},name:e,val:t[e]}})]})),r("auth").elem("hidden")(l()("input"),u()(function(){return{type:"hidden",name:this.ctx.name,value:this.ctx.val}})),r("popup").elem("tail").tag()("i"),r("domik").mod("type","hidden")(d()(!1),c()(function(){return w({block:"auth",mix:[{block:"domik",mods:{type:"hidden"}}],js:!1,attrs:{style:"display:none"},content:[{tag:"input",attrs:{name:"login"}},{tag:"input",attrs:{name:"passwd",type:"password"}}]})})),r("auth").mod("content","auto")(i("auto-content")([{elem:"username"},{elem:"password"},{elem:"row",elemMods:{button:"yes"},content:[{elem:"haunter"},{elem:"button"}]},{elem:"social"},{elem:"row",content:[{elem:"remember"},{elem:"register"}]}]),s("username").content()(function(){return{block:"input",mods:{theme:"normal",size:"m"},name:"login",placeholder:BEM.I18N("auth","login"),content:[{elem:"control",attrs:{"aria-required":"true"}}]}}),s("password").content()(function(){return{block:"input",mods:{theme:"normal",size:"m"},name:"passwd",placeholder:BEM.I18N("auth","password"),content:[{elem:"control",attrs:{type:"password",maxlength:256,"aria-required":"true"}}]}}),s("haunter").content()(function(){return{block:"checkbox",mods:{theme:"normal",size:"m"},checkboxAttrs:{autocomplete:"off",name:"twoweeks",value:"no"},text:BEM.I18N("auth","temporary")}}),s("button").content()(function(){return{block:"button2",mods:{theme:"action",size:"m",type:"submit"},text:BEM.I18N("auth","logon")}}),s("remember").content()(function(){return{block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:this.ctx.url||this._passportHost+"/restoration",text:BEM.I18N("auth","remember")}}),s("register").content()(function(){return{block:"button2",mods:{theme:"pseudo",size:"s",type:"link"},url:this.ctx.url||this._passportHost+"/registration",text:BEM.I18N("auth","register")}})),r("auth").elem("social").attrs()(function(){return{role:"group","aria-label":BEM.I18N("auth","social-log-in")}}),r("auth").elem("social-icon")(l()("i"),f()(" ")),r("dropdown")(d()(!0),m()(function(){return[{mods:{action:"closed"}}]}),s("popup").replace()(function(){var t=this.ctx,e=[{block:"dropdown",elem:"popup"}];return t.mix&&(e=e.concat(t.mix)),{block:"popup",mix:e,mods:this.elemMods,underMods:t.underMods,attrs:t.attrs,js:t.js,content:[{elem:"tail"},{elem:"content",content:t.content}]}})),r("button2").mod("type","submit").attrs()(function(){return this.extend(M(),{type:"submit"})}),r("domik").mod("type","popup").attrs()(function(){var t=M()||{};return t.role="dialog",t}),r("user").mod("menu","yes")(u()(function(){var t=M()||{};return t.role="button",t.tabindex=0,t["aria-haspopup"]="true",t["aria-expanded"]="false",t}),i("exit-url")(function(){var t=this["i-global"],e="/passport?mode=";return e+="logout&yu="+(t.yandexuid||""),t.retpath&&(e+="&retpath="+encodeURIComponent(t.retpath)),t["passport-host"]+e}),i("user-menu")(function(){var t=z("exit-url");return[{elem:"item",type:"mail",content:{block:"link",mods:{theme:"normal"},url:this["i-services"].serviceUrl("mail"),content:[{block:"image",mods:{icon:"mail"}},{elem:"text",tag:"span",mix:[{block:"user-menu-update",js:{caller:this.ctx.mailCallerId}}],content:function(){var t=this.ctx.js&&this.ctx.js.mail||0;return(t?t+" ":"")+BEM.I18N("user","letter",{count:t})}.call(this)}]}},{elem:"item",type:"mailCompose",content:{block:"link",mods:{theme:"normal"},content:BEM.I18N("user","letter_compose"),url:this["i-services"].serviceUrl("mail")+"/compose"}},{elem:"item",type:"disk",content:{block:"link",mods:{theme:"normal"},url:this["i-services"].serviceUrl("disk")+"?source=main-loginmenu",content:[{block:"image",mods:{icon:"disk"}},{elem:"text",tag:"span",content:BEM.I18N("user","upload_files")}]}},{elem:"item",elemMods:{separator:"yes"}},{elem:"item",type:"tune",content:{block:"link",mods:{theme:"normal"},content:BEM.I18N("user","tune"),url:this["i-services"].serviceUrl("tune")}},{elem:"item",type:"passport",content:{block:"link",mods:{theme:"normal"},content:BEM.I18N("user","passport"),url:this["i-services"].serviceUrl("passport")}},{elem:"item",type:"logout",content:{block:"link",mods:{theme:"normal"},mix:[{block:"user",js:{_uniqId:"user__logout"}},{block:"user",elem:"logout"}],content:BEM.I18N("user","exit"),url:t}}]}),t(function(){return this["i-global"].login}).wrap()(function(){var t=z("user-menu");return{block:"dropdown-menu",mods:{theme:"ffffff",size:"m",user:"yes"},content:[this.ctx,{elem:"popup",elemMods:{user:"yes"},mix:[{block:"popup",mods:{"fade-out":"no","watch-scroll":"no"}}],js:{directions:"bottom-right"},content:t}]}})),r("dropdown-menu")(d()(!0),c()(function(){var t=this.mods;return void 0!==t.size||(t.size="m"),void 0!==t.theme||(t.theme="ffffff"),this.dropdownMenuSize=t.size,this._inDropdownMenu=!0,M()})),r("dropdown-menu").elem("popup").def()(function(){var t=this.ctx;return w({block:"dropdown",elem:"popup",js:this.ctx.js,mix:(t.mix||[]).concat({block:"dropdown-menu",elem:"popup",elemMods:this.extend({size:this.dropdownMenuSize},this.elemMods)}),attrs:t.attrs,content:{block:"dropdown-menu",elem:"menu",title:t.menuTitle,type:t.type,elemMods:t.menuMods,mix:t.menuMix,content:t.content}})}),r("dropdown-menu").elem("menu").def()(function(){var t=this.ctx,e=t.type||"vert",n=this.elemMods;return n.theme||(n.theme="ffffff"),w({block:"b-menu-"+e,mix:(t.mix||[]).concat({block:"dropdown-menu",elem:"menu",elemMods:n}),title:t.title,content:t.content})}),r("b-menu-vert").match(function(){return this._inDropdownMenu})(u()(function(){return{role:"menu"}}),s("item").attrs()(function(){return{role:"menuitem"}})),r("b-menu-horiz").match(function(){return this._inDropdownMenu})(u()(function(){return{role:"menu"}}),s("item").attrs()(function(){return{role:"menuitem"}})),r("b-menu-vert")(f()(function(){return[this.ctx.title,{elem:"layout",content:this.ctx.content}]}),s("layout").tag()("ul"),s("item").match(function(){return!this._inItemContent}).wrap()(function(){return this.position--,{elem:"layout-unit",content:[this.ctx,this.ctx["item-content"]]}}),s("item-content").def()(function(){return M({_inItemContent:!0})}),s("layout-unit")(l()("li"),m()(function(){var t=[];return this.isFirst()&&t.push({elemMods:{position:"first"}}),this.isLast()&&t.push({elemMods:{position:"last"}}),t})),s("item-selector").tag()("span"),s("submenu").tag()("ul")),r("b-menu-horiz")(d()(!0),s("item").wrap()(function(){return this.position--,{elem:"layout-unit",content:this.ctx}}),s("layout-unit").mix()(function(){var t=[];return this.isFirst()&&t.push({elemMods:{position:"first"}}),this.isLast()&&t.push({elemMods:{position:"last"}}),t}),s("item-selector").tag()("span")),r("user-menu-update").js()(!0),r("logo2").elem("company")(u()(function(){return this.extend(M(),{style:"background: url(https://yastatic.net/q/logoaas/v1/Yandex.svg?color=000000) left/contain no-repeat",title:"Yandex"})})),r("logo2").elem("service")(u()(function(){return this.extend(M(),{style:"background: url(https://yastatic.net/q/logoaas/v1/Forms.svg?color=000000) left/contain no-repeat",title:"Forms"})})),r("logo2")(f()(function(){return[{elem:"company",tld:this.ctx.tld,language:this.ctx.language,color:this.ctx.color,companyUrl:this.ctx.companyUrl},{elem:"service",adminUrl:this.ctx.adminUrl,language:this.ctx.language}]})),r("logo2").mod("type","header")(f()(function(){return{block:"link",mix:{block:"logo2",elem:"service"},url:this.ctx.adminUrl+"?utm_campaign=header"}})),g(function(t,n){(t.BEMContext||n.BEMContext).prototype.require=function(t){return e[t]}})}),s.exportApply(r),r}var n=function(){return function t(e,r,s){function i(o,c){if(!r[o]){if(!e[o]){var l="function"==typeof n&&n;if(!c&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var h=r[o]={exports:{}};e[o][0].call(h.exports,function(t){return i(e[o][1][t]||t)},h,h.exports,t,e,r,s)}return r[o].exports}for(var a="function"==typeof n&&n,o=0;o<s.length;o++)i(s[o]);return i}}()({1:[function(t,e,n){var r=t("./default"),s=t("./parser");t("./util");function i(t){return void 0===t||null===t}function a(t){(t=function(t){var e={};for(var n in t)e[n]=t[n];return e}(t||{})).whiteList=t.whiteList||r.whiteList,t.onAttr=t.onAttr||r.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||r.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||r.safeAttrValue,this.options=t}a.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,n=e.whiteList,r=e.onAttr,a=e.onIgnoreAttr,o=e.safeAttrValue;return s(t,function(t,e,s,c,l){var u=n[s],h=!1;if(!0===u?h=u:"function"==typeof u?h=u(c):u instanceof RegExp&&(h=u.test(c)),!0!==h&&(h=!1),c=o(s,c)){var d,p={position:e,sourcePosition:t,source:l,isWhite:h};return h?i(d=r(s,c,p))?s+":"+c:d:i(d=a(s,c,p))?void 0:d}})},e.exports=a},{"./default":2,"./parser":4,"./util":5}],2:[function(t,e,n){function r(){var t={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1};return t}var s=/javascript\s*\:/gim;n.whiteList=r(),n.getDefaultWhiteList=r,n.onAttr=function(t,e,n){},n.onIgnoreAttr=function(t,e,n){},n.safeAttrValue=function(t,e){return s.test(e)?"":e}},{}],3:[function(t,e,n){var r=t("./default"),s=t("./css");for(var i in(n=e.exports=function(t,e){return new s(e).process(t)}).FilterCSS=s,r)n[i]=r[i];"undefined"!=typeof window&&(window.filterCSS=e.exports)},{"./css":1,"./default":2}],4:[function(t,e,n){var r=t("./util");e.exports=function(t,e){";"!==(t=r.trimRight(t))[t.length-1]&&(t+=";");var n=t.length,s=!1,i=0,a=0,o="";function c(){if(!s){var n=r.trim(t.slice(i,a)),c=n.indexOf(":");if(-1!==c){var l=r.trim(n.slice(0,c)),u=r.trim(n.slice(c+1));if(l){var h=e(i,o.length,l,u,n);h&&(o+=h+"; ")}}}i=a+1}for(;a<n;a++){var l=t[a];if("/"===l&&"*"===t[a+1]){var u=t.indexOf("*/",a+2);if(-1===u)break;i=(a=u+1)+1,s=!1}else"("===l?s=!0:")"===l?s=!1:";"===l?s||c():"\n"===l&&c()}return r.trim(o)}},{"./util":5}],5:[function(t,e,n){e.exports={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,s;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,s=t.length;r<s;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}}},{}],6:[function(t,e,n){var r=t("cssfilter").FilterCSS,s=t("cssfilter").getDefaultWhiteList,i=t("./util");function a(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]}}var o=new r;function c(t){return t.replace(l,"&lt;").replace(u,"&gt;")}var l=/</g,u=/>/g,h=/"/g,d=/&quot;/g,p=/&#([a-zA-Z0-9]*);?/gim,m=/&colon;?/gim,f=/&newline;?/gim,x=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,y=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,g=/u\s*r\s*l\s*\(.*/gi;function b(t){return t.replace(h,"&quot;")}function v(t){return t.replace(d,'"')}function k(t){return t.replace(p,function(t,e){return"x"===e[0]||"X"===e[0]?String.fromCharCode(parseInt(e.substr(1),16)):String.fromCharCode(parseInt(e,10))})}function _(t){return t.replace(m,":").replace(f," ")}function w(t){for(var e="",n=0,r=t.length;n<r;n++)e+=t.charCodeAt(n)<32?" ":t.charAt(n);return i.trim(e)}function M(t){return t=w(t=_(t=k(t=v(t))))}function z(t){return t=c(t=b(t))}var E=/<!--[\s\S]*?-->/g;n.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","loop","preload","src","height","width"]},n.getDefaultWhiteList=a,n.onTag=function(t,e,n){},n.onIgnoreTag=function(t,e,n){},n.onTagAttr=function(t,e,n){},n.onIgnoreTagAttr=function(t,e,n){},n.safeAttrValue=function(t,e,n,r){if(n=M(n),"href"===e||"src"===e){if("#"===(n=i.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===e){if(x.lastIndex=0,x.test(n))return""}else if("style"===e){if(y.lastIndex=0,y.test(n))return"";if(g.lastIndex=0,g.test(n)&&(x.lastIndex=0,x.test(n)))return"";!1!==r&&(n=(r=r||o).process(n))}return n=z(n)},n.escapeHtml=c,n.escapeQuote=b,n.unescapeQuote=v,n.escapeHtmlEntities=k,n.escapeDangerHtml5Entities=_,n.clearNonPrintableCharacter=w,n.friendlyAttrValue=M,n.escapeAttrValue=z,n.onIgnoreTagStripAll=function(){return""},n.StripTagBody=function(t,e){"function"!=typeof e&&(e=function(){});var n=!Array.isArray(t),r=[],s=!1;return{onIgnoreTag:function(a,o,c){if(function(e){return!!n||-1!==i.indexOf(t,e)}(a)){if(c.isClosing){var l="[/removed]",u=c.position+l.length;return r.push([!1!==s?s:c.position,u]),s=!1,l}return s||(s=c.position),"[removed]"}return e(a,o,c)},remove:function(t){var e="",n=0;return i.forEach(r,function(r){e+=t.slice(n,r[0]),n=r[1]}),e+=t.slice(n)}}},n.stripCommentTag=function(t){return t.replace(E,"")},n.stripBlankChar=function(t){var e=t.split("");return(e=e.filter(function(t){var e=t.charCodeAt(0);return!(127===e||e<=31&&10!==e&&13!==e)})).join("")},n.cssFilter=o,n.getDefaultCSSWhiteList=s},{"./util":8,cssfilter:3}],7:[function(t,e,n){var r=t("./util");function s(t){var e=r.spaceIndex(t);if(-1===e)var n=t.slice(1,-1);else n=t.slice(1,e+1);return"/"===(n=r.trim(n).toLowerCase()).slice(0,1)&&(n=n.slice(1)),"/"===n.slice(-1)&&(n=n.slice(0,-1)),n}function i(t){return"</"===t.slice(0,2)}var a=/[^a-zA-Z0-9_:\.\-]/gim;function o(t,e){for(;e<t.length;e++){var n=t[e];if(" "!==n)return"="===n?e:-1}}function c(t,e){for(;e>0;e--){var n=t[e];if(" "!==n)return"="===n?e:-1}}function l(t){return function(t){return'"'===t[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]}(t)?t.substr(1,t.length-2):t}n.parseTag=function(t,e,n){"user strict";var r="",a=0,o=!1,c=!1,l=0,u=t.length,h="",d="";for(l=0;l<u;l++){var p=t.charAt(l);if(!1===o){if("<"===p){o=l;continue}}else if(!1===c){if("<"===p){r+=n(t.slice(a,l)),o=l,a=l;continue}if(">"===p){r+=n(t.slice(a,o)),h=s(d=t.slice(o,l+1)),r+=e(o,r.length,h,d,i(d)),a=l+1,o=!1;continue}if(('"'===p||"'"===p)&&"="===t.charAt(l-1)){c=p;continue}}else if(p===c){c=!1;continue}}return a<t.length&&(r+=n(t.substr(a))),r},n.parseAttr=function(t,e){"user strict";var n=0,s=[],i=!1,u=t.length;function h(t,n){if(!((t=(t=r.trim(t)).replace(a,"").toLowerCase()).length<1)){var i=e(t,n||"");i&&s.push(i)}}for(var d=0;d<u;d++){var p,m=t.charAt(d);if(!1!==i||"="!==m)if(!1===i||d!==n||'"'!==m&&"'"!==m||"="!==t.charAt(d-1)){if(/\s|\n|\t/.test(m)){if(t=t.replace(/\s|\n|\t/g," "),!1===i){if(-1===(p=o(t,d))){h(r.trim(t.slice(n,d))),i=!1,n=d+1;continue}d=p-1;continue}if(-1===(p=c(t,d-1))){h(i,l(r.trim(t.slice(n,d)))),i=!1,n=d+1;continue}}}else{if(-1===(p=t.indexOf(m,d+1)))break;h(i,r.trim(t.slice(n+1,p))),i=!1,n=(d=p)+1}else i=t.slice(n,d),n=d+1}return n<t.length&&(!1===i?h(t.slice(n)):h(i,l(r.trim(t.slice(n))))),r.trim(s.join(" "))}},{"./util":8}],8:[function(t,e,n){e.exports={indexOf:function(t,e){var n,r;if(Array.prototype.indexOf)return t.indexOf(e);for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(t,e,n){var r,s;if(Array.prototype.forEach)return t.forEach(e,n);for(r=0,s=t.length;r<s;r++)e.call(n,t[r],r,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/.exec(t);return e?e.index:-1}}},{}],9:[function(t,e,n){var r=t("cssfilter").FilterCSS,s=t("./default"),i=t("./parser"),a=i.parseTag,o=i.parseAttr,c=t("./util");function l(t){return void 0===t||null===t}function u(t){(t=function(t){var e={};for(var n in t)e[n]=t[n];return e}(t||{})).stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=s.onIgnoreTagStripAll),t.whiteList=t.whiteList||s.whiteList,t.onTag=t.onTag||s.onTag,t.onTagAttr=t.onTagAttr||s.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||s.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||s.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||s.safeAttrValue,t.escapeHtml=t.escapeHtml||s.escapeHtml,this.options=t,!1===t.css?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new r(t.css))}u.prototype.process=function(t){if(!(t=(t=t||"").toString()))return"";var e=this.options,n=e.whiteList,r=e.onTag,i=e.onIgnoreTag,u=e.onTagAttr,h=e.onIgnoreTagAttr,d=e.safeAttrValue,p=e.escapeHtml,m=this.cssFilter;e.stripBlankChar&&(t=s.stripBlankChar(t)),e.allowCommentTag||(t=s.stripCommentTag(t));var f=!1;if(e.stripIgnoreTagBody){f=s.StripTagBody(e.stripIgnoreTagBody,i);i=f.onIgnoreTag}var x=a(t,function(t,e,s,a,f){var x,y={sourcePosition:t,position:e,isClosing:f,isWhite:n.hasOwnProperty(s)};if(!l(x=r(s,a,y)))return x;if(y.isWhite){if(y.isClosing)return"</"+s+">";var g=function(t){var e=c.spaceIndex(t);if(-1===e)return{html:"",closing:"/"===t[t.length-2]};var n="/"===(t=c.trim(t.slice(e+1,-1)))[t.length-1];return n&&(t=c.trim(t.slice(0,-1))),{html:t,closing:n}}(a),b=n[s],v=o(g.html,function(t,e){var n,r=-1!==c.indexOf(b,t);return l(n=u(s,t,e,r))?r?(e=d(s,t,e,m))?t+'="'+e+'"':t:l(n=h(s,t,e,r))?void 0:n:n});a="<"+s;return v&&(a+=" "+v),g.closing&&(a+=" /"),a+=">"}return l(x=i(s,a,y))?p(a):x},p);return f&&(x=f.remove(x)),x},e.exports=u},{"./default":6,"./parser":7,"./util":8,cssfilter:3}],marked:[function(e,n,r){(function(t){!function(t){"use strict";var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}|~{3,})([^`~\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:y,table:y,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};function s(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||w.defaults,this.rules=e.normal,this.options.pedantic?this.rules=e.pedantic:this.options.gfm&&(this.rules=e.gfm)}e._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,e._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,e.def=p(e.def).replace("label",e._label).replace("title",e._title).getRegex(),e.bullet=/(?:[*+-]|\d{1,9}\.)/,e.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,e.item=p(e.item,"gm").replace(/bull/g,e.bullet).getRegex(),e.list=p(e.list).replace(/bull/g,e.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+e.def.source+")").getRegex(),e._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",e._comment=/<!--(?!-?>)[\s\S]*?-->/,e.html=p(e.html,"i").replace("comment",e._comment).replace("tag",e._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),e.paragraph=p(e._paragraph).replace("hr",e.hr).replace("heading"," {0,3}#{1,6} +").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}|~{3,})[^`\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",e._tag).getRegex(),e.blockquote=p(e.blockquote).replace("paragraph",e.paragraph).getRegex(),e.normal=g({},e),e.gfm=g({},e.normal,{nptable:/^ *([^|\n ].*\|.*)\n *([-:]+ *\|[-| :]*)(?:\n((?:.*[^>\n ].*(?:\n|$))*)\n*|$)/,table:/^ *\|(.+)\n *\|?( *[-:]+[-| :]*)(?:\n((?: *[^>\n ].*(?:\n|$))*)\n*|$)/}),e.pedantic=g({},e.normal,{html:p("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",e._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:y,paragraph:p(e.normal._paragraph).replace("hr",e.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",e.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),s.rules=e,s.lex=function(t,e){return new s(e).lex(t)},s.prototype.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(t,!0)},s.prototype.token=function(t,n){var r,s,i,a,o,c,l,u,d,p,m,f,x,y,g,k;for(t=t.replace(/^ +$/gm,"");t;)if((i=this.rules.newline.exec(t))&&(t=t.substring(i[0].length),i[0].length>1&&this.tokens.push({type:"space"})),i=this.rules.code.exec(t)){var _=this.tokens[this.tokens.length-1];t=t.substring(i[0].length),_&&"paragraph"===_.type?_.text+="\n"+i[0].trimRight():(i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?i:v(i,"\n")}))}else if(i=this.rules.fences.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"code",lang:i[2]?i[2].trim():i[2],text:i[3]||""});else if(i=this.rules.heading.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if((i=this.rules.nptable.exec(t))&&(c={type:"table",header:b(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===c.align.length){for(t=t.substring(i[0].length),m=0;m<c.align.length;m++)/^ *-+: *$/.test(c.align[m])?c.align[m]="right":/^ *:-+: *$/.test(c.align[m])?c.align[m]="center":/^ *:-+ *$/.test(c.align[m])?c.align[m]="left":c.align[m]=null;for(m=0;m<c.cells.length;m++)c.cells[m]=b(c.cells[m],c.header.length);this.tokens.push(c)}else if(i=this.rules.hr.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.blockquote.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,n),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(t)){for(t=t.substring(i[0].length),l={type:"list_start",ordered:y=(a=i[2]).length>1,start:y?+a:"",loose:!1},this.tokens.push(l),u=[],r=!1,x=(i=i[0].match(this.rules.item)).length,m=0;m<x;m++)p=(c=i[m]).length,~(c=c.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(p-=c.length,c=this.options.pedantic?c.replace(/^ {1,4}/gm,""):c.replace(new RegExp("^ {1,"+p+"}","gm"),"")),m!==x-1&&(o=e.bullet.exec(i[m+1])[0],(a.length>1?1===o.length:o.length>1||this.options.smartLists&&o!==a)&&(t=i.slice(m+1).join("\n")+t,m=x-1)),s=r||/\n\n(?!\s*$)/.test(c),m!==x-1&&(r="\n"===c.charAt(c.length-1),s||(s=r)),s&&(l.loose=!0),k=void 0,(g=/^\[[ xX]\] /.test(c))&&(k=" "!==c[1],c=c.replace(/^\[[ xX]\] +/,"")),d={type:"list_item_start",task:g,checked:k,loose:s},u.push(d),this.tokens.push(d),this.token(c,!1),this.tokens.push({type:"list_item_end"});if(l.loose)for(x=u.length,m=0;m<x;m++)u[m].loose=!0;this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(t))t=t.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):h(i[0]):i[0]});else if(n&&(i=this.rules.def.exec(t)))t=t.substring(i[0].length),i[3]&&(i[3]=i[3].substring(1,i[3].length-1)),f=i[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[f]||(this.tokens.links[f]={href:i[2],title:i[3]});else if((i=this.rules.table.exec(t))&&(c={type:"table",header:b(i[1].replace(/^ *| *\| *$/g,"")),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3]?i[3].replace(/\n$/,"").split("\n"):[]}).header.length===c.align.length){for(t=t.substring(i[0].length),m=0;m<c.align.length;m++)/^ *-+: *$/.test(c.align[m])?c.align[m]="right":/^ *:-+: *$/.test(c.align[m])?c.align[m]="center":/^ *:-+ *$/.test(c.align[m])?c.align[m]="left":c.align[m]=null;for(m=0;m<c.cells.length;m++)c.cells[m]=b(c.cells[m].replace(/^ *\| *| *\| *$/g,""),c.header.length);this.tokens.push(c)}else if(i=this.rules.lheading.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2].charAt(0)?1:2,text:i[1]});else if(n&&(i=this.rules.paragraph.exec(t)))t=t.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(t))t=t.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0));return this.tokens};var i={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:y,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:y,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};function a(t,e){if(this.options=e||w.defaults,this.links=t,this.rules=i.normal,this.renderer=this.options.renderer||new o,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=i.pedantic:this.options.gfm&&(this.options.breaks?this.rules=i.breaks:this.rules=i.gfm)}function o(t){this.options=t||w.defaults}function c(){}function l(t){this.tokens=[],this.token=null,this.options=t||w.defaults,this.options.renderer=this.options.renderer||new o,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new u}function u(){this.seen={}}function h(t,e){if(e){if(h.escapeTest.test(t))return t.replace(h.escapeReplace,function(t){return h.replacements[t]})}else if(h.escapeTestNoEncode.test(t))return t.replace(h.escapeReplaceNoEncode,function(t){return h.replacements[t]});return t}function d(t){return t.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}function p(t,e){return t=t.source||t,e=e||"",{replace:function(e,n){return n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),t=t.replace(e,n),this},getRegex:function(){return new RegExp(t,e)}}}function m(t,e,n){if(t){try{var r=decodeURIComponent(d(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}e&&!x.test(n)&&(n=function(t,e){f[" "+t]||(/^[^:]+:\/*[^/]*$/.test(t)?f[" "+t]=t+"/":f[" "+t]=v(t,"/",!0));return t=f[" "+t],"//"===e.slice(0,2)?t.replace(/:[\s\S]*/,":")+e:"/"===e.charAt(0)?t.replace(/(:\/*[^/]*)[\s\S]*/,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(t){return null}return n}i._punctuation="!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~",i.em=p(i.em).replace(/punctuation/g,i._punctuation).getRegex(),i._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,i._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,i._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,i.autolink=p(i.autolink).replace("scheme",i._scheme).replace("email",i._email).getRegex(),i._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,i.tag=p(i.tag).replace("comment",e._comment).replace("attribute",i._attribute).getRegex(),i._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,i._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,i._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,i.link=p(i.link).replace("label",i._label).replace("href",i._href).replace("title",i._title).getRegex(),i.reflink=p(i.reflink).replace("label",i._label).getRegex(),i.normal=g({},i),i.pedantic=g({},i.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:p(/^!?\[(label)\]\((.*?)\)/).replace("label",i._label).getRegex(),reflink:p(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",i._label).getRegex()}),i.gfm=g({},i.normal,{escape:p(i.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),i.gfm.url=p(i.gfm.url,"i").replace("email",i.gfm._extended_email).getRegex(),i.breaks=g({},i.gfm,{br:p(i.br).replace("{2,}","*").getRegex(),text:p(i.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),a.rules=i,a.output=function(t,e,n){return new a(e,n).output(t)},a.prototype.output=function(t){for(var e,n,r,s,i,o,c="";t;)if(i=this.rules.escape.exec(t))t=t.substring(i[0].length),c+=h(i[1]);else if(i=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.inRawBlock=!1),t=t.substring(i[0].length),c+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):h(i[0]):i[0];else if(i=this.rules.link.exec(t)){var l=k(i[2],"()");if(l>-1){var u=4+i[1].length+l;i[2]=i[2].substring(0,l),i[0]=i[0].substring(0,u).trim(),i[3]=""}t=t.substring(i[0].length),this.inLink=!0,r=i[2],this.options.pedantic?(e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r))?(r=e[1],s=e[3]):s="":s=i[3]?i[3].slice(1,-1):"",r=r.trim().replace(/^<([\s\S]*)>$/,"$1"),c+=this.outputLink(i,{href:a.escapes(r),title:a.escapes(s)}),this.inLink=!1}else if((i=this.rules.reflink.exec(t))||(i=this.rules.nolink.exec(t))){if(t=t.substring(i[0].length),e=(i[2]||i[1]).replace(/\s+/g," "),!(e=this.links[e.toLowerCase()])||!e.href){c+=i[0].charAt(0),t=i[0].substring(1)+t;continue}this.inLink=!0,c+=this.outputLink(i,e),this.inLink=!1}else if(i=this.rules.strong.exec(t))t=t.substring(i[0].length),c+=this.renderer.strong(this.output(i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.em.exec(t))t=t.substring(i[0].length),c+=this.renderer.em(this.output(i[6]||i[5]||i[4]||i[3]||i[2]||i[1]));else if(i=this.rules.code.exec(t))t=t.substring(i[0].length),c+=this.renderer.codespan(h(i[2].trim(),!0));else if(i=this.rules.br.exec(t))t=t.substring(i[0].length),c+=this.renderer.br();else if(i=this.rules.del.exec(t))t=t.substring(i[0].length),c+=this.renderer.del(this.output(i[1]));else if(i=this.rules.autolink.exec(t))t=t.substring(i[0].length),r="@"===i[2]?"mailto:"+(n=h(this.mangle(i[1]))):n=h(i[1]),c+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(t))){if(i=this.rules.text.exec(t))t=t.substring(i[0].length),this.inRawBlock?c+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):h(i[0]):i[0]):c+=this.renderer.text(h(this.smartypants(i[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===i[2])r="mailto:"+(n=h(i[0]));else{do{o=i[0],i[0]=this.rules._backpedal.exec(i[0])[0]}while(o!==i[0]);n=h(i[0]),r="www."===i[1]?"http://"+n:n}t=t.substring(i[0].length),c+=this.renderer.link(r,null,n)}return c},a.escapes=function(t){return t?t.replace(a.rules._escapes,"$1"):t},a.prototype.outputLink=function(t,e){var n=e.href,r=e.title?h(e.title):null;return"!"!==t[0].charAt(0)?this.renderer.link(n,r,this.output(t[1])):this.renderer.image(n,r,h(t[1]))},a.prototype.smartypants=function(t){return this.options.smartypants?t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):t},a.prototype.mangle=function(t){if(!this.options.mangle)return t;for(var e,n="",r=t.length,s=0;s<r;s++)e=t.charCodeAt(s),Math.random()>.5&&(e="x"+e.toString(16)),n+="&#"+e+";";return n},o.prototype.code=function(t,e,n){var r=(e||"").match(/\S*/)[0];if(this.options.highlight){var s=this.options.highlight(t,r);null!=s&&s!==t&&(n=!0,t=s)}return r?'<pre><code class="'+this.options.langPrefix+h(r,!0)+'">'+(n?t:h(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:h(t,!0))+"</code></pre>"},o.prototype.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},o.prototype.html=function(t){return t},o.prototype.heading=function(t,e,n,r){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+r.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"},o.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},o.prototype.list=function(t,e,n){var r=e?"ol":"ul";return"<"+r+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+r+">\n"},o.prototype.listitem=function(t){return"<li>"+t+"</li>\n"},o.prototype.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},o.prototype.paragraph=function(t){return"<p>"+t+"</p>\n"},o.prototype.table=function(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"},o.prototype.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},o.prototype.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},o.prototype.strong=function(t){return"<strong>"+t+"</strong>"},o.prototype.em=function(t){return"<em>"+t+"</em>"},o.prototype.codespan=function(t){return"<code>"+t+"</code>"},o.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},o.prototype.del=function(t){return"<del>"+t+"</del>"},o.prototype.link=function(t,e,n){if(null===(t=m(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<a href="'+h(t)+'"';return e&&(r+=' title="'+e+'"'),r+=">"+n+"</a>"},o.prototype.image=function(t,e,n){if(null===(t=m(this.options.sanitize,this.options.baseUrl,t)))return n;var r='<img src="'+t+'" alt="'+n+'"';return e&&(r+=' title="'+e+'"'),r+=this.options.xhtml?"/>":">"},o.prototype.text=function(t){return t},c.prototype.strong=c.prototype.em=c.prototype.codespan=c.prototype.del=c.prototype.text=function(t){return t},c.prototype.link=c.prototype.image=function(t,e,n){return""+n},c.prototype.br=function(){return""},l.parse=function(t,e){return new l(e).parse(t)},l.prototype.parse=function(t){this.inline=new a(t.links,this.options),this.inlineText=new a(t.links,g({},this.options,{renderer:new c})),this.tokens=t.reverse();for(var e="";this.next();)e+=this.tok();return e},l.prototype.next=function(){return this.token=this.tokens.pop(),this.token},l.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},l.prototype.parseText=function(){for(var t=this.token.text;"text"===this.peek().type;)t+="\n"+this.next().text;return this.inline.output(t)},l.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,d(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var t,e,n,r,s="",i="";for(n="",t=0;t<this.token.header.length;t++)n+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(s+=this.renderer.tablerow(n),t=0;t<this.token.cells.length;t++){for(e=this.token.cells[t],n="",r=0;r<e.length;r++)n+=this.renderer.tablecell(this.inline.output(e[r]),{header:!1,align:this.token.align[r]});i+=this.renderer.tablerow(n)}return this.renderer.table(s,i);case"blockquote_start":for(i="";"blockquote_end"!==this.next().type;)i+=this.tok();return this.renderer.blockquote(i);case"list_start":i="";for(var a=this.token.ordered,o=this.token.start;"list_end"!==this.next().type;)i+=this.tok();return this.renderer.list(i,a,o);case"list_item_start":i="";var c=this.token.loose,l=this.token.checked,u=this.token.task;for(this.token.task&&(i+=this.renderer.checkbox(l));"list_item_end"!==this.next().type;)i+=c||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(i,u,l);case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:var h='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(h);console.log(h)}},u.prototype.slug=function(t){var e=t.toLowerCase().trim().replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(e)){var n=e;do{this.seen[n]++,e=n+"-"+this.seen[n]}while(this.seen.hasOwnProperty(e))}return this.seen[e]=0,e},h.escapeTest=/[&<>"']/,h.escapeReplace=/[&<>"']/g,h.replacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h.escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,h.escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g;var f={},x=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function y(){}function g(t){for(var e,n,r=1;r<arguments.length;r++)for(n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}function b(t,e){var n=t.replace(/\|/g,function(t,e,n){for(var r=!1,s=e;--s>=0&&"\\"===n[s];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function v(t,e,n){if(0===t.length)return"";for(var r=0;r<t.length;){var s=t.charAt(t.length-r-1);if(s!==e||n){if(s===e||!n)break;r++}else r++}return t.substr(0,t.length-r)}function k(t,e){if(-1===t.indexOf(e[1]))return-1;for(var n=0,r=0;r<t.length;r++)if("\\"===t[r])r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&--n<0)return r;return-1}function _(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function w(t,e,n){if(void 0===t||null===t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(n||"function"==typeof e){n||(n=e,e=null),_(e=g({},w.defaults,e||{}));var r,i,a=e.highlight,o=0;try{r=s.lex(t,e)}catch(t){return n(t)}i=r.length;var c=function(t){if(t)return e.highlight=a,n(t);var s;try{s=l.parse(r,e)}catch(e){t=e}return e.highlight=a,t?n(t):n(null,s)};if(!a||a.length<3)return c();if(delete e.highlight,!i)return c();for(;o<r.length;o++)!function(t){"code"!==t.type?--i||c():a(t.text,t.lang,function(e,n){return e?c(e):null==n||n===t.text?--i||c():(t.text=n,t.escaped=!0,void(--i||c()))})}(r[o])}else try{return e&&(e=g({},w.defaults,e)),_(e),l.parse(s.lex(t,e),e)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",(e||w.defaults).silent)return"<p>An error occurred:</p><pre>"+h(t.message+"",!0)+"</pre>";throw t}}y.exec=y,w.options=w.setOptions=function(t){return g(w.defaults,t),w},w.getDefaults=function(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:new o,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}},w.defaults=w.getDefaults(),w.Parser=l,w.parser=l.parse,w.Renderer=o,w.TextRenderer=c,w.Lexer=s,w.lexer=s.lex,w.InlineLexer=a,w.inlineLexer=a.output,w.Slugger=u,w.parse=w,void 0!==n&&"object"===(void 0===r?"undefined":_typeof(r))?n.exports=w:"function"==typeof define&&define.amd?define(function(){return w}):t.marked=w}(this||("undefined"!=typeof window?window:t))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],xss:[function(t,e,n){var r=t("./default"),s=t("./parser"),i=t("./xss");for(var a in(n=e.exports=function(t,e){return new i(e).process(t)}).FilterXSS=i,r)n[a]=r[a];for(var a in s)n[a]=s[a];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},{"./default":6,"./parser":7,"./xss":9}]},{},[]),r=!0;"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)&&(exports.BEMHTML=e({xss:n("xss"),marked:n("marked")}),r=!1),"object"===("undefined"==typeof modules?"undefined":_typeof(modules))&&(modules.define("BEMHTML",[],function(t){t(e({xss:n("xss"),marked:n("marked")}))}),r=!1),r&&(BEMHTML=e({xss:n("xss"),marked:n("marked")}),t.BEMHTML=BEMHTML)}("undefined"!=typeof window?window:"undefined"!=typeof global?global:this);
var _slicedToArray=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,o=!1,s=void 0;try{for(var r,a=t[Symbol.iterator]();!(n=(r=a.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){o=!0,s=t}finally{try{!n&&a.return&&a.return()}finally{if(o)throw s}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}!function(t){var e=function(){return"_"}.toString().indexOf("_")>-1,i=function(){},n=Object.create||function(t){var e=function(){};return e.prototype=t,new e},o=Object.keys,s=t.extend,r=Array.isArray,a=t.isFunction,c=!0,l={toString:""};for(var u in l)l.hasOwnProperty(u)&&(c=!1);var h=c?["toString","valueOf"]:null;function d(i,n,s){for(var r,l,u=function(t){var e=o(t);if(c)for(var i,n=0;i=h[n++];)t.hasOwnProperty(i)&&e.push(i);return e}(s),d=0,p=u.length;d<p;)"__self"!==(r=u[d++])&&(l=s[r],a(l)&&(!e||l.toString().indexOf(".__base")>-1)?n[r]=function(e,o){var s=function t(){var e=this.__base;this.__base=t.__base;var i=o.apply(this,arguments);return this.__base=e,i};return s.__base=i[e]||("__constructor"===e?n.__self.__parent:t.noop),s}(r,l):n[r]=l)}function p(e,i){for(var n,o=1;n=e[o++];)i?a(n)?t.inheritSelf(i,n.prototype,n):t.inheritSelf(i,n):i=a(n)?t.inherit(e[0],n.prototype,n):t.inherit(e[0],n);return i||e[0]}t.inherit=function(){var t=arguments,e=r(t[0]),o=e||a(t[0]),c=o?e?p(t[0]):t[0]:i,l=t[o?1:0]||{},u=t[o?2:1],h=l.__constructor||o&&c.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:o?function(){return c.apply(this,arguments)}:function(){};if(!o)return h.prototype=l,h.prototype.__self=h.prototype.constructor=h,s(h,u);s(h,c),h.__parent=c;var f=c.prototype,m=h.prototype=n(f);return m.__self=m.constructor=h,l&&d(f,m,l),u&&d(c,h,u),h},t.inheritSelf=function(){var t=arguments,e=r(t[0])?p(t[0],t[0][0]):t[0],i=t[1],n=t[2],o=e.prototype;return i&&d(o,o,i),n&&d(e,e,n),e},t.inherit.self=t.inheritSelf}(jQuery),function(t){var e=0,i="__"+Number(new Date),n=function(){return"uniq"+ ++e};t.identify=function(t,e){if(!t)return n();var o="uniqueID"in t?"uniqueID":i;return e||o in t?t[o]:t[o]=n()}}(jQuery),function(t){var e="__"+Number(new Date)+"storage",i=function(e,i){return t.identify(e)+(i?t.identify(i):"")},n={buildEventName:function(t){return t},on:function(n,o,s,r,a){if("string"==typeof n){t.isFunction(o)&&(r=s,s=o,o=void 0);for(var c,l=i(s,r),u=this[e]||(this[e]={}),h=n.split(" "),d=0;n=h[d++];)if(!(l in(c=u[n=this.buildEventName(n)]||(u[n]={ids:{},list:{}})).ids)){var p=c.list,f={fn:s,data:o,ctx:r,special:a};p.last?(p.last.next=f,f.prev=p.last):p.first=f,c.ids[l]=p.last=f}}else{var m=this;t.each(n,function(t,e){m.on(t,e,o,a)})}return this},onFirst:function(t,e,i,n){return this.on(t,e,i,n,{one:!0})},un:function(n,o,s){if("string"==typeof n||void 0===n){var r=this[e];if(r)if(n){for(var a,c=n.split(" "),l=0;n=c[l++];)if(a=r[n=this.buildEventName(n)])if(o){var u=i(o,s),h=a.ids;if(u in h){var d=a.list,p=h[u],f=p.prev,m=p.next;f?f.next=m:p===d.first&&(d.first=m),m?m.prev=f:p===d.last&&(d.last=f),delete h[u]}}else delete this[e][n]}else delete this[e]}else{var _=this;s=o,t.each(n,function(t,e){_.un(t,e,s)})}return this},trigger:function(i,n){var o=this[e],s="string"==typeof i,r=s?i:i.type,a=this.buildEventName(r);if(s||(i.type=a,i.target||(i.target=this)),o&&(o=o[a])){var c,l=o.list.first;for(l&&s&&((i=t.Event(a)).target=this);l;)i.data=l.data,void 0!==(c=l.fn.call(l.ctx||this,i,n))&&(i.result=c,!1===c&&(i.preventDefault(),i.stopPropagation())),l.special&&l.special.one&&this.un(r,l.fn,l.ctx),l=l.next}return this}};t.observable=t.inherit(n,n)}(jQuery),function(){var t=Array.prototype.slice;Function.prototype.bind||(Function.prototype.bind=function(e){var i=this,n=t.call(arguments,1);return function(){return i.apply(e,n.concat(t.call(arguments)))}})}(),function(t,e){var i=[],n=t.inherit,o=t.isFunction,s=Function.prototype.call.bind(Object.prototype.hasOwnProperty),r={},a={};function c(t,e,i){return(t?"__elem_"+t:"")+"__mod"+(e?"_"+e:"")+(i?"_"+i:"")}function l(t,e,i){var n,r,a;if(o(t))e[c(i,"*","*")]=t;else for(n in t)if(s(t,n))if(a=t[n],o(a))e[c(i,n,"*")]=a;else for(r in a)s(a,r)&&(e[c(i,n,r)]=a[r])}function u(t){var e;if(t.onSetMod&&(l(t.onSetMod,t),delete t.onSetMod),t.onElemSetMod){for(e in t.onElemSetMod)s(t.onElemSetMod,e)&&l(t.onElemSetMod[e],t,e);delete t.onElemSetMod}}this.BEM=n(t.observable,{__constructor:function(t,e,i){var n=this;n._modCache=t||{},n._processingMods={},n._params=e,n.params=null,!1!==i?n._init():n.afterCurrentEvent(function(){n._init()})},_init:function(){return this._initing||this.hasMod("js","inited")||(this._initing=!0,this.params||(this.params=t.extend(this.getDefaultParams(),this._params),delete this._params),this.setMod("js","inited"),delete this._initing,this.hasMod("js","inited")&&this.trigger("init")),this},changeThis:function(t,e){return t.bind(e||this)},afterCurrentEvent:function(t,e){this.__self.afterCurrentEvent(t.bind(e||this))},on:function(e,i,n,o){return"object"===(void 0===e?"undefined":_typeof(e))&&(t.isFunction(i)||t.isFunction(n))&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,i,n){return"object"===(void 0===e?"undefined":_typeof(e))&&t.isFunction(i)&&(e=this.__self._buildModEventName(e)),this.__base.apply(this,arguments)},trigger:function(e,i){var n=!0;return"object"!==(void 0===e?"undefined":_typeof(e))||e instanceof t.Event||(n="js"===e.modName||this.hasMod("js"),e=this.__self._buildModEventName(e)),n&&(this.__base(e=this.buildEvent(e),i),this._trigger(e,i)),this},_trigger:function(t,e){this.__self.trigger(t,e)},buildEvent:function(e){return"string"==typeof e&&(e=t.Event(e)),e.block=this,e},hasMod:function(t,e,i){var n=arguments.length,o=!1;1==n?(i="",e=t,t=void 0,o=!0):2==n&&("string"==typeof t?(i=e,e=t,t=void 0):(i="",o=!0));var s=this.getMod(t,e)===i;return o?!s:s},getMod:function(t,e){var i=void 0===t?"undefined":_typeof(t);if("string"===i||"undefined"===i){e=t||e;var n=this._modCache;return e in n?n[e]:n[e]=this._extractModVal(e)}return this._getElemMod(e,t)},_getElemMod:function(t,e,i){return this._extractModVal(t,e,i)},getMods:function(t){var e=t&&"string"!=typeof t,i=this._modCache,n=[].slice.call(arguments,e?1:0);return n.length?n.reduce(function(t,e){return e in i&&(t[e]=i[e]),t},{}):i},setMod:function(e,i,n){void 0===n&&("string"==typeof e?(n=void 0===i||i,i=e,e=void 0):n=!0);var o=this;if(!e||e[0]){!1===n||null===n?n="":!0!==n&&(n=n.toString());var s=(e&&e[0]?t.identify(e[0]):"")+"_"+i;if(this._processingMods[s])return o;var r,a=e?o._getElemMod(i,e,r=o.__self._extractElemNameFrom(e)):o.getMod(i);if(a===n)return o;this._processingMods[s]=!0;var c=!0,l=[i,n,a];e&&l.unshift(e),[["*","*"],[i,"*"],[i,n]].forEach(function(t){c=!1!==o._callModFn(r,t[0],t[1],l)&&c}),!e&&c&&(o._modCache[i]=n),c&&o._afterSetMod(i,n,a,e,r),delete this._processingMods[s]}return o},_afterSetMod:function(t,e,i,n,o){var s={modName:t,modVal:e,oldModVal:i};n&&(s.elem=n),this.trigger({modName:t,modVal:"*",elem:o},s).trigger({modName:t,modVal:e,elem:o},s)},toggleMod:function(t,e,i,n,o){"string"==typeof t&&(o=n,n=i,i=e,e=t,t=void 0),void 0===n?n="":"boolean"==typeof n&&(o=n,n="");var s=this.getMod(t,e);return(s==i||s==n)&&this.setMod(t,e,"boolean"==typeof o?o?i:n:this.hasMod(t,e,i)?n:i),this},delMod:function(t,e){return e||(e=t,t=void 0),this.setMod(t,e,"")},_callModFn:function(t,e,i,n){var o=c(t,e,i);return this[o]?this[o].apply(this,n):void 0},_extractModVal:function(t,e){return""},channel:function(t,e){return this.__self.channel(t,e)},getDefaultParams:function(){return{}},del:function(t){var e=[].slice.call(arguments);return"string"==typeof t&&e.unshift(this),this.__self.del.apply(this.__self,e),this},destruct:function(){var t={modName:"js",modVal:"",oldModVal:"inited"};this.trigger({modName:t.modName,modVal:t.modVal},t)}},t.extend(this.BEM,{_name:"i-bem",blocks:r,decl:function(e,i,s){"string"==typeof e?e={block:e}:e.name&&(e.block=e.name),u(i||(i={}));var a,c,l=r[e.baseBlock||e.block]||this;if(e.modName){var h=(a=e.modName,(c=e.modVal)?Array.isArray(c)?function(t){for(var e=0,i=c.length;e<i;)if(t.hasMod(a,c[e++]))return!0;return!1}:function(t){return t.hasMod(a,c)}:function(t){return t.hasMod(a)});t.each(i,function(t,e){o(e)&&(i[t]=function(){var n;if(h(this))n=e;else{var o=l.prototype[t];o&&o!==i[t]&&(n=this.__base)}return n?n.apply(this,arguments):void 0})})}if(s&&"boolean"==typeof s.live){var d=s.live;s.live=function(){return d}}var p,f=l;return e.baseMix&&(f=[f],e.baseMix.forEach(function(t){f.push(r[t])})),e.block==l._name?(p=n.self(f,i,s))._processLive(!0):((p=r[e.block]=n(f,i,s))._name=e.block,delete p._liveInitable),p},declMix:function(t,e,i){return u(e||(e={})),t=r[t]=n(e,i)},_processLive:function(t){return!1},create:function(t,e){return"string"==typeof t&&(t={block:t}),new r[t.block](t.mods,e)},getName:function(){return this._name},on:function(e,i,n,o){return"object"===(void 0===e?"undefined":_typeof(e))&&(t.isFunction(i)||t.isFunction(n))&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},un:function(e,i,n){return"object"===(void 0===e?"undefined":_typeof(e))&&t.isFunction(i)&&(e=this._buildModEventName(e)),this.__base.apply(this,arguments)},_buildModEventName:function(t){var e="_"+t.modName+"_"+(!1===t.modVal?"":t.modVal);return t.elem&&(e="__"+t.elem+e),e},_extractElemNameFrom:function(t){},afterCurrentEvent:function(t,e){1==i.push({fn:t,ctx:e})&&setTimeout(this._runAfterCurrentEventFns,0)},_runAfterCurrentEventFns:function(){var t=i.length;t&&i.splice(0,t).forEach(function(t){t.fn.call(t.ctx||this)},this)},changeThis:function(t,e){return t.bind(e||this)},del:function(t){var e="string"==typeof t,i=e?0:1,n=arguments.length;for(e&&(t=this);i<n;)delete t[arguments[i++]];return this},channel:function(e,i){if("boolean"==typeof e&&(i=e,e=void 0),e||(e="default"),!i)return a[e]||(a[e]=new t.observable);a[e]&&(a[e].un(),delete a[e])}}))}(jQuery),function(t,e,i){var n,o="_",s="__";function r(t){var e=void 0===t?"undefined":_typeof(t);return"string"===e||"number"===e||"boolean"===e}function a(t,e,i){null!=e&&!1!==e&&(i.push(o,t),!0!==e&&i.push(o,e))}function c(t,e,i,n){n.push(t),a(e,i,n)}function l(t,e,i,o,r){c(t,n,n,r),r.push(s,e),a(i,o,r)}t.INTERNAL={NAME_PATTERN:"[a-zA-Z0-9-]+",MOD_DELIM:o,ELEM_DELIM:s,buildModPostfix:function(t,e,i){var n=i||[];return a(t,e,n),i?n:n.join("")},buildClass:function(t,e,i,o,s){if(r(i)?r(o)||(s=o,o=i,i=e,e=n):void 0!==i?(s=i,i=n):e&&"string"!=typeof e&&(s=e,e=n),!e&&void 0===i&&!s)return t;var a=s||[];return e?l(t,e,i,o,a):c(t,i,o,a),s?a:a.join("")},buildClasses:function(t,i,n,o){i&&"string"!=typeof i&&(o=n,n=i,i=void 0);var s=o||[];return i?l(t,i,void 0,void 0,s):c(t,void 0,void 0,s),n&&e.each(n,function(e,n){n&&(s.push(" "),i?l(t,i,e,n,s):c(t,e,n,s))}),o?s:s.join("")}}}(BEM,jQuery),function(t,e,i){var n=e(window),o=e(document),s={},r={},a={},c={},l={},u=t.blocks,h=t.INTERNAL,d=h.NAME_PATTERN,p=h.MOD_DELIM,f=h.ELEM_DELIM,m=RegExp("[^"+p+"]"+p+"("+d+")(?:"+p+"("+d+"))?$"),_=h.buildModPostfix,g=h.buildClass,v=Array.prototype.slice,b=Array.prototype.reverse;function y(t,n,o,a,c){"boolean"==typeof o&&(c=a,a=o,o=i);var l=n[0];if(!l||l.dataset===i||"react"!==l.dataset.lego){var h=(o=M(o||k(l)[t],l,t)).uniqId;if(r[h])return r[h]._init();s[h]=s[h]?s[h].add(n):n;var d=l.parentNode;d&&11!==d.nodeType||e.unique(s[h]);var p=u[t]||w.decl(t,{},{live:!0});if(!(p._liveInitable=Boolean(p._processLive()))||a||!1===o.live){a&&n.addClass("i-bem");var f=new p(s[h],o,Boolean(a));return delete s[h],c&&c.apply(f,v.call(arguments,4)),f}}}function M(t,i,n,o){(t||(t={})).uniqId||(t.uniqId=(t.id?n+"-id-"+t.id:e.identify())+(o||e.identify()));var s=e.identify(i),r=a[s]||(a[s]={});return r[n]||(r[n]=t),t}function E(t,e,i){var n=t.find(e);return i?n:n.add(t.filter(e))}function k(t){var i=e.identify(t);return a[i]||(a[i]=D(t))}function D(t){var e,i=t.getAttribute("data-bem");return i?JSON.parse(i):e?e():{}}function B(t){delete a[e.identify(t)]}function C(t,e){1===t.domElem.length?t.destruct(!0):t.domElem=t.domElem.not(e)}e.fn.bem=function(t,e){return y(t,this,e,!0)};var w=t.DOM=t.decl("i-bem__dom",{__constructor:function(t,i,n){this.domElem=t,this._eventNameCache={},this._elemCache={},this._blockInsideCache={},r[this._uniqId=i.uniqId||e.identify(this)]=this,this._needSpecialUnbind=!1,this.__base(null,i,n)},findBlocksInside:function(t,e){return this._findBlocks("find",t,e)},findBlockInside:function(t,e){var i=this._buildBlockCacheKey(t,e),n=this._findBlocks("find",t,e,!0);return this._blockInsideCache[i]=n,n},blockInside:function(t,e){var i=this._buildBlockCacheKey(t,e),n=this._blockInsideCache[i];return n||(n=this.findBlockInside(t,e)),n},dropBlockInsideCache:function(t,e){t||e?this._blockInsideCache[this._buildBlockCacheKey(t,e)]=null:this._blockInsideCache={}},_buildBlockCacheKey:function(t,e){e||(e=t,t="");var i="string"==typeof e?e:g(e.block,e.modName,e.modVal);return("string"==typeof t?t:t.__bemElemName)+":"+i},findBlocksOutside:function(t,e){return this._findBlocks("parents",t,e)},findBlockOutside:function(t,e){return this._findBlocks("closest",t,e)[0]||null},findBlocksOn:function(t,e){return this._findBlocks("",t,e)},findBlockOn:function(t,e){return this._findBlocks("",t,e,!0)},_findBlocks:function(t,n,o,s){if(!this.domElem)return s?null:[];o||(o=n,n=i);var r=n?"string"==typeof n?this.findElem(n):n:this.domElem,a="string"==typeof o,c=a?o:o.block||o.blockName,l="."+(a?c:g(c,o.modName,o.modVal))+(s?":first":""),u=r.filter(l);if(t&&(u=u.add(r[t](l))),s)return u[0]?y(c,u.eq(0),!0):null;var h=[],d={};return e.each(u,function(t,i){var n=y(c,e(i),!0);d[n._uniqId]||(d[n._uniqId]=!0,h.push(n))}),h},bindToDomElem:function(t,n,o,s){e.isFunction(o)&&(s=o,o=i);var r=this,a=function(t){return(t.data||(t.data={})).domElem=e(this),s.apply(r,arguments)};return s?t.bind(r._buildEventName(n),o,(a.guid=s.guid=s.guid||e.guid++,a)):e.each(n,function(e,i){r.bindToDomElem(t,e,o,i)}),r},bindToDoc:function(t,e,i){return this._needSpecialUnbind=!0,this.bindToDomElem(o,t,e,i)},bindToWin:function(t,o,s){return e.isFunction(o)&&(s=o,o=i),this._needSpecialUnbind=!0,this.bindToDomElem(n,t,o,s)},bindTo:function(t,i,n,o){switch(arguments.length){case 3:e.isFunction(n)&&(o=n,"object"===(void 0===i?"undefined":_typeof(i))&&(n=i,i=t,t=this.domElem));break;case 2:e.isFunction(i)?(o=i,i=t,t=this.domElem):"string"==typeof t||t instanceof e||(n=i,i=t,t=this.domElem);break;case 1:i=t,t=this.domElem}return"string"==typeof t&&(t=this.elem(t)),this.bindToDomElem(t,i,n,o)},unbindFromDomElem:function(t,e,i){return t.unbind(this._buildEventName(e),i),this},unbindFromDoc:function(t,e){return this.unbindFromDomElem(o,t,e)},unbindFromWin:function(t,e){return this.unbindFromDomElem(n,t,e)},unbindFrom:function(t,i,n){var o=arguments.length;return 1===o?(i=t,t=this.domElem):2===o&&e.isFunction(i)?(n=i,i=t,t=this.domElem):"string"==typeof t&&(t=this.elem(t)),this.unbindFromDomElem(t,i,n)},_buildEventName:function(t){var e=this;return t.indexOf(" ")>1?t.split(" ").map(function(t){return e._buildOneEventName(t)}).join(" "):e._buildOneEventName(t)},_buildOneEventName:function(t){var e=this._eventNameCache;if(t in e)return e[t];var i="."+this._uniqId;if(-1===t.indexOf("."))return e[t]=t+i,e[t];var n=".bem_"+this.__self._name;return e[t]=t.split(".").map(function(t,e){return 0===e?t+n:n+"_"+t}).join("")+i,e[t]},_trigger:function(t,e){this.__base.apply(this,arguments),this._ctxTrigger(t,e)},_ctxTrigger:function(t,i){var n=this,o=c[n.__self._buildCtxEventName(t.type)],s={};o&&n.domElem.each(function(){for(var r=this,a=o.counter;r&&a;){var c=e.identify(r,!0);if(c){if(s[c])break;var l=o.ctxs[c];l&&(e.each(l,function(e,o){o.fn.call(o.ctx||n,t,i)}),a--),s[c]=!0}r=r.parentNode}})},getMods:function(t){var e=t&&"string"!=typeof t,n=this._modCache,o=[].slice.call(arguments,e?1:0),s=this._extractMods(o,e?t:i);return e||(o.length?o.forEach(function(t){n[t]=s[t]}):n=s),s},setMod:function(t,i,n){if(t&&void 0!==n&&t.length>1){var o=this;return t.each(function(){var s=e(this);s.__bemElemName=t.__bemElemName,o.setMod(s,i,n)}),o}return this.__base(t,i,n)},_extractModVal:function(t,e,i){var n,o=(e||this.domElem)[0];return o&&(n=o.getAttribute("class").match(this.__self._buildModValRE(t,i||e))),n?n[2]||!0:""},_extractMods:function(t,e){var i={},n=!t.length,o=0;return((e||this.domElem).eq(0).attr("class").match(this.__self._buildModValRE("("+(n?d:t.join("|"))+")",e,"g"))||[]).forEach(function(t){var e=t.match(m);i[e[1]]=e[2]||!0,++o}),o<t.length&&t.forEach(function(t){t in i||(i[t]="")}),i},_afterSetMod:function(t,i,n,o,s){if(this._isDestructing)return this.__base.apply(this,arguments);var r=this.__self,a=r._buildModClassPrefix(t,s),c=r._buildModValRE(t,s,"g"),l=""===i||!1===i;(o||this.domElem).each(function(){var t=e(this),o=t.attr("class"),s=a;!0!==i&&(s+=p+i),(!0===n?c.test(o):(" "+o).indexOf(" "+a+p)>-1)?t.attr("class",o.replace(c,l?"":"$1"+s)):l||t.addClass(s)}),s&&this.dropElemCache(s,t,n).dropElemCache(s,t,i),this.__base.apply(this,arguments)},findElem:function(t,e,i,n){arguments.length%2?(n=i,i=e,e=t,t=this.domElem):"string"==typeof t&&(t=this.findElem(t)),e=e.split(" ");var o=this.__self.getName(),s=_(i,n),r=[],a=e.map(function(t){return r.push("."+g(o,t,i,n)),t+s}),c=1===a.length,l=E(t,r.join(","));return t===this.domElem&&r.forEach(function(t,i){(this._elemCache[a[i]]=c?l:l.filter(t)).__bemElemName=e[i]},this),l},_elem:function(t,e,i){return this._elemCache[t+_(e,i)]||this.findElem(t,e,i)},elem:function(t,i,n){if(2===arguments.length&&(n=!0),i&&"string"!=typeof i)return i.__bemElemName=t,i;if(t.indexOf(" ")<0)return this._elem(t,i,n);var o=e([]);return t.split(" ").forEach(function(t){o=o.add(this._elem(t,i,n))},this),o},dropElemCache:function(t,e,i){if(t){var n=_(e,i);t.indexOf(" ")<0?delete this._elemCache[t+n]:t.split(" ").forEach(function(t){delete this._elemCache[t+n]},this)}else this._elemCache={};return this},elemParams:function(t){var e;return"string"==typeof t?(e=t,t=this.elem(t)):e=this.__self._extractElemNameFrom(t),D(t[0])[g(this.__self.getName(),e)]||{}},elemify:function(t,i){return(t=e(t)).__bemElemName=i,t},containsDomElem:function(t){var e=!1;return this.domElem.each(function(){return!(e=t.parents().andSelf().index(this)>-1)}),e},buildSelector:function(t,e,i){return this.__self.buildSelector(t,e,i)},destruct:function(t){var i=this.__self;this._isDestructing||(this._isDestructing=!0,this._needSpecialUnbind&&i.doc.add(i.win).unbind("."+this._uniqId),this.dropElemCache().domElem.each(function(t,i){var n=k(i);e.each(n,function(t,e){var n=r[e.uniqId];n?n._isDestructing||C(n,i):delete s[e.uniqId]}),B(i)}),t||this.domElem.remove(),this.__base(),delete r[this.un()._uniqId],delete this.domElem,delete this._elemCache)}},{scope:null,doc:o,win:n,html:e(document.documentElement),_processLive:function(t){var e=this._liveInitable;if("live"in this&&void 0===e^t){e=!1!==this.live();var i=this.getName(),n=this.live;this.live=function(){return this.getName()===i?e:n.apply(this,arguments)}}return e},init:function(t,i,n){!t||e.isFunction(t)?(n=i,i=t,t=o):"string"==typeof t&&(t=e(t));var s=e.identify();return E(t,".i-bem").each(function(){!function(t,i){var n=t[0];e.each(k(n),function(o,s){M(s,n,o,i);var a=r[s.uniqId];a?a.domElem.index(n)<0&&(a.domElem=a.domElem.add(t),e.extend(a._params,s)):y(o,t,s)})}(e(this),s)}),i&&this.afterCurrentEvent(function(){i.call(n||this,t)}),this._runAfterCurrentEventFns(),t},destruct:function(t,n,o){"boolean"!=typeof t&&(o=n,n=t,t=i),n&&(b.call(E(n,".i-bem",o)).each(function(t,i){var n=k(this);e.each(n,function(t,e){if(e.uniqId){var n=r[e.uniqId];n?C(n,i):delete s[e.uniqId]}}),B(this)}),t||(o?n.empty():n.remove()))},update:function(t,e,i,n){return this.destruct(t,!0),this.init(t.html(e),i,n)},replace:function(t,i){return this.destruct(!0,t),this.init(e(i).replaceAll(t))},append:function(t,i){return this.init(e(i).appendTo(t))},prepend:function(t,i){return this.init(e(i).prependTo(t))},before:function(t,i){return this.init(e(i).insertBefore(t))},after:function(t,i){return this.init(e(i).insertAfter(t))},_buildCtxEventName:function(t){return this._name+":"+t},_liveClassBind:function(t,i,n,s){var r=this;if(i.indexOf(" ")>-1)i.split(" ").forEach(function(e){r._liveClassBind(t,e,n,s)});else{var a=l[i],c=e.identify(n);a||(a=l[i]={},o.bind(i,r._liveClassTrigger.bind(r))),c in(a=a[t]||(a[t]={uniqIds:{},fns:[]})).uniqIds||(a.fns.push({uniqId:c,fn:r._buildLiveEventFn(n,s)}),a.uniqIds[c]=a.fns.length-1)}return this},_liveClassUnbind:function(t,i,n){var o=l[i];if(o)if(n){if(o=o[t]){var s=e.identify(n);if(s in o.uniqIds){var r=o.uniqIds[s],a=o.fns.length-1;for(o.fns.splice(r,1);r<a;)o.uniqIds[o.fns[r++].uniqId]=r-1;delete o.uniqIds[s]}}}else delete o[t];return this},_liveClassTrigger:function(t){var i=l[t.type];if(i){var n=t.target,o=Object.keys(i);do{for(var s,r=" "+n.className+" ",a=0;s=o[a++];)if(-1!==r.indexOf(" "+s+" ")){for(var c=!1,u=i[s].fns,h=0;h<u.length;h++)!1===u[h].fn.apply(e(n),arguments)&&(c=!0);if(c&&t.preventDefault(),c||t.isPropagationStopped())return;o.splice(--a,1)}}while(o.length&&(n=n.parentNode))}},_buildLiveEventFn:function(t,i){var n=this;return function(o){var s=[n._name,((o.data||(o.data={})).domElem=e(this)).closest(n.buildSelector()),!0],r=y.apply(null,i?s.concat([t,o]):s);if(r&&!i&&t)return t.apply(r,arguments)}},liveInitOnEvent:function(t,e,i){return this.liveBindTo(t,e,i,!0)},liveBindTo:function(t,n,o,s){n&&!e.isFunction(n)||(o=n,n=t,t=i),t&&"string"!=typeof t||(t={elem:t}),t.elemName&&(t.elem=t.elemName);var r=this;return t.elem&&t.elem.indexOf(" ")>0?(t.elem.split(" ").forEach(function(e){r._liveClassBind(g(r._name,e,t.modName,t.modVal),n,o,s)}),r):r._liveClassBind(g(r._name,t.elem,t.modName,t.modVal),n,o,s)},liveUnbindFrom:function(t,n,o){n&&!e.isFunction(n)||(o=n,n=t,t=i);var s=this;return t&&t.indexOf(" ")>1?(t.split(" ").forEach(function(t){s._liveClassUnbind(g(s._name,t),n,o)}),s):s._liveClassUnbind(g(s._name,t),n,o)},_liveInitOnBlockEvent:function(t,e,i,n){var o=this._name;return u[e].on(t,function(t){if(t.block.domElem){var e=arguments,s=t.block[n](o);i&&s.forEach(function(t){i.apply(t,e)})}}),this},liveInitOnBlockEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOn")},liveInitOnBlockInsideEvent:function(t,e,i){return this._liveInitOnBlockEvent(t,e,i,"findBlocksOutside")},on:function(t,e,i,n,o){return t.jquery?this._liveCtxBind(t,e,i,n,o):this.__base(t,e,i,n,o)},un:function(t,e,i,n){return t.jquery?this._liveCtxUnbind(t,e,i,n):this.__base(t,e,i)},liveCtxBind:function(t,e,i,n,o){return this._liveCtxBind(t,e,i,n,o)},_liveCtxBind:function(t,n,o,s,r){var a=this;if("object"===(void 0===n?"undefined":_typeof(n))&&(e.isFunction(o)||e.isFunction(s))&&(n=this._buildModEventName(n)),"string"==typeof n)if(e.isFunction(o)&&(r=s,s=o,o=i),n.indexOf(" ")>-1)n.split(" ").forEach(function(e){a._liveCtxBind(t,e,o,s,r)});else{var l=a._buildCtxEventName(n),u=c[l]||(c[l]={counter:0,ctxs:{}});t.each(function(){var t=e.identify(this),i=u.ctxs[t];i||(i=u.ctxs[t]={},++u.counter),i[e.identify(s)+(r?e.identify(r):"")]={fn:s,data:o,ctx:r}})}else e.each(n,function(e,i){a._liveCtxBind(t,e,i,o)});return a},liveCtxUnbind:function(t,e,i,n){return this._liveCtxUnbind(t,e,i,n)},_liveCtxUnbind:function(t,i,n,o){"object"===(void 0===i?"undefined":_typeof(i))&&e.isFunction(n)&&(i=this._buildModEventName(i));var s=c[i=this._buildCtxEventName(i)];return s&&(t.each(function(){var t,i=e.identify(this,!0);i&&(t=s.ctxs[i])&&(n&&delete t[e.identify(n)+(o?e.identify(o):"")],n&&!e.isEmptyObject(t)||(s.counter--,delete s.ctxs[i]))}),s.counter||delete c[i]),this},_extractElemNameFrom:function(t){if(t.__bemElemName)return t.__bemElemName;var e=t.eq(0).attr("class").match(this._buildElemNameRE());return e?e[1]:i},extractParams:D,_buildModClassPrefix:function(t,e){return this._name+(e?f+("string"==typeof e?e:this._extractElemNameFrom(e)):"")+p+t},_buildModValRE:function(t,e,i){return new RegExp("(\\s|^)"+this._buildModClassPrefix(t,e)+"(?:"+p+"("+d+"))?(?=\\s|$)",i)},_buildElemNameRE:function(){return new RegExp(this._name+f+"("+d+")(?:\\s|$)")},buildSelector:function(t,e,i){return"."+g(this._name,t,e,i)},getBlockByUniqId:function(t){return r[t]},getWindowSize:function(){return{width:n.width(),height:n.height()}}});e(function(){t.DOM.scope=e("body")})}(BEM,jQuery),function(t){var e=t(window),i=o(),n=s();function o(){return window.innerHeight|0+e.outerHeight()}function s(){return window.innerWidth|0+e.outerWidth()}(t.event.special.resize||(t.event.special.resize={})).preDispatch=function(t){var e=o(),r=s();if(n===r&&i===e)return!1;i=e,n=r}}(jQuery),jQuery.cookie=function(t,e,i){if(void 0===e){var n=null;if(document.cookie&&""!=document.cookie)for(var o=document.cookie.split(";"),s=0;s<o.length;s++){var r=jQuery.trim(o[s]);if(r.substring(0,t.length+1)==t+"="){n=decodeURIComponent(r.substring(t.length+1));break}}return n}i=i||{},null===e&&(e="",i.expires=-1);var a,c="";i.expires&&("number"==typeof i.expires||i.expires.toUTCString)&&("number"==typeof i.expires?(a=new Date).setTime(a.getTime()+24*i.expires*60*60*1e3):a=i.expires,c="; expires="+a.toUTCString());var l=i.path?"; path="+i.path:"",u=i.domain?"; domain="+i.domain:"",h=i.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(e),c,l,u,h].join("")},function(t){var e={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};function i(t,i){var n="";try{n=t(i)}catch(o){try{n=t(function(t){return t.replace(/%.{2}/g,function(t){return e[t]||t})}(i))}catch(t){n=i}}return n}jQuery.extend({decodeURI:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return i(decodeURI,t)}),decodeURIComponent:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return i(decodeURIComponent,t)})})}(),BEM.DOM.decl("i-global",{onSetMod:{js:{inited:function(){this.del(this.__self._params=$.extend({},this.params),"uniqId","name");var t=this.__self._params;t["passport-msg"]||(t["passport-msg"]=t.id),void 0===t["show-counters"]&&(t["show-counters"]=Math.round(100*Math.random())<=t["show-counters-percent"]),t.locale=t.lang,window.BEMHTML&&BEMHTML.apply({block:"i-global",params:t})}}},getDefaultParams:function(){return{id:"",login:this.__self.getCookie("yandex_login")&&$.cookie("yandex_login")||"",yandexuid:$.cookie("yandexuid"),lang:"ru",tld:"ru",retpath:encodeURI($.decodeURI(location.href)),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100}}},{param:function(t,e){if(void 0===e)return(this._params||{})[t];this._params&&(this._params[t]=e)},getCookie:function(t){var e=document.cookie;if(e.length<1)return!1;var i=e.indexOf(t+"=");if(-1===i)return!1;i+=t.length+1;var n=e.indexOf(";",i);return decodeURIComponent(-1===n?e.substring(i):e.substring(i,n))}}),function(t){t||(t=window.Lego={}),t.getCookie=function(t){var e=document.cookie;if(e.length<1)return!1;var i=e.indexOf(t+"=");if(-1===i)return!1;i+=t.length+1;var n=e.indexOf(";",i);return decodeURIComponent(-1===n?e.substring(i):e.substring(i,n))}}(window.Lego),function(t,e){e||(e=window.Lego={}),e.init||(e.init=function(i){return(i=e.params=t.extend({id:"",login:e.isSessionValid()&&e.getCookie("yandex_login")||"",yandexuid:e.getCookie("yandexuid"),locale:"ru",retpath:window.location.toString(),"passport-host":"https://passport.yandex.ru","pass-host":"https://pass.yandex.ru","passport-msg":i.id,"social-host":"https://social.yandex.ru","lego-path":"/lego","show-counters-percent":100},i,e.params))["show-counters"]=Math.round(100*Math.random())<=i["show-counters-percent"],BEM.blocks["i-global"]._params||t.extend(BEM.blocks["i-global"]._params={},i),i}),e.block||(e.block={}),e.blockInit||(e.blockInit=function(i,n){i=i||document,n=n||".g-js",t(i).find(n).each(function(){var i=t(this),n=i.data("bem")||(this.onclick?this.onclick():{}),o=n.name||"",s=e.block[o];s&&!i.data(o)&&(s.call(i,n),i.data(o,!0).addClass(o+"_js_inited"))})}),e.blockInitBinded||(e.blockInitBinded=Boolean(t(document).ready(function(){e.blockInit()})))}(jQuery,window.Lego),function(t,e){var i={};/msie|trident/i.test(e)?i.ie=parseInt(e.split(/msie|rv:/i)[1],10):-1!==e.indexOf("Opera")&&(i.opera=parseInt(e.split(/Version\//i)[1],10));var n,o={},s={};(n=e.match(/Windows\sPhone[^\d]*\s([\d.]+)/))?o.wp=n[1]:(n=e.match(/Android\s+([\d.]+)/))?o.android=n[1]:e.match(/\sHTC[\s_].*AppleWebKit/)?o.android="2.3":(n=e.match(/iPhone\sOS\s([\d_]+)/))?(o.ios=n[1].replace(/_/g,"."),s.iphone=!0):(n=e.match(/iPad.*OS\s([\d_]+)/))?(o.ios=n[1].replace(/_/g,"."),s.ipad=!0):(n=e.match(/Bada\/([\d.]+)/))?o.bada=n[1]:(n=e.match(/MSIE\s9/))?o.wp="7.5":o.other=!0,BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){var t=this.__self,e="other";["ios","android","bada","wp","opera"].some(function(i){return t[i]&&(e=i)}),this.setMod("platform",e)}}},setVersion:function(){var t=this.parseVersion();t&&(this.setMod(t.platform,t.major),this.setMod(t.platform+"-subversion",t.subversion))},parseVersion:function(){if(this.__self.ios||this.__self.android){var t=(this.__self.ios||this.__self.android).split("."),e=t.shift(),i=t.join("-");return{platform:this.getMod("platform"),major:e,subversion:i}}}},{ios:o.ios,iphone:s.iphone,ipad:s.ipad,android:o.android,bada:o.bada,wp:o.wp,other:o.other,ua:e,ie:i.ie,opera:i.opera})}(window,navigator.userAgent),$(function(){BEM.afterCurrentEvent(function(){BEM.channel("i-bem").trigger("start-init"),BEM.DOM.init(function(){BEM.channel("i-bem").trigger("init")})})}),BEM.DOM.decl("b-statcounter__metrika",{onSetMod:{js:{inited:function(){this.__self.loadMetrika(),this.addCounter(this.params)}}},addCounter:function(t){var e=window.Ya&&Ya.Metrika,i=window.yandex_metrika_callbacks||(window.yandex_metrika_callbacks=[]),n=function(){window["yaCounter"+t.id]=new Ya.Metrika(t)};if(!t.id)throw new Error([BEM.I18N("b-statcounter__metrika","JSERR_incorrectID"),"block: "+this.__self.getName(),"method: addCounter"].join("\n"));e?n():i.push(n)},getDefaultParams:function(){return{enableAll:!0}}},{loadMetrika:function(){var t=window.Ya&&Ya.Metrika,e="https:"===document.location.protocol?"https:":"http:";!t&&$.ajax({url:e+"//mc.yandex.ru/metrika/watch.js",dataType:"script",cache:!0}),this.loadMetrika=function(){}}}),BEM.DOM.decl("b-statcounter__metrika",{addCounter:function(t){var e=t&&t.id||"",i=BEM.blocks["i-global"].param("login");t.params||(t.params={}),i?($.cookie("noSessionLogin"+e)&&(t.params.sessionLogin=!0,$.cookie("noSessionLogin"+e,"",{path:"/"})),t.params.login=!0):($.cookie("noSessionLogin"+e,1,{path:"/"}),t.params.login=!1),this.__base.apply(this,arguments)}}),function(t,e,i){var n={bubbles:!1,cancelable:!1,view:null,detail:null,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null,buttons:0,pointerId:0,width:0,height:0,pressure:0,tiltX:0,tiltY:0,pointerType:"",hwTimestamp:0,isPrimary:!1,target:null,currentTarget:null,which:0,pageX:0,pageY:0,timeStamp:0},o=Object.keys(n),s=o.map(function(t){return n[t]}),r=o.length,a=!1,c=[0,1,4,2];try{a=1===new MouseEvent("test",{buttons:1}).buttons}catch(t){}function l(t,e){var i={},n=t.originalEvent||{};e||(e={});for(var l,u=0;u<r;u++)i[l=o[u]]=e[l]||t[l]||n[l]||s[u];return i.x=i.clientX,i.y=i.clientY,i.pressure=i.pressure||(i.buttons?.5:0),i.buttons||a||(i.buttons=c[i.which]||0),i.originalEvent=t.originalEvent||null,e.preventDefault?i.preventDefault=function(){e.preventDefault(),t.preventDefault()}:(i.preventDefault=function(){t.preventDefault()},i._preventScroll=function(){}),i}var u=t.Map&&t.Map.prototype.forEach?new t.Map:{array:[],size:0,set:function(t,e){if(void 0===e)return this.delete(t);this.has(t)||this.size++,this.array[t]=e},has:function(t){return void 0!==this.array[t]},delete:function(t){this.has(t)&&(delete this.array[t],this.size--)},get:function(t){return this.array[t]},clear:function(){this.array.length=0,this.size=0},forEach:function(t,e){return this.array.forEach(function(i,n){t.call(e,i,n,this)},this)}},h={eventMap:{},captureInfo:{},eventSourceList:[],registerSource:function(t,e){var i=e.events;i&&(i.forEach(function(t){e[t]&&(this.eventMap[t]=e[t].bind(e))},this),this.eventSourceList.push(e))},register:function(t){for(var e,i=this.eventSourceList.length,n=0;n<i&&(e=this.eventSourceList[n]);n++)e.register.call(e,t)},unregister:function(t){for(var e,i=this.eventSourceList.length,n=0;n<i&&(e=this.eventSourceList[n]);n++)e.unregister.call(e,t)},contains:function(t,e){return!!t.contains&&t.contains(e)},getCommonAncestor:function(t,i){for(;t&&t!==e.documentElement;){if(t.contains&&t.contains(i))return t;t=t.parentNode}return null},down:function(t){t.bubbles=!0,this.fireEvent("pointerdown",t)},move:function(t){t.bubbles=!0,this.fireEvent("pointermove",t)},up:function(t){t.bubbles=!0,this.fireEvent("pointerup",t)},enter:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.pop(),this.fireEvent("pointerenter",t)},leave:function(t){var e=[],i=t.target,n=this.getCommonAncestor(i,t.relatedTarget);for(t.bubbles=!1;i&&i!==n;)e.push(i),i=i.parentNode;for(;e.length;)t.target=e.shift(),this.fireEvent("pointerleave",t)},over:function(t){t.bubbles=!0,this.fireEvent("pointerover",t)},out:function(t){t.bubbles=!0,this.fireEvent("pointerout",t)},cancel:function(t){t.bubbles=!0,this.fireEvent("pointercancel",t)},leaveOut:function(t){this.out(t),this.contains(t.target,t.relatedTarget)||this.leave(t)},enterOver:function(t){this.over(t),this.contains(t.target,t.relatedTarget)||this.enter(t)},listen:function(t,e){e.forEach(function(e){this.addEvent(t,e)},this)},unlisten:function(t,e){e.forEach(function(e){this.removeEvent(t,e)},this)},addEvent:function(t,e){i(t).on(e,this.boundHandler)},removeEvent:function(t,e){i(t).off(e,this.boundHandler)},eventHandler:function(t){var e=this.eventMap[t.type];e&&e(t,t.originalEvent)},makeEvent:function(t,e){this.captureInfo[e.pointerId]&&(e.relatedTarget=null);var n=function(t,e){var n=i.Event(t),o=e.preventDefault,s=n.preventDefault.bind(n);return jQuery.extend(n,e),n.preventDefault=function(){o(),s()},n}(t,e);return n._target=n._target||e.target,n},fireEvent:function(t,e){var i=this.makeEvent(t,e);return this.dispatchEvent(i)},getTarget:function(t){return this.captureInfo[t.pointerId]||t._target},setCapture:function(t,n){this.captureInfo[t]&&this.releaseCapture(t),this.captureInfo[t]=n,this.implicitRelease=this.releaseCapture.bind(this,t),i(e).on("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("gotpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n}))},releaseCapture:function(t){var n=this.captureInfo[t];n&&(this.captureInfo[t]=void 0,i(e).off("pointerup pointercancel",this.implicitRelease),this.asyncDispatchEvent(i.Event("lostpointercapture",{bubbles:!0,cancelable:!1,pointerId:t,_target:n})))},dispatchEvent:function(t){var e=this.getTarget(t);if(e)return i.event.trigger(t,null,e,!t.bubbles)},asyncDispatchEvent:function(e){(t.requestAnimationFrame||setTimeout)(this.dispatchEvent.bind(this,e))}};h.boundHandler=h.eventHandler.bind(h);var d,p,f={POINTER_ID:1,POINTER_TYPE:"mouse",DEDUP_DIST:25,events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(t){h.listen(t,this.events)},unregister:function(t){h.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,i=this.lastTouches,n=t.clientX,o=t.clientY,s=0,r=i.length;s<r&&(e=i[s]);s++){var a=Math.abs(n-e.x),c=Math.abs(o-e.y);if(a<=this.DEDUP_DIST&&c<=this.DEDUP_DIST)return!0}},prepareEvent:function(t){return l(t,{pointerId:this.POINTER_ID,isPrimary:!0,pointerType:this.POINTER_TYPE})},mousedown:function(t){this.isEventSimulatedFromTouch(t)||(u.has(this.POINTER_ID)&&this.cancel(t),u.set(this.POINTER_ID,t),h.down(this.prepareEvent(t)))},mousemove:function(t){this.isEventSimulatedFromTouch(t)||h.move(this.prepareEvent(t))},mouseup:function(t){if(!this.isEventSimulatedFromTouch(t)){var e=u.get(this.POINTER_ID);e&&e.button===t.button&&(h.up(this.prepareEvent(t)),this.cleanupMouse())}},mouseover:function(t){this.isEventSimulatedFromTouch(t)||h.enterOver(this.prepareEvent(t))},mouseout:function(t){this.isEventSimulatedFromTouch(t)||h.leaveOut(this.prepareEvent(t))},cancel:function(t){h.cancel(this.prepareEvent(t)),this.cleanupMouse()},cleanupMouse:function(){u.delete(this.POINTER_ID)}},m={POINTER_TYPE:"touch",DEDUP_TIMEOUT:2500,CLICK_COUNT_TIMEOUT:200,events:["touchstart","touchmove","touchend","touchcancel"],register:function(t){h.listen(t,this.events)},unregister:function(t){h.unlisten(t,this.events)},firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===u.size||1===u.size&&u.has(1))&&(this.firstTouch=t.identifier,this.firstTouchTarget=t.target,this.scrolling=!1,this.firstXY={X:t.clientX,Y:t.clientY},this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstTouchTarget=null,this.firstXY=null,this.shouldScrollCache=void 0,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,this.CLICK_COUNT_TIMEOUT)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){return"touchstart"===t||"touchmove"===t?1:0},findTarget:function(t){return e.elementFromPoint(t.clientX,t.clientY)},touchToPointer:function(t){var e=this,n=this.currentTouchEvent,o=t.identifier+2;return l(n,i.extend({},t,{pointerId:o,target:h.captureInfo[o]||this.findTarget(t),bubbles:!0,cancelable:!0,detail:this.clickCount,button:0,buttons:this.typeToButtons(n.type),width:t.webkitRadiusX||t.radiusX||0,height:t.webkitRadiusY||t.radiusY||0,pressure:t.webkitForce||t.force||.5,isPrimary:this.isPrimaryTouch(t),pointerType:this.POINTER_TYPE,preventDefault:function(){e.scrolling=!1,e.shouldScrollCache=!1,e.firstXY=null}}))},processTouches:function(t,e){var i=t.originalEvent.changedTouches;this.currentTouchEvent=t;for(var n,o=0;o<i.length;o++)n=i[o],e.call(this,this.touchToPointer(n))},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(t){var e,i=this.scrollTypes;return t===i.EMITTER?e="none":t===i.XSCROLLER?e="X":t===i.YSCROLLER?e="Y":i.SCROLLER.exec(t)&&(e="XY"),e},shouldScroll:function(t){if(void 0!==this.shouldScrollCache)return this.shouldScrollCache;if(!this.firstXY)return!0;var e,i,n=this.firstTouchTarget;do{if(!n)break;if(null!==(e=n.getAttribute("touch-action")))break;n=n.parentNode}while(n!==document);var o=this.touchActionToScrollType(e);if("none"===o)i=!1;else if("XY"===o||void 0===o)i=!0;else{var s=t.originalEvent.changedTouches[0],r=o,a="Y"===o?"X":"Y";i=Math.abs(s["client"+r]-this.firstXY[r])>=Math.abs(s["client"+a]-this.firstXY[a])}return this.shouldScrollCache=i,this.firstXY=null,this.firstTouchTarget=null,this.shouldScrollCache},findTouch:function(t,e){for(var i,n=0,o=t.length;n<o&&(i=t[n]);n++)if(i.identifier===e)return!0},vacuumTouches:function(t){var e=t.originalEvent.touches;if(u.size>=e.length){var i=[];u.forEach(function(t,n){if(1!==n&&!this.findTouch(e,n-2)){var o=t.out;i.push(o)}},this),i.forEach(this.cancelOut,this)}},touchstart:function(t){var e=t.originalEvent.changedTouches[0];this.vacuumTouches(t),this.setPrimaryTouch(e),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(t,this.overDown))},overDown:function(t){u.set(t.pointerId,{target:t.target,out:t,outTarget:t.target}),h.over(t),h.enter(t),h.down(t)},touchmove:function(t){this.scrolling||(this.shouldScroll(t)?(this.scrolling=!0,this.touchcancel(t)):(t.preventDefault(),this.processTouches(t,this.moveOverOut)))},moveOverOut:function(t){var e=u.get(t.pointerId);if(e){var i=e.out,n=e.outTarget;h.move(t),i&&n!==t.target&&(i.relatedTarget=t.target,t.relatedTarget=n,i.target=n,t.target?(h.leaveOut(i),h.enterOver(t)):(t.target=n,t.relatedTarget=null,this.cancelOut(t))),e.out=t,e.outTarget=t.target}},touchend:function(t){this.dedupSynthMouse(t.originalEvent.changedTouches[0]),this.processTouches(t,this.upOut)},upOut:function(t){this.scrolling||(h.up(t),h.out(t),h.leave(t)),this.cleanUpPointer(t)},touchcancel:function(t){this.processTouches(t,this.cancelOut)},cancelOut:function(t){h.cancel(t),h.out(t),h.leave(t),this.cleanUpPointer(t)},cleanUpPointer:function(t){u.delete(t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(t){var e=f.lastTouches;if(this.isPrimaryTouch(t)){var i={x:t.clientX,y:t.clientY};e.push(i);var n=function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}.bind(null,e,i);setTimeout(n,this.DEDUP_TIMEOUT)}}},_={POINTER_TYPES:["","unavailable","touch","pen","mouse"],HAS_BITMAP_TYPE:t.MSPointerEvent&&"number"==typeof t.MSPointerEvent.MSPOINTER_TYPE_MOUSE,events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(t){h.listen(t,this.events)},unregister:function(t){h.unlisten(t,this.events)},prepareEvent:function(t){var e=l(t);return this.HAS_BITMAP_TYPE&&(e.pointerType=this.POINTER_TYPES[e.pointerType]),e},cleanup:function(t){u.delete(t)},MSPointerDown:function(t){u.set(t.originalEvent.pointerId,t),h.down(this.prepareEvent(t))},MSPointerMove:function(t){h.move(this.prepareEvent(t))},MSPointerUp:function(t){h.up(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSPointerOut:function(t){h.leaveOut(this.prepareEvent(t))},MSPointerOver:function(t){h.enterOver(this.prepareEvent(t))},MSPointerCancel:function(t){h.cancel(this.prepareEvent(t)),this.cleanup(t.originalEvent.pointerId)},MSGotPointerCapture:function(t){h.fireEvent("gotpointercapture",this.prepareEvent(t))},MSLostPointerCapture:function(t){h.fireEvent("lostpointercapture",this.prepareEvent(t))}},g=function(t){if(!u.has(t))throw new Error("InvalidPointerId")};t.Element&&Element.prototype.setPointerCapture?(d=function(t,e){t.setPointerCapture(e)},p=function(t,e){t.releasePointerCapture(e)}):t.navigator.msPointerEnabled?(d=function(t,e){g(e),t.msSetPointerCapture(e)},p=function(t,e){g(e),t.msReleasePointerCapture(e)}):(d=function(t,e){g(e),h.setCapture(e,t)},p=function(t,e){g(e),h.releaseCapture(e,t)}),i.fn.extend({setPointerCapture:function(t){d(this[0],t)},releasePointerCapture:function(t){p(this[0],t)}}),t._pointerPolyfillInited||(t._pointerPolyfillInited=!0,t.PointerEvent?["move","down","up","over","out","enter","leave","cancel"].forEach(function(t){var e=jQuery.event.fixHooks,i="pointer"+t;e[i]||(e[i]={}),e[i].props=o.concat(e[i].props||[])}):(delete i.event.special.pointerenter,delete i.event.special.pointerleave,t.navigator.msPointerEnabled?h.registerSource("ms",_):(h.registerSource("mouse",f),void 0!==t.ontouchstart&&h.registerSource("touch",m)),h.register(document)))}(window,document,jQuery),function(t,e){if(!e.event.special.pointerclick){var i,n=void 0!==t.ontouchstart||navigator.msMaxTouchPoints>0,o=10,s=25,r=900,a=[],c=[],l=null,u=null,h="touchAction"in document.documentElement.style?function(t){return function t(e){return!(!e||e===document.documentElement)&&("manipulation"===getComputedStyle(e)["touch-action"]||t(e.parentElement))}(t)}:function(){return!1};n?(i={click:function(t){var e=Object(t.originalEvent)._sourcePoint;if(!e)return d.apply(this,arguments);e.isDefaultPrevented()&&t.preventDefault()},"pointerdown pointermove pointerleave pointercancel pointerup":function(t){var e,i,n=t.type;if("mouse"!==t.pointerType&&("pointerdown"!==n&&"pointerup"!==n||!h(t.target)))if("pointerdown"===n)u=t;else if("pointermove"===n&&u&&(u.target!==t.target||(e=u,i=t,Math.abs(e.clientX-i.clientX)>o||Math.abs(e.clientY-i.clientY)>o)))u=null;else if("pointerleave"===n||"pointercancel"===n)u=null;else if("pointerup"===n){if(function(t){if(!t.isPrimary)return;a.push(t),setTimeout(Array.prototype.shift.bind(a),r)}(t),!u)return;if(!(t.timeStamp-u.timeStamp>250))return l||(l=setTimeout(function(){l=u=null})),d.apply(this,arguments);u=null}}},["mousedown","click"].forEach(function(e){t.addEventListener(e,function(t){!function(t){var e=t.clientX,i=t.clientY,n="_compat"+t.type;if(t._sourcePoint)return;for(var o=0;o<a.length;o++){var l=a[o],u=l.target===t.target;if(!l[n]&&((u||!(Math.abs(e-l.clientX)>s||Math.abs(i-l.clientY)>s))&&(u||document.elementFromPoint(l.clientX,l.clientY)!==l.target))){t._sourcePoint=l,l[n]=t;break}}c.push(t),setTimeout(Array.prototype.shift.bind(c),r)}(t),function(t){var e=function(t){for(var e=0;e<c.length;e++)if(c[e]===t)return c[e]._sourcePoint}(t);return Boolean(e)&&e.target!==t.target}(t)&&(t.preventDefault(),t.stopPropagation())},!0)})):i={click:function(t){return d.apply(this,arguments)}},e.event.special.pointerclick={setup:function(){e(this).on(i)},teardown:function(){e(this).off(i)}}}function d(t){var i,n=t.type;return t.button||(t.type="pointerclick",i=e.event.dispatch.apply(this,arguments),t.type=n),i}}(window,jQuery),function(t){t.event.special.pointerpress||t.each({pointerpress:"pointerdown",pointerrelease:"pointerup pointercancel"},function(e,i){function n(i){var n,o=i.type;return"mouse"===i.pointerType&&1!==i.which||(i.type=e,n=t.event.dispatch.apply(this,arguments),i.type=o),n}t.event.special[e]={setup:function(){t(this).on(i,n)},teardown:function(){t(this).off(i,n)}}})}(jQuery),BEM.DOM.decl("button",{onSetMod:{js:{inited:function(){var t=this.isDisabled(),e=this.domElem;(this._href=e.attr("href"))&&t&&e.removeAttr("href")}},disabled:function(t,e){var i=this.domElem;e&&this.delMod("hovered"),this._href&&(e?i.removeAttr("href"):i.attr("href",this._href)),this.afterCurrentEvent(function(){i&&i.prop("disabled",e)})},pressed:function(t,e){if(this.hasMod("disabled"))return!1;this.trigger(e?"press":"release")}},isDisabled:function(){return this.hasMod("disabled","yes")},url:function(t){return void 0===t?this._href:(this._href=t,this.isDisabled()||this.domElem.attr("href",t),this)},getUrl:function(){return this.url()},setUrl:function(t){return this.url(t)},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){this.isDisabled()?t.preventDefault():this.afterCurrentEvent(function(){this.domElem&&this.trigger("click")})}},{live:function(){this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("pointerpress",function(t){this.isDisabled()||this._onPointerpress(t)})}}),BEM.DOM.decl("button",{onSetMod:{focused:{yes:function(){if(this.isDisabled())return!1;this.bindToWin("unload",function(){this.delMod("focused")}).bindTo("keydown",this._onKeyDown),this._isControlFocused()||this._getControl().focus(),this.trigger("focus")},"":function(){var t=BEM.blocks["i-ua"].opera<13;this.unbindFromWin("unload").unbindFrom("keydown"),(t||document.hasFocus())&&this._isControlFocused()&&this._getControl().blur(),this.trigger("blur")}},disabled:function(t,e){this.__base.apply(this,arguments),e&&(this.delMod("focused"),this.domElem.keyup())},hovered:function(t,e){if(this.isDisabled())return!1;!e&&this.delMod("pressed")},pressed:function(){return this.isDisabled()||this.setMod("focused","yes"),this.__base.apply(this,arguments)}},_getControl:function(){return this.elem("control").length&&this.elem("control")||this.domElem},_isControlFocused:function(){return this.containsDomElem($.dom.getActiveElement())},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;!this._keyDowned&&e.is(i,"ENTER","SPACE")&&(this._keyDowned=!0,this.setMod("pressed","yes").bindTo("keyup",function(){this.delMod("pressed").unbindFrom("keyup"),delete this._keyDowned,i===e.SPACE&&this.domElem.attr("href")&&(document.location=this.domElem.attr("href"))}))},destruct:function(){this.delMod("focused"),this.__base.apply(this,arguments)}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||this.toggleMod("hovered","yes","pointerover"===t.type)}).liveBindTo("focusin focusout",function(t){this.toggleMod("focused","yes","focusin"===t.type)}),8===BEM.blocks["i-ua"].ie&&this.liveBindTo("mouseup mouseout",function(t){this.domElem.height()}),this.__base()}}),function(t){t.dom={getActiveElement:function(){try{return t(document.activeElement)}catch(e){return t()}}},t.fn.isFocused=function(){return this.is(t.dom.getActiveElement())}}(jQuery),BEM.decl("keycodes",{},{BACKSPACE:8,TAB:9,ENTER:13,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,is:function(t,e){return(Array.isArray(e)?e:Array.prototype.slice.call(arguments,1)).some(function(e){return this[e]===t},this)}}),function(){var t=$(window),e=$(document.documentElement),i=0,n=!1;function o(){e.hasClass("pointerfocus")&&(n=!0,setTimeout(function(){n=!1}))}document.documentMode<=11?e.on("focusin",function(t){var e=t.originalEvent;!e||e.fromElement||e.relatedTarget||o()}):t.on("blur",function(){t.one("focus",o)}),e.addClass("utilityfocus").on({focusin:function(){e.toggleClass("pointerfocus",n).toggleClass("utilityfocus",!n)},keydown:function(){clearTimeout(i),n=!1},"pointerdown pointerup click":function(t){n=!0,clearTimeout(i),i=setTimeout(function(){n=!1},600)}})}(),$.extend({util:{}}),function(){var t=Object.prototype.toString;function e(e){return"[object Object]"===t.call(e)}function i(t,n,o){var s,r;for(s in t=Object(t),n=Object(n))void 0!==(r=o&&o(t[s],n[s],s))?t[s]=r:e(t[s])&&e(n[s])?t[s]=i(t[s],n[s],o):t[s]=n[s];return t}$.extend($.util,{merge:i,mergeBemjson:function(t,e){return i(t,e,function(t,e,i){if("mix"===i)return[].concat(t,e)})}})}(),BEM.DOM.decl("control",{onSetMod:{focused:{yes:function(){if(this.hasMod("disabled"))return!1;this._focused||(this._focus(),this.trigger("focus"))},"":function(){this._focused&&(this._blur(),this.trigger("blur"))}},disabled:{"*":function(t,e){var i=this._getControl();i.prop("disabled",Boolean(e)).attr("aria-disabled",Boolean(e)),i.attr("tabindex",e?null:this.params._tabindex)},yes:function(){this.delMod("focused")}}},_focus:function(){this._getControl().focus()},_blur:function(){this._getControl().blur()},_getControl:function(){var t=this.elem("control");return t.length>0?t:this.domElem},_onFocusin:function(){this._focused=!0,this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusout)},_onFocusout:function(){this._focused=!1,this.trigger("blur").delMod("focused").unbindFrom("focusout")},getDefaultParams:function(){return{_tabindex:this._getControl().attr("tabindex")}}},{live:function(){this.liveBindTo("focusin",function(t){this._onFocusin(t)}),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&this.liveBindTo("control","focusin",function(t){t.preventDefault()})}}),BEM.DOM.decl({block:"link",baseBlock:"control"},{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",this.params._tabindex)},yes:function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",-1),this.delMod("pressed")}}},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}),this.__base()}}),BEM.DOM.decl("link",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"link",modName:"has-metrika",modVal:"yes"},{_sendMetrika:function(){var t=this.params,e=t.metrikaParams,i=t.metrikaGoal;i?BEM.blocks["fi-metrika"].reachGoal(i,e):e&&BEM.blocks["fi-metrika"].setParams(e)}},{live:function(){return this.liveBindTo({modName:"has-metrika",modVal:"yes"},"pointerclick",function(t){this._sendMetrika(t)}),this.__base()}}),BEM.DOM.decl("f-mini-profile",{onSetMod:{js:{inited:function(){this._avatar=this.findBlockInside("f-user-avatar"),this._popup=this.findBlockInside("popup2"),this._initEvents()}}},_initEvents:function(){this._avatar&&this._popup&&(this._popup.setAnchor(this._avatar),this._avatar.on("click",this._openPopup,this))},_openPopup:function(){this._popup.setMod("visible","yes")}}),BEM.DOM.decl("f-user-avatar",{onSetMod:{js:{inited:function(){this.bindTo(this.elem("photo"),"click",function(){this.trigger("click")})}}}}),BEM.DOM.decl("popup2",{onSetMod:{js:{inited:function(){this._parentPopup=void 0,this._zIndex=null,this._zIndexGroupLevel=null,this._scope=BEM.DOM.scope,this._isAttachedToScope=!1}},visible:{yes:function(){this.trigger("beforeOpen"),this._isAttachedToScope||(this._scope.append(this.domElem),this._isAttachedToScope=!0),this._captureZIndex()._bindToParentPopup().bindTo("pointerdown pointerclick",this._setPreventHideByClick)},"":function(){this.trigger("beforeClose")._releaseZIndex()._unbindFromParentPopup().unbindFrom("pointerdown pointerclick")}}},destruct:function(){this.delMod("visible"),this.__base.apply(this,arguments)},setScope:function(t){return this._scope=t,this._isAttachedToScope=!1,this},setContent:function(t){return BEM.DOM.update(this.domElem,t),this},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),t},_setPreventHideByClick:function(){var t=this;do{t._preventHideByClick=!0,t=t._getParentPopup()}while(t)},_bindToParentPopup:function(){var t=this._getParentPopup();return t&&(t.on("beforeClose",this._onParentPopupClose,this),t.addChild&&t.addChild(this)),this},_unbindFromParentPopup:function(){return this._parentPopup&&this._parentPopup.un("beforeClose",this._onParentPopupClose,this),this._parentPopup=void 0,this},_onParentPopupClose:function(){this.delMod("visible")},_getParentPopup:function(){return this._parentPopup},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,e=this._zIndexGroupLevel,i=t[e],n=this._zIndex;return i||(i=t[e]=[(e+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=i[i.length-1]+1,i.push(this._zIndex),this._zIndex!==n&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t&&t.splice(t.indexOf(this._zIndex),1),this},_recaptureZIndex:function(){return this._releaseZIndex(),this._zIndexGroupLevel=null,this._captureZIndex()},getDefaultParams:function(){return{zIndexGroupLevel:0}}},{live:!0,_visiblePopupsZIndexes:(BEM.blocks.popup||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3}),BEM.DOM.decl({block:"popup2",modName:"target"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._lastPopupDrawingCss={left:void 0,top:void 0,zIndex:void 0,display:void 0},this._lastTailDrawingCss={left:void 0,top:void 0},this._initialVisible=this.hasMod("visible")}},visible:{yes:function(){this.__base.apply(this,arguments),this.bindToWin("scroll resize",this._onWinScollAndResize).redraw(!0)},"":function(){this.__base.apply(this,arguments),this.unbindFromWin("scroll resize")}}},setContent:function(){return this.__base.apply(this,arguments).redraw()},_draw:function(){var t=this._calcBestDrawingParams();return this.setMod("direction",t.direction),e(this._lastPopupDrawingCss,this._calcDrawingCss(t))&&this.domElem.css(this._lastPopupDrawingCss),e(this._lastTailDrawingCss,this._calcTailDrawingCss(t))&&this.elem("tail").css(this._lastTailDrawingCss),this;function e(t,e){var i=!1;return Object.keys(e).forEach(function(n){var o=e[n];t[n]!==o&&(t[n]=o,i=!0)}),i}},redraw:function(t){return this.hasMod("visible","yes")||t?(this.setMod("outside","yes")._draw().delMod("outside"),this):this},_calcDrawingCss:function(t){var e,i=this._scope;return i.is(BEM.DOM.scope)||(e=i.offset(),t.top-=e.top,t.left-=e.left),{left:t.left,top:t.top}},_calcTailDrawingCss:function(t){return t.tail},calcPossibleDrawingParams:function(){var t=this._calcTargetDimensions(),e=this._calcViewportDimensions(),i=this._calcOffsets();return this.params.directions.map(function(n){var o={direction:n,width:0,height:0,left:0,top:0};return this._checkMainDirection(n,"bottom")?(o.top=t.top+t.height+i.main,o.height=e.bottom-o.top-i.viewport):this._checkMainDirection(n,"top")?(o.height=t.top-e.top-i.main-i.viewport,o.top=t.top-o.height-i.main):(this._checkSecondaryDirection(n,"center")?(o.height=e.bottom-e.top-2*i.viewport,o.top=t.top+(t.height-o.height)/2):this._checkSecondaryDirection(n,"bottom")?(o.height=t.top+t.height-e.top-i.secondary-i.viewport,o.top=t.top+t.height-o.height-i.secondary):this._checkSecondaryDirection(n,"top")&&(o.top=t.top+i.secondary,o.height=e.bottom-o.top-i.viewport),this._checkMainDirection(n,"left")?(o.width=t.left-e.left-i.main-i.viewport,o.left=t.left-o.width-i.main):(o.left=t.left+t.width+i.main,o.width=e.right-o.left-i.viewport)),this._checkSecondaryDirection(n,"right")?(o.width=t.left+t.width-e.left-i.secondary-i.viewport,o.left=t.left+t.width-o.width-i.secondary):this._checkSecondaryDirection(n,"left")?(o.left=t.left+i.secondary,o.width=e.right-o.left-i.viewport):this._checkSecondaryDirection(n,"center")&&this._checkMainDirection(n,"top","bottom")&&(o.width=e.right-e.left-2*i.viewport,o.left=t.left+t.width/2-o.width/2),o},this)},_calcBestDrawingParams:function(){for(var t,e,i,n,o,s,r=this._calcPopupDimensions(),a=this._calcTargetDimensions(),c=this._calcViewportDimensions(),l=this.params.directions,u=l.length,h=0;h<u&&(t=l[h],e=this._calcPos(t,a,r),i=this._calcViewportFactor(e,c,r),(0===h||i>s||!s&&this.hasMod("direction",t))&&(n=t,s=i,o=e),!(s>this.__self.VIEWPORT_ACCURACY_FACTOR));h++);return{direction:n,left:o.left,top:o.top,tail:this._calcTailPos(n,a,r,o)}},_calcPopupDimensions:function(){var t=this.domElem.outerWidth(),e=this.domElem.outerHeight();return{width:t,height:e,innerWidth:this.domElem.innerWidth(),innerHeight:this.domElem.innerHeight(),area:t*e}},_calcTailDimension:function(){var t=this.elem("tail"),e=this.params.tailSize||t.outerWidth();return t.length>0&&"none"!==t.css("display")?e:0},_calcTargetDimensions:function(){},_calcViewportDimensions:function(){var t=BEM.DOM.win,e=t.scrollTop(),i=t.scrollLeft(),n=t.width();return{top:e,left:i,bottom:e+t.height(),right:i+n}},_calcPos:function(t,e,i){var n={},o=this._calcOffsets();return this._checkMainDirection(t,"bottom")?n.top=e.top+e.height+o.main:this._checkMainDirection(t,"top")?n.top=e.top-i.height-o.main:this._checkMainDirection(t,"left")?n.left=e.left-i.width-o.main:this._checkMainDirection(t,"right")&&(n.left=e.left+e.width+o.main),this._checkSecondaryDirection(t,"right")?n.left=e.left+e.width-i.width-o.secondary:this._checkSecondaryDirection(t,"left")?n.left=e.left+o.secondary:this._checkSecondaryDirection(t,"bottom")?n.top=e.top+e.height-i.height-o.secondary:this._checkSecondaryDirection(t,"top")?n.top=e.top+o.secondary:this._checkSecondaryDirection(t,"center")&&(this._checkMainDirection(t,"top","bottom")?n.left=e.left+e.width/2-i.width/2:this._checkMainDirection(t,"left","right")&&(n.top=e.top+e.height/2-i.height/2)),n},_calcTailPos:function(t,e,i,n){var o={},s=this._calcTailDimension()/2,r=this.params.tailOffset,a=this.params.tailSize;return this._checkMainDirection(t,"bottom")?o.top=-s:this._checkMainDirection(t,"top")?o.top=Math.floor(i.innerHeight-s):this._checkMainDirection(t,"left")?o.left=Math.floor(i.innerWidth-s):this._checkMainDirection(t,"right")&&(o.left=-s),this._checkSecondaryDirection(t,"right")?o.left=i.innerWidth-Math.ceil(Math.min(i.innerWidth,e.width)/2)-s-r:this._checkSecondaryDirection(t,"left")?o.left=Math.ceil(Math.min(i.innerWidth,e.width)/2)-s+r:this._checkSecondaryDirection(t,"bottom")?o.top=i.innerHeight-Math.ceil(Math.min(i.innerHeight,e.height)/2)-s-r:this._checkSecondaryDirection(t,"top")?o.top=Math.ceil(Math.min(i.innerHeight,e.height)/2)-s+r:this._checkSecondaryDirection(t,"center")&&(this._checkMainDirection(t,"top","bottom")?o.left=Math.ceil(i.innerWidth/2)-s+r:o.top=Math.ceil(i.innerHeight/2)-s+r),{top:o.top,left:o.left,width:a,height:a}},_calcViewportFactor:function(t,e,i){var n=this.params.viewportOffset,o=Math.max(t.left,e.left+n),s=Math.min(t.left+i.width,e.right-n),r=Math.max(t.top,e.top+n),a=Math.min(t.top+i.height,e.bottom-n);return o<s&&r<a?(s-o)*(a-r)/i.area:0},_calcOffsets:function(){var t=this.params,e=this._calcTailDimension();return{main:t.mainOffset>=0&&e>0?Math.max(t.mainOffset,Math.round(e*Math.SQRT1_2)):t.mainOffset,secondary:t.secondaryOffset,viewport:t.viewportOffset}},_checkMainDirection:function(t,e,i){return 0===t.indexOf(e)||i&&0===t.indexOf(i)},_checkSecondaryDirection:function(t,e){return t.indexOf("-"+e)>0},_checkDirection:function(t,e){return t.indexOf(e)>=0},_onWinScollAndResize:function(t){this.hasMod("visible","yes")&&this._draw()},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{mainOffset:0,secondaryOffset:0,viewportOffset:0,tailOffset:0,directions:this.__self.AVAILABLE_DIRECTIONS})},_setVisible:function(){this._initialVisible&&(this._initialVisible=!1,this.delMod("visible").setMod("visible","yes"))}},{VIEWPORT_ACCURACY_FACTOR:.99,AVAILABLE_DIRECTIONS:["bottom-left","bottom-center","bottom-right","top-left","top-center","top-right","right-top","right-center","right-bottom","left-top","left-center","left-bottom"]}),BEM.DOM.decl({block:"popup2",modName:"target"},{getDefaultParams:function(){return _extends({},this.__base.apply(this,arguments),{directions:["bottom-left","bottom-center","bottom-right"]})}}),function(t){BEM.DOM.decl({block:"popup2",modName:"target",modVal:"anchor"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._anchor=null,this._destructor=null,this._fixedAnchor=void 0}},visible:{yes:function(){this.bindToDoc("documentchange",this._onWinScollAndResize),this.__base.apply(this,arguments)},"":function(){this.__base.apply(this,arguments),this.unbindFromDoc("documentchange")}}},destruct:function(){this._unbindFromDestructor(),this.__base.apply(this,arguments)},setAnchor:function(t){var e,i;return this._unbindFromDestructor()._unbindFromParentPopup(),this._anchor=t instanceof BEM.DOM?t.domElem:t,this._destructor=(e=this._anchor,i="_"+this.__self.getName()+"-destructor",e.addClass("i-bem "+i).bem(i)),this._fixedAnchor=void 0,this._bindToDestructor(),this._setVisible(),this.hasMod("visible")?this._recaptureZIndex()._bindToParentPopup().redraw():this._zIndexGroupLevel=null,this},_calcTargetDimensions:function(){var t=this._anchor,e=this._getOffsetOf(t);return{left:e.left,top:e.top,width:t.outerWidth(),height:t.outerHeight()}},_getOffsetOf:function(t){var e=t.offset();return"pageYOffset"in window&&(e.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),e.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft)),e},_calcDrawingCss:function(e){var i=this.__base.apply(this,arguments);if(void 0===this._fixedAnchor&&(this._fixedAnchor=this._getFirstFixedParent(this._anchor)),this._fixedAnchor){var n=0,o=0,s=this._getFirstFixedParent(this._scope);if(s){var r=s.offset();n=r.left,o=r.top}i.left-=t(window).scrollLeft()-n,i.top-=t(window).scrollTop()-o}return t.extend(i,{position:this._fixedAnchor?"fixed":""})},_getFirstFixedParent:function(e){for(e=e[0];e;){if(1===e.nodeType&&"fixed"===t(e).css("position"))return t(e);e=e.parentNode}return null},_calcZIndexGroupLevel:function(){var t=this.__base.apply(this,arguments);return this._destructor.findBlocksOutside("z-index-group").reduce(function(t,e){return t+Number(e.getMod("level"))},t)},_bindToDestructor:function(){return this._destructor.on("destruct",this._onPopupAnchorDestruct,this),this},_unbindFromDestructor:function(){return this._destructor&&this._destructor.un("destruct",this._onPopupAnchorDestruct,this),this},_onPopupAnchorDestruct:function(){this.domElem&&BEM.DOM.destruct(this.domElem)},_getParentPopup:function(){if(void 0===this._parentPopup){var t=this._anchor.closest(".popup, .popup2");this._parentPopup=this.findBlockOn(t,this.__self.getName())||this.findBlockOn(t,"popup")}return this._parentPopup}}),BEM.DOM.decl("_popup2-destructor",{destruct:function(){this.trigger("destruct"),this.__base.apply(this,arguments)}})}(jQuery),$.extend({debounce:function(t,e,i,n){var o,s=function(){var s=arguments;n=n||this,i&&!o&&t.apply(n,s),clearTimeout(o),o=setTimeout(function(){i||t.apply(n,s),o=null},e)};return 3===arguments.length&&"boolean"!=typeof i&&(n=i,i=!1),s.stop=function(){clearTimeout(o),o=null},s},throttle:function(t,e,i){var n,o,s,r=function(){o=arguments,s=!0,i=i||this,n||function(){s?(t.apply(i,o),s=!1,n=setTimeout(arguments.callee,e)):n=null}()};return r.stop=function(){clearTimeout(n),n=null},r}}),BEM.DOM.decl({block:"popup2",modName:"hiding",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._anchorParents=null,this._isAnchorVisible=void 0,this._updateIsAnchorVisible=$.throttle(this._updateIsAnchorVisible,this.__self.UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL,this)}},visible:{yes:function(){this._anchorParents=this._getAnchorParents(),this._bindToAnchorParents(),this.__base.apply(this,arguments)},"":function(){this.__base.apply(this,arguments),this._updateIsAnchorVisible.stop(),this._unbindFromAnchorParents(),this._anchorParents=null,this._isAnchorVisible=void 0}}},_getAnchorParents:function(){for(var t,e=this;e&&e._anchor;)t=e,e=e._getParentPopup();return $(t._anchor).parents()},setAnchor:function(t){return this.__base.apply(this,arguments),this._unbindFromAnchorParents(),this._isAnchorVisible=void 0,this.hasMod("visible")?(this._anchorParents=this._getAnchorParents(),this._bindToAnchorParents()):this._anchorParents=null,this},_unbindFromDestructor:function(){return this._updateIsAnchorVisible.stop&&this._updateIsAnchorVisible.stop(),this.__base.apply(this,arguments)},_calcDrawingCss:function(t){var e=this.__base.apply(this,arguments);return void 0===this._isAnchorVisible&&(this._isAnchorVisible=this._calcIsAnchorVisible()),$.extend(e,{display:this._isAnchorVisible?"":"none"})},_calcIsAnchorVisible:function(){var t=this._anchor,e=this._getOffsetOf(t),i=e.left,n=e.top,o=i+t.outerWidth(),s=n+t.outerHeight(),r=this.getMod("direction"),a=Math.floor(this._checkDirection(r,"top")?n:s),c=Math.floor(this._checkDirection(r,"left")?i:o),l=!0;return this._anchorParents.each(function(t,e){if("BODY"===e.tagName)return!1;e=$(e);var i=/scroll|hidden|auto/,n=i.test(e.css("overflow-y")),o=i.test(e.css("overflow-x"));if(n||o){var s=this._getOffsetOf(e),r=Math.floor(s.top);if(a<r||r+e.outerHeight()<a)return l=!1;var u=Math.floor(s.left);return l=c>=u&&u+e.outerWidth()>=c}}.bind(this)),l},_bindToAnchorParents:function(){return this.bindTo(this._anchorParents,"scroll",this._onAnchorParentsScroll)},_unbindFromAnchorParents:function(){return this._updateIsAnchorVisible.stop(),this._anchorParents&&this.unbindFrom(this._anchorParents,"scroll"),this},_onAnchorParentsScroll:function(){this.redraw()._updateIsAnchorVisible()},_onWinScollAndResize:function(){this.hasMod("visible")&&(this.__base.apply(this,arguments),this._updateIsAnchorVisible())},_updateIsAnchorVisible:function(){if(this.domElem){var t=this._calcIsAnchorVisible();t!==this._isAnchorVisible&&(this._isAnchorVisible=t,this.redraw())}}},{UPDATE_TARGET_VISIBILITY_THROTTLING_INTERVAL:100}),BEM.DOM.decl({block:"popup2",modName:"theme",modVal:"normal"},{getDefaultParams:function(){return $.extend(this.__base(),{mainOffset:5,viewportOffset:5})}}),BEM.DOM.decl({block:"popup2",modName:"autoclosable",modVal:"yes"},{onSetMod:{visible:{yes:function(){this.__self._visiblePopupsStack.unshift(this),this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visible")&&this.bindToDoc("pointerclick",this._onDocClick)}),this.__base.apply(this,arguments)},"":function(){var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this.unbindFromDoc("pointerclick").__base.apply(this,arguments)}}},_onDocClick:function(t){this.hasMod("target","anchor")&&(this._anchor[0]===t.target||this._anchor.find(t.target).length>0)||(this._preventHideByClick?this._preventHideByClick=null:this.delMod("visible"))}},{live:function(){return BEM.DOM.doc.on("keydown",this._onDocKeyPress.bind(this)),this.__base()},_visiblePopupsStack:(BEM.blocks.popup||{})._visiblePopupsStack||[],_onDocKeyPress:function(t){BEM.blocks.keycodes.is(t.keyCode,"ESC")&&this._visiblePopupsStack.length&&this._visiblePopupsStack[0].__self.getName()===this.getName()&&this._visiblePopupsStack[0].delMod("visible")}}),BEM.DOM.decl({block:"button2",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments)}},pressed:{yes:function(){if(this.hasMod("disabled"))return!1;this.trigger("press")},"":function(){this.trigger("release")}},checked:{yes:function(){this.trigger("check").domElem.attr("aria-pressed","true")},"":function(){this.trigger("uncheck").domElem.attr("aria-pressed","false")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("pressed")}},focused:{"":function(){this.__base.apply(this,arguments),this.delMod("pressed")}},progress:{yes:function(){this.setMod("disabled","yes")},"":function(){this.delMod("disabled")}}},getText:function(){return this.elem("text").text()},setText:function(t){return this.elem("text").text(t),this},_onClick:function(t){(!this._preventClick||t.detail>0)&&this.trigger("click",this._buildClickEventData(t)),this._preventClick=!1},_processClick:function(t){this.trigger("click",this._buildClickEventData(t))},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onKeydown:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.pressKeys)&&(this.setMod("pressed","yes"),i.is(e,this.params.prvntKeys)&&t.preventDefault())},_onKeyup:function(t){var e=t.keyCode,i=BEM.blocks.keycodes;i.is(e,this.params.prvntKeys)&&t.preventDefault(),i.is(e,this.params.pressKeys)&&(this.delMod("pressed"),i.is(e,this.params.clickKeys)&&(this._preventClick=!0,this._processClick(t)))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["SPACE","ENTER"],prvntKeys:[],clickKeys:[]})}},{live:function(){return this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("keydown",function(t){this._onKeydown(t)}).liveBindTo("keyup",function(t){this._onKeyup(t)}),this.__base()}}),BEM.DOM.decl("button2",{onSetMod:{hovered:{yes:function(){return!this.hasMod("disabled")}},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered")}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")},_onClick:function(){this.__base.apply(this,arguments),this._isDestructing||this.setMod("focused","yes")}},{live:function(){return 8===BEM.blocks["i-ua"].ie&&this.liveBindTo("dblclick",function(t){this.hasMod("disabled")||this._onClick(t)}),this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("mousedown",function(t){t.preventDefault()}),this.__base()}}),BEM.decl("fi-metrika",{onSetMod:{js:function(){var t=this.params.counterId,e=$.Deferred(),i="yaCounter"+t;if(this._counterPromise=e.promise(),window[i])e.resolve(window[i]);else{var n="yacounter"+t+"inited";$(document).one(n,function(){e.resolve(window[i])})}}},run:function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];this._counterPromise.then(function(e){e[t].apply(e,i)})},reachGoal:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.run.apply(this,["reachGoal"].concat(e))},setParams:function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];this.run.apply(this,["params"].concat(e))}},{counters:[],getCounter:function(t){return this.counters[t]||(this.counters[t]=BEM.create(this._name,{counterId:t})),this.counters[t]},getDefaultCounter:function(){var t=BEM.blocks["i-global"].param("metrikaId");return this.getCounter(t)},reachGoal:function(){var t;(t=this.getDefaultCounter()).reachGoal.apply(t,arguments)},setParams:function(){var t;(t=this.getDefaultCounter()).setParams.apply(t,arguments)}}),BEM.DOM.decl({block:"button2",modName:"has-metrika",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("click",this._sendMetrika)}},_sendMetrika:function(){var t=this.params,e=t.metrikaParams,i=t.metrikaGoal;i?BEM.blocks["fi-metrika"].reachGoal(i,e):e&&BEM.blocks["fi-metrika"].setParams(e)}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._url=this.params._url||this.domElem.attr("href")}},disabled:{"":function(){this.__base.apply(this,arguments),this.domElem.attr("tabindex",this.params._tabindex).attr("href",this._url)},yes:function(){this.__base.apply(this,arguments),void 0!==this._url&&this.domElem.attr("tabindex",-1),this.domElem.removeAttr("href")}}},getUrl:function(){return this._url},setUrl:function(t){return this._url=t,this.hasMod("disabled")||this.domElem.attr("href",t),this},getDefaultParams:function(){return $.extend(this.__base(),{pressKeys:["ENTER"]})}}),BEM.DOM.decl({block:"button2",modName:"type",modVal:"link"},{},{live:function(){return this.liveBindTo("dragend",function(t){this.hasMod("type","link")&&!this.hasMod("disabled")&&this.delMod("pressed")}),this.__base()}}),BEM.DOM.decl("user2",{onSetMod:{js:{inited:function(){if(this._retpath=this.params._retpath,this._isAuthorized=Boolean(this.params._uid),!this._isAuthorized)return!0;this._currentAccount=this.findBlockOn("current-account","user-account"),this._popup=this.findBlockInside("popup2").setAnchor(this._currentAccount),this._menu=this.findBlockInside("menu"),this._exitItem=this.elem("menu-item","action","exit"),this._plusItem=this.elem("menu-item","action","plus"),this._addItem=this.elem("add-account"),this._accountsContainer=this.findElem(this._menu.domElem,"accounts-container"),this._menuCounter=this.findElem("menu-counter"),this.bindTo("menu-item","pointerclick",this._onMenuItemClick),this.bindTo(this._exitItem,"pointerclick",this._onLogout),BEM.blocks["user-account"].on(this._accountsContainer,"click",this._onAccountClick,this),BEM.blocks["user-account"].on(this._accountsContainer,"logout",this._processLogout,this)}},opened:{yes:function(){this.domElem.attr("aria-expanded",!0),this._popup.setMod("visible","yes").on("beforeClose",this._onPopupClose,this),this._setMaxHeight(),this.bindToWin("resize orientchange",this._setMaxHeight),this._popup.on("beforeOpen",function(){this._onPopupOpen(),this._popup.un("beforeOpen",this._onPopupOpen,this)},this)},"":function(){var t=this.trigger("beforeClose");if(t.isDefaultPrevented&&t.isDefaultPrevented())return!1;this.unbindFromWin("resize orientchange",this._setMaxHeight),this.domElem.attr("aria-expanded",!1),this._popup.delMod("visible").un("beforeClose",this._onPopupClose,this)}}},destruct:function(){return this._isAuthorized&&(BEM.blocks["user-account"].un(this._accountsContainer,"click",this._onAccountClick,this),BEM.blocks["user-account"].un(this._accountsContainer,"logout",this._processLogout,this)),this.__base.apply(this,arguments)},setUnreadCount:function(t){var e=this._menu.findBlockInside("user-account");return this._currentAccount.setCounter(t),e&&e.hasMod("has-ticker")&&e.setCounter(t),this._menuCounter&&(t>0?this.delMod(this._menuCounter,"state","empty"):this.setMod(this._menuCounter,"state","empty"),this._menuCounter[0].innerText=t),this},setRetpath:function(t){this._retpath=t;var e=encodeURIComponent(t);return $().add(this._menu&&this._menu.findElem("item")).add(this.findElem("current-account")).add(this.findElem("a11y-exit")).add(this.findElem("enter")).add(this._addItem).each(function(t,i){var n=$(i),o=n.attr("href");if(o){var s=o.replace(/([\&\?]retpath=)[^\&]*/,"$1"+e);s!==o&&n.attr("href",s)}}),this},getPopup:function(){return this._popup},getMenu:function(){return this._menu},getCurrentAccount:function(){return this._currentAccount},_changeUser:function(t){var e=this.params._passportHost+"/passport?mode=embeddedauth";$('<form method="POST" action="'+e+'"><input type="hidden" name="action"  value="change_default"><input type="hidden" name="uid"     value="'+t+'"><input type="hidden" name="retpath" value="'+this._retpath+'"><input type="hidden" name="yu"      value="'+this.params._yu+'"></form>').appendTo("body").submit()},_onCurrentAccountClick:function(t,e){t.block===this._currentAccount&&(e.domEvent.preventDefault(),this.toggleMod("opened","yes"),this.trigger("current-account-click"))},_onAccountClick:function(t,e){if(!e.isLogout){var i=this.elemParams(t.block.domElem).uid;this._changeUser(i)}},_onPopupClose:function(){this.delMod("opened")},_onPopupOpen:function(){this.trigger("beforeOpen")},_processLogout:function(t,e){var i=this.elemParams(t.target.domElem).uid;i&&this.trigger("logout-click",{uid:i,account:t.target})},_onMenuItemClick:function(t){this.trigger("menu-item-click")},_onLogout:function(t){this.trigger("logout")},_setMaxHeight:function(){var t=BEM.DOM.win,e=this.params.menuMaxHeight;e||(e=t.height()-this.domElem.offset().top+t.scrollTop()),this._menu.domElem.css("max-height",e)},getDefaultParams:function(){return{menuMaxHeight:0}}},{live:function(){this.liveInitOnBlockInsideEvent("init","user-account"),this.liveInitOnBlockInsideEvent("click","user-account",this.prototype._onCurrentAccountClick),this.liveBindTo("enter","pointerclick",function(t){this.trigger("login")})}}),function(t){var e=t.innerWidth>t.innerHeight,i=t.innerWidth,n=$.throttle(function(){var n=t.innerWidth,o=t.innerHeight,s=n>o;s!==e&&n!==i&&($(t).trigger("orientchange",{landscape:s,width:n,height:o}),e=s,i=n)},400);BEM.DOM.win.bind("resize",n),BEM.DOM.decl("i-ua",{onSetMod:{js:{inited:function(){this.bindToWin("orientchange",this._onOrientChange,this).__base.apply(this,arguments)}}},_onOrientChange:function(t,e){var i=this.__self,n=document.documentElement,o=n.className,s="i-ua_orient_"+(e.landscape?"landscape":"portrait");-1===o.indexOf(s)&&(n.className=o.replace(/\bi-ua_orient_\w+\b/,s)),i.width=e.width,i.height=e.height,i.landscape=e.landscape}},{width:t.innerWidth,height:t.innerHeight,landscape:e})}(window),BEM.DOM.decl("user-account",{setCounter:function(t){var e=this.findBlockInside("ticker");e&&e.val(t)},_onClick:function(t){var e={domEvent:t};this.isLogoutClick&&(e.isLogout=!0,this.isLogoutClick=!1),this.trigger("click",e)},_onMouseOver:function(t){this.setMod("hovered","yes").bindTo("mouseleave",this._onMouseLeave)},_onMouseLeave:function(){this.delMod("hovered").unbindFrom("mouseleave")},_onFocusIn:function(t){this.trigger("focus").setMod("focused","yes").bindTo("focusout",this._onFocusOut)},_onFocusOut:function(){this.trigger("blur").delMod("focused").unbindFrom("focusout")},_onLogoutClick:function(){this.isLogoutClick=!0,this.trigger("logout")}},{live:function(){this.liveBindTo("pointerclick",this.prototype._onClick),this.liveBindTo("focusin",this.prototype._onFocusIn),this.liveBindTo("mouseover",this.prototype._onMouseOver),this.liveBindTo("logout","pointerclick",this.prototype._onLogoutClick)}}),BEM.DOM.decl({block:"link",modName:"pseudo",modVal:"yes"},{_onClick:function(t){t.preventDefault(),this.hasMod("disabled")||this.trigger("click",this._buildClickEventData(t))},_onKeydown:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&t.preventDefault(),this.setMod("pressed","yes"))},_onKeyup:function(t){BEM.blocks.keycodes.is(t.keyCode,"ENTER","SPACE")&&(BEM.blocks.keycodes.is(t.keyCode,"SPACE")&&this.trigger("click"),this.delMod("pressed"))},_buildClickEventData:function(t){return{domEvent:t,isModKey:t.ctrlKey||t.altKey||t.metaKey||t.shiftKey}}},{live:function(){return this.liveBindTo({modName:"pseudo",modVal:"yes"},"pointerclick",function(t){this._onClick(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo({modName:"pseudo",modVal:"yes"},"keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}),this.__base()}}),function(t){var e=1,i=!1;if("deviceXDPI"in screen&&"logicalXDPI"in screen?e=screen.deviceXDPI/screen.logicalXDPI:"devicePixelRatio"in t&&(e=t.devicePixelRatio),"function"==typeof t.matchMedia){i=t.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx), only screen and (min-resolution: 124dpi)").matches}else i=e>=1.3;BEM.DOM.decl("i-ua",{},{dpr:e,hiDpi:i})}(window),BEM.DOM.decl({block:"user-account",modName:"has-ticker",modVal:"yes"},{getTicker:function(){return this.findBlockOn("ticker","ticker")}}),BEM.DOM.decl("ticker",{onSetMod:{js:{inited:function(){this._count=this.params.count}}},show:function(){return this.setMod("state","normal")},hide:function(){return this.setMod("state","empty")},val:function(t){if(!arguments.length)return this._count;var e=this.params.maxCount;return this._count=t,this.elem("value").attr("title",t).text(t>e?e:t),t?this.show():this.hide(),this}}),BEM.DOM.decl({block:"menu",baseBlock:"control"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.elem("item").attr("id",function(t,e){return e||$.identify()}),this._val=this.getVal()}},disabled:function(t,e){this.__base.apply(this,arguments),this.setMod(this.elem("item"),t,e)}},onElemSetMod:{item:{hovered:{yes:function(t){if(this.hasMod(t,"disabled"))return!1;this.delMod(this.elem("item","hovered","yes"),"hovered"),this.domElem.attr("aria-activedescendant",t.attr("id")),this.trigger("item-hover",{item:t})},"":function(){this.domElem.removeAttr("aria-activedescendant"),this.trigger("item-hover",{})}},checked:function(t,e,i){this.domElem.attr("aria-selected",Boolean(i))},disabled:{yes:function(){this.delMod("hovered"),this.domElem.attr("aria-disabled",!0)},"":function(){this.domElem.attr("aria-disabled",!1)}}}},_onChange:function(){var t=this._val,e=this.getVal();return t!==e&&(this._val=e,this.trigger("change",{prevVal:t,currVal:e})),this},getItems:function(t,e){return this.elem("item",t,e).get().map(function(t){return $(t)})},setContent:function(t){return BEM.DOM.update(this.domElem,t),this.reset(),this},getVal:function(){},reset:function(){this.dropElemCache()},_onItemEnter:function(t,e){this.setMod(t,"hovered","yes")},_onItemLeave:function(t,e){this.delMod(t,"hovered")},_onItemFocusin:function(t,e){this.setMod(t,"hovered","yes")},_onFocusout:function(t){this.__base.apply(this,arguments),this.delMod(this.elem("item","hovered","yes"),"hovered")},_onItemClick:function(t,e,i){this.trigger("click",{item:t,source:i.source})}},{live:function(){return this.liveBindTo("item","pointerover pointerout",function(t){var e=t.data.domElem;this.hasMod(e,"disabled","yes")||e[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onItemEnter(e,t):this._onItemLeave(e,t))}).liveBindTo("item","pointerclick",function(t){var e=t.data.domElem;this.hasMod(e,"disabled")||this._onItemClick(e,t,{source:"pointer"})}).liveBindTo("item","focusin",function(t){var e=t.data.domElem;this.hasMod(e,"disabled")||this._onItemFocusin(e,t)}).liveBindTo("focusout",function(t){this._onFocusout(t)}),this.__base()}}),BEM.DOM.decl("menu",{onSetMod:{focused:{yes:function(){if(this.__base.apply(this,arguments),this.hasMod("type","navigation"))return!1;this.elem("item","hovered","yes").length||(this.setMod(this.elem("item").eq(0),"hovered","yes"),this._scrollToItem(this.elem("item").eq(0))),this.bindToDoc("keydown",this._onKeydown).bindToDoc("keyup",this._onKeyup).bindToDoc("keypress",this._onKeypress)},"":function(){this.__base.apply(this,arguments),this.unbindFromDoc("keydown keyup keypress").delMod(this.elem("item","hovered","yes"),"hovered")}}},hoverNext:function(t){for(var e,i,n=t?this.getItems().reverse():this.getItems(),o=0,s=!1;i=n[o];o++)if(!this.hasMod(i,"disabled"))if(this.hasMod(i,"hovered"))s=!0;else{if(s){e=i;break}e||(e=i)}e&&(this.setMod(e,"hovered","yes"),this._scrollToItem(e))},hoverText:function(t,e){for(var i,n=this.getItems(),o=n.length,s=this._normalizeText(t),r=e||0;r<o;){if(i=n[r],!this.hasMod(i,"disabled")&&0===this._normalizeText(i.text()).indexOf(s))return this.setMod(i,"hovered","yes"),void this._scrollToItem(i);++r===n.length&&(r=0,o=e)}},_normalizeText:function(t){return t.toLowerCase().replace(/ё/,"е")},reset:function(){this.__base.apply(this,arguments),this._dropSearchCache()},_dropSearchCache:function(){this._lastTime=this._lastChar=this._searchTerm=void 0},_scrollToItem:function(t){var e=this.domElem.offset().top,i=t.offset().top,n=0;i<e?n=i-e:(n=i+t.outerHeight()-e-this.domElem.outerHeight())<0&&(n=0),this.domElem.scrollTop(this.domElem.scrollTop()+n)},_onKeydown:function(t,e){var i=BEM.blocks.keycodes,n=t.keyCode;t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||((i.is(n,"UP","DOWN")||!e&&n===i.SPACE)&&t.preventDefault(),i.is(n,"UP","DOWN")&&(this.hoverNext(i.is(n,"UP")),this._dropSearchCache()))},_onKeyup:function(t){var e=BEM.blocks.keycodes,i=t.keyCode;t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||e.is(i,"ENTER","SPACE")&&this._onItemClick(this.elem("item","hovered","yes"),t,{source:"keyboard"})},_onKeypress:function(t){var e,i,n=Number(new Date),o=t.charCode,s=String.fromCharCode(o).toLowerCase(),r=s===this._lastChar&&1===this._searchTerm.length,a=this.getItems();o<=BEM.blocks.keycodes.SPACE||t.ctrlKey||t.altKey||t.metaKey?this._lastTime=n:(n-this._lastTime>this.SEARCH_TIMEOUT||r?this._searchTerm=s:this._searchTerm=(this._searchTerm||"")+s,this._lastChar=s,this._lastTime=n,e=this.elem("item","hovered","yes"),i=(i=$($.map(a,function(t){return t.get()})).index(e))>=0?i:0,r&&0===this._normalizeText(e.text()).indexOf(this._searchTerm)&&(i=i>=a.length-1?0:i+1),this.hoverText(this._searchTerm,i))},SEARCH_TIMEOUT:1500}),BEM.DOM.decl("user",{redraw:function(){return this}},{getLogoutUrl:function(){var t=BEM.blocks["i-global"],e=t.param("retpath"),i=t.param("yandexuid");return[t.param("passport-host"),"/passport?mode=logout",i?"&yu="+i:"",e?"&retpath="+encodeURIComponent(e):""].join("")}}),BEM.decl("i-common__string",{},{cleverSubstring:function(t,e,i){return t.length>e+i?t.substring(0,e-1)+"…":t},escapeHTML:function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return function(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return t[e]||e})}}(),escapeRegExp:function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){if(this.__base.apply(this,arguments),this.elem("name").length){var t=this,e=t.elemParams("name");e.isUglyUserName&&BEM.blocks["i-user-services"].get(function(i){var n=BEM.blocks["i-common__string"].cleverSubstring,o=BEM.blocks["i-common__string"].escapeHTML,s=n(Object(i.displayName).name||i.login,e.maxLength,e.maxLengthRelative);s='<span class="user__first-letter">'+o(s.charAt(0))+"</span>"+o(s.slice(1)),t.elem("name").html(s),t.trigger("update-name")})}}}},toggleCollapsed:function(t){return this.toggleMod("hide-name","yes","",t)}}),BEM.decl("i-user-services",{},{get:function(t){this._data?t(this._data):this._get(t)},getApiUrl:function(){return BEM.blocks["i-global"].param("pass-host")+"/services?callback=?"},_callbacks:[],_get:function(t){var e=this;e._callbacks.push(t),1===e._callbacks.length&&$.getJSON(e.getApiUrl(),{locale:BEM.blocks["i-global"].param("lang"),login:"yes","current-login":BEM.blocks["i-global"].param("login"),yu:$.cookie("yandexuid")},function(t){e._data=t,$.each(e._callbacks,function(){this(t)}),e._callbacks.length=0})}}),BEM.DOM.decl({block:"user2",modName:"fetch-accounts",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._accountsElem=this.findElem(this._menu.domElem,"accounts"),this._accountsSpin=this.findBlockInside(this._accountsElem,"spin2"),this._accountsDataProvider=BEM.create(this.params.accountsDataProvider,{callbackCtx:this,accountsUrl:this.params.accountsUrl}),this._fetchAccounts()}}},onElemSetMod:{accounts:{loading:function(t,e,i){this._accountsSpin.setMod("progress",i),this._popup.redraw()}}},_fetchAccounts:function(){var t=this.hasMod("has-logout"),e=void 0!==this.params._plus;this.setMod(this._accountsElem,"loading","yes"),this._accountsDataProvider.get({yu:this.params._yu},function(i){var n="",o=!0,s={avatarHost:this.params._avatarHost||"",maxLength:this.params.maxLength||"",provider:this.getMod("provider")||""};if(i.accounts){var r=this.params.accountsMax,a=i.accounts.reduce(function(t,e){return t.length<r&&e.uid!==i.default_uid&&t.push(e),t},[]).map(this.__self.accountToBemjson(s)).map(function(i){return t&&(i.mods=$.extend(i.mods||{},{"has-logout":"yes"})),e||(i.pic.plus=!1),{block:"menu",elem:"item",content:i}});n=BEMHTML.apply(a),o=Boolean(i["can-add-more"])}this.findElem(this._accountsElem,"accounts-container").html(n),this.updateCounters&&this.updateCounters(),this.toggleMod(this.findElem(this._accountsElem,"add-account"),"hidden","","yes",o),this.delMod(this._accountsElem,"loading")})},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{accountsDataProvider:"user2__accounts-provider",accountsMax:this._params.accountsMax||5,maxLength:this._params.maxLength||16})}},{accountToBemjson:function(t){return function(e){var i=Boolean(e.displayName.default_avatar),n=e.attributes.has_plus;return{block:"user-account",mix:[{block:"user2",elem:"account",js:{uid:e.uid}}],mods:{provider:t.provider},pic:{avatarId:e.displayName.default_avatar,plus:n},name:e.displayName.name,subname:e.defaultEmail||e.displayName.social,ticker:i?{count:0,maxCount:99}:void 0,avatarHost:t.avatarHost,maxLength:t.maxLength}}}}),BEM.DOM.decl({block:"user2",modName:"fetch-accounts",modVal:"yes"},{onElemSetMod:{accounts:{loading:function(){var t={dataType:"json",xhrFields:{withCredentials:!0}},e=this._accountsDataProvider.get.__base;this._accountsDataProvider.get=function(){var i=Array.from(arguments);return"[object Object]"===Object.prototype.toString.call(arguments[arguments.length-1])?i[i.length-1]=_extends({},i[i.length-1],t):i[i.length]=t,e.apply(this,i)},this.__base.apply(this,arguments)}}}}),function(){var t={};BEM.decl("i-request",{onSetMod:{js:{inited:function(){this._preventCache=!1}}},get:function(t,e,i,n){return $.isFunction(i)||(n=i,i=this.params.onError),this._get(t,e,i,$.extend({},this.params,n)),this},_get:function(e,i,n,o){var s=this._buildCacheKey(e,o),r=t[o.cacheGroup];o.cache&&r&&s in r.data?this.afterCurrentEvent(function(){i.call(this.params.callbackCtx,r.data[s])},this):this._do(e,i,n,o)},_do:function(t,e,i,n){},_onSuccess:function(t,e,i,n){n.cache&&!this._preventCache&&this.putToCache(n,t,i),this._preventCache=!1},_buildCacheKey:function(t,e){return"string"==typeof t?t:$.param(t)},putToCache:function(e,i,n){var o=t[e.cacheGroup]||(t[e.cacheGroup]={keys:[],data:{}});o.keys.length>=e.cacheSize&&delete o.data[o.keys.shift()];var s=this._buildCacheKey(i,e);return o.data[s]=n,o.keys.push(s),this},dropCache:function(){return delete t[this.params.cacheGroup],this},getDefaultParams:function(){return{cache:!1,cacheGroup:"default",cacheSize:100,callbackCtx:this}}},{_cache:t})}(),BEM.decl("i-request",{get:function(t){t=$.extend({},this._getPageContext(),t);for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return this.__base.apply(this,[t].concat(i))},_getPageContext:function(){return{context:BEM.blocks["i-global"].param("pageContext")}}}),BEM.decl({block:"i-request_type_ajax",baseBlock:"i-request"},{onSetMod:{js:{inited:function(){this.__base(),this._requestNumber=this._number=this._preventNumber=this._retryCount=0}}},_get:function(t,e,i,n){this._number++,this._requestNumber++,this._retryCount=n.retryCount,this.__base.apply(this,arguments)},_do:function(t,e,i,n){var o=this;if(o._number>o._preventNumber){var s=arguments,r={data:n.data?$.extend({},n.data,t):t},a=o._wrapCallback(function(i,s,r){o._onSuccess(o._buildCacheKey(t,n),t,i[0],n),o._allowCallback(s,r)&&e.apply(n.callbackCtx,i)}),c=o._wrapCallback(function(t,e,r){o._allowCallback(e,r)&&(o._retryCount-- >0?setTimeout(function(){o._do.apply(o,s)},n.retryInterval):i&&i.apply(n.callbackCtx,t))});$.each(["url","dataType","timeout","type","jsonp","jsonpCallback","xhrFields"].concat(n.paramsToSettings||[]),function(t,e){r[e]=n[e]}),$.ajax(r).done(a).fail(c)}},_wrapCallback:function(t){var e=this._requestNumber,i=this._number;return function(n){null!==n&&t(arguments,e,i)}},_allowCallback:function(t,e){return e>this._preventNumber&&this._requestNumber===t},_buildCacheKey:function(t,e){return"string"==typeof t?t:this.__base(t)+e.url},abort:function(){this._preventNumber=++this._number},getDefaultParams:function(){return $.extend(this.__base(),{cache:!0,type:"GET",dataType:"jsonp",timeout:2e4,retryCount:0,retryInterval:2e3})}}),BEM.decl({block:"user2__accounts-provider",baseBlock:"i-request_type_ajax"},{getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{url:this._params.accountsUrl,timeout:5e3})}}),BEM.DOM.decl({block:"user2",modName:"fetch-unread",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._unreadDataProvider=BEM.create(this.params.unreadDataProvider,{callbackCtx:this,exportHost:this.params.exportHost}),this._fetchUnread()}}},_fetchUnread:function(){this._unreadDataProvider.get({key:this.params._yu},this._onFetchUnreadSuccess)},_onFetchUnreadSuccess:function(t){this.setUnreadCount(t.unread||0)},getDefaultParams:function(){return $.extend(this.__base.apply(this,arguments),{unreadDataProvider:"user2__unread-provider"})}}),BEM.decl({block:"user2__unread-provider",baseBlock:"i-request_type_ajax"},{getDefaultParams:function(){var t=this._params.exportHost||"https://export.yandex.ru";return $.extend(this.__base.apply(this,arguments),{url:t+"/for/unread.xml",cache:!1})}}),BEM.blocks["cf-helpers"]={getStorage:function(t){var e=null;try{(e="sessionStorage"===t?window.sessionStorage:window.localStorage).setItem("foo","bar"),e.removeItem("foo")}catch(t){return!1}return{storage:e,setItem:function(t,i){try{return"string"!=typeof i&&(i=JSON.stringify(i)),e.setItem(t,i),!0}catch(t){}return!1},getItem:function(t){try{return e.getItem(t)}catch(t){}return!1},getData:function(t){try{return JSON.parse(e.getItem(t))}catch(t){}return!1},removeItem:function(t){try{return e.removeItem(t),!0}catch(t){}return!1}}},buildPath:function(t){return(BEM.blocks["i-global"].param("basePath")+"/"+t).replace(/\/+/g,"/")},buildStaticPath:function(t){return BEM.blocks["i-global"].param("staticPath")+t},getDraftStorageKey:function(t){var e="form_draft_"+t;return window.name&&window.parent!==window&&(e+="_name_"+window.name),e},postMessage:function(t){var e=window.parent,i=window.name,n=t;i&&("string"==typeof n?(e.postMessage(n,"*"),n={name:i,message:t}):n.name=i),"string"!=typeof n&&(n=JSON.stringify(n)),e.postMessage(n,"*")}},BEM.DOM.decl("b-page",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.findBlockOn("i-global"),this._initServices()}},_initServices:function(){BEM.create("i-update-secretkey"),BEM.create("auth-cookie")}}),function(t,e){if(!t)throw new Error("Rum: interface is not included");if(!t.enabled)return t.getSetting=function(){return""},t.getVarsList=function(){return[]},void(t.getResourceTimings=t.pushConnectionTypeTo=t.pushTimingTo=t.normalize=t.sendCounter=t.sendDelta=t.sendTimeMark=t.sendResTiming=t.sendTTI=t.makeSubPage=t.sendHeroElement=t.onReady=function(){});t.getVarsList=function(){var e=t._vars;return Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t]).replace(/\*/g,"%2A")})},t.setVars=function(e){Object.keys(e).forEach(function(i){t._vars[i]=e[i]}),x(),I()};var i,n,o="690.1033",s="690.2096.207",r="690.2096.2877",a="690.2096.2044",c="690.2096.361",l="690.2096.4004",u=10,h=3e3,d=2e4,p={connectEnd:2116,connectStart:2114,decodedBodySize:2886,domComplete:2124,domContentLoadedEventEnd:2131,domContentLoadedEventStart:2123,domInteractive:2770,domLoading:2769,domainLookupEnd:2113,domainLookupStart:2112,duration:2136,encodedBodySize:2887,entryType:2888,fetchStart:2111,initiatorType:2889,loadEventEnd:2126,loadEventStart:2125,nextHopProtocol:2890,redirectCount:1385,redirectEnd:2110,redirectStart:2109,requestStart:2117,responseEnd:2120,responseStart:2119,secureConnectionStart:2115,startTime:2322,transferSize:2323,type:76,unloadEventEnd:2128,unloadEventStart:2127,workerStart:2137},f={visible:1,hidden:2,prerender:3},m={bluetooth:2064,cellular:2065,ethernet:2066,none:1229,wifi:2067,wimax:2068,other:861,unknown:836,0:836,1:2066,2:2067,3:2070,4:2071,5:2768},_={"first-paint":2793,"first-contentful-paint":2794},g=Object.keys(_).length,v=t.getTime,b=window.PerformanceObserver,y=window.performance||{},M=y.timing||{},E=y.navigation||{},k=navigator.connection,D={},B={},C=t._deltaMarks,w=document.createElement("link"),S=document.createElement("a"),P="function"==typeof y.getEntriesByType,T=M.navigationStart;function x(){i=t.getVarsList(),t.getSetting("sendClientUa")&&i.push("1042="+encodeURIComponent(navigator.userAgent))}function I(){n=i.concat(["143.2129="+T])}if(x(),I(),t.ajaxStart=0,t.ajaxComplete=0,b)try{new b(function(t,e){var n=t.getEntriesByType("navigation")[0];if(n){e&&e.disconnect();var o=[];rt(o,n),it(o),ct("690.2096.2892",i.concat(o))}}).observe({entryTypes:["navigation"]})}catch(t){}function O(t){function e(){removeEventListener("DOMContentLoaded",e),removeEventListener("load",e),t()}"loading"===document.readyState?(addEventListener("DOMContentLoaded",e),addEventListener("load",e)):t()}function F(){t.getSetting("disableOnLoadTasks")||(removeEventListener("load",F),function(){var e=t.getSetting("periodicStatsIntervalMs");e||null===e||(e=15e3);e&&(N=setInterval(U,e));addEventListener("beforeunload",U)}(),function(){if(!b)return;Y(y.getEntriesByType("navigation")),Y(y.getEntriesByType("resource"));try{new b(function(t){Y(t.getEntries())}).observe({entryTypes:["resource","navigation"]})}catch(t){}t._periodicTasks.push(Q)}(),function(){if(!b)return;try{new b(function(t,e){var i=t.getEntries()[0];if(i){var n=i.processingStart-i.startTime;H("first-input",n),e.disconnect()}}).observe({type:"first-input",buffered:!0})}catch(t){}}(),function(){if(!b)return;var t=new b(function(t){var e=t.getEntries();null==$&&($=0);for(var i=0;i<e.length;i++){var n=e[i];n.hadRecentInput||($+=n.value)}});try{t.observe({type:"layout-shift",buffered:!0})}catch(t){}addEventListener("visibilitychange",function e(){if("hidden"===document.visibilityState){removeEventListener("visibilitychange",e);try{"function"==typeof t.takeRecords&&t.takeRecords(),t.disconnect()}catch(t){}G()}}),addEventListener("beforeunload",G)}(),function(){if(!b||!t.getSetting("forcePaintTimeSending")&&t.isVisibilityChanged())return;var e=new b(function(t){for(var e=t.getEntries(),i=0;i<e.length;i++){var n=e[i];X=n.renderTime||n.loadTime}Z||(R("largest-loading-elem-paint",X),Z=!0)});try{e.observe({type:"largest-contentful-paint",buffered:!0})}catch(t){}addEventListener("visibilitychange",function t(){if("hidden"===document.visibilityState){removeEventListener("visibilitychange",t);try{"function"==typeof e.takeRecords&&e.takeRecords(),e.disconnect()}catch(t){}J()}}),addEventListener("beforeunload",J)}())}function A(){var e=M.domContentLoadedEventStart,n=M.domContentLoadedEventEnd;if(0!==e||0!==n){var s=i.concat(["2129="+T,"1036="+(M.domainLookupStart-T),"1037="+(M.domainLookupEnd-M.domainLookupStart),"1038="+(M.connectEnd-M.connectStart),M.secureConnectionStart&&"1383="+(M.connectEnd-M.secureConnectionStart),"1039="+(M.responseStart-M.connectEnd),"1040="+(M.responseEnd-M.responseStart),"1040.906="+(M.responseEnd-M.domainLookupStart),"1310.2084="+(M.domLoading-M.responseStart),"1310.2085="+(M.domInteractive-M.responseStart),"1310.1309="+(n-e),"1310.1007="+(e-M.responseStart),navigator.deviceMemory&&"3140="+navigator.deviceMemory,navigator.hardwareConcurrency&&"3141="+navigator.hardwareConcurrency]);Object.keys(p).forEach(function(t){t in M&&M[t]&&s.push(p[t]+"="+at(M[t],T))}),t.vsStart?(s.push("1484="+(f[t.vsStart]||2771)),t.vsChanged&&s.push("1484.719=1")):s.push("1484="+f.visible),E&&(E.redirectCount&&s.push("1384.1385="+E.redirectCount),1!==E.type&&2!==E.type||s.push("770.76="+E.type)),it(s),ct(o,s)}else setTimeout(A,50)}O(function(){if(!T)return;setTimeout(function(){t.sendTimeMark=R,t.sendResTiming=z,t.timeEnd=q;for(var e=t._defRes;e.length;){var i=e.shift();z(i[0],i[1])}for(var n=t._defTimes;n.length;){var o=n.shift();R(o[0],o[1],!1,o[2])}Object.keys(C).forEach(function(t){H(t)}),A(),function e(){if(!P||!t.getSetting("forcePaintTimeSending")&&t.isVisibilityChanged())return;var i=y.getEntriesByType("paint");for(var n=0;n<i.length;n++){var o=i[n],s=_[o.name];s&&!L[o.name]&&(L[o.name]=!0,j++,R("1926."+s,o.startTime))}if(j<g)try{new b(function(t,i){e(),i&&i.disconnect()}).observe({entryTypes:["paint"]})}catch(t){}}(),t.getSetting("sendAutoElementTiming")&&tt(),et(),"complete"===document.readyState?F():addEventListener("load",F)},0)}),t._getCommonVars=function(){return i};var N,L={},j=0;function R(i,n,o,r){n===e&&(n=v()),o!==e&&!0!==o||t.mark(i,n);var a=st(i);if(a.push("207="+at(n)),V(a,r)){ct(s,a),D[i]=D[i]||[],D[i].push(n);var c=t._markListeners[i];c&&c.length&&c.forEach(function(t){t(n)})}}function V(t,i){if(i){if(i.isCanceled&&i.isCanceled())return!1;var n=t.reduce(function(t,e,i){"string"==typeof e&&(t[e.split("=")[0]]=i);return t},{});Object.keys(i).forEach(function(o){if("function"!=typeof i[o]){var s=n[o],r=o+"="+i[o];s===e?t.push(r):t[s]=r}})}return!0}function q(t,e){var i=C[t];i&&0!==i.length&&(i.push(v(),e),H(t))}function H(i,n,o){var s,a,c,l=C[i];if(void 0!==n?s=(a=t.getTime())-n:l&&(s=l[0],a=l[1],c=l[2]),s!==e&&a!==e){var u=st(i);u.push("207.2154="+at(s),"207.1428="+at(a),"2877="+at(a-s)),V(u,o)&&V(u,c)&&(ct(r,u),delete C[i])}}function z(e,i){nt(i,function(n){if(n){var o=st(e);t.getSetting("sendUrlInResTiming")&&o.push("13="+encodeURIComponent(i)),rt(o,n[0]),ct(a,o)}})}function U(){var e=!1;t._periodicTasks.forEach(function(t){t()&&(e=!0)}),e||clearInterval(N)}t.getTimeMarks=function(){return D},t._periodicTasks=[];var $,K=0;function Y(t){if(t&&t.length)for(var e=B,i=0;i<t.length;i++){var n=W(t[i]);if(n){var o=n.domain+"-"+n.extension,s=e[o]=e[o]||{count:0,size:0};s.count++,s.size+=n.size}}}function W(t){var e=t.transferSize;if(null!=e){S.href=t.name;var i=S.pathname;if(0!==i.indexOf("/clck")){var n=i.lastIndexOf("."),o="";return-1!=n&&i.lastIndexOf("/")<n&&i.length-n<=5&&(o=i.slice(n+1)),{size:e,domain:S.hostname,extension:o}}}}function Q(){var e=t.getSetting("maxTrafficCounters")||250;if(K>=e)return!1;for(var n=Object.keys(B),o="",s=0;s<n.length;s++){var r=n[s],a=B[r];o+=encodeURIComponent(r)+"!"+a.count+"!"+a.size+";"}if(o.length){K++;var l=i.concat(["d="+o,"t="+at(v())]);ct(c,l)}return B={},K<e}function G(){if(null!=$){var t=Math.round(1e6*$)/1e6;ct(l,i.concat("s="+t)),$=null}}var X=null,Z=!1;function J(){null!=X&&(R("largest-contentful-paint",X),X=null)}var tt=b?function(){if(t.getSetting("forcePaintTimeSending")||!t.isVisibilityChanged())try{new b(function(t){for(var e=t.getEntries(),i=0;i<e.length;i++){var n=e[i];R("element-timing."+n.identifier,n.startTime)}}).observe({type:"element",buffered:!0})}catch(t){}}:function(){};function et(e,i,n){if(t._tti){var o=v(),s=function(e,s,r){var a={2796.2797:ot(r,i),689.2322:at(o)};n&&Object.keys(n).forEach(function(t){a[t]=n[t]}),R(e||"2795",s,!0,a),t._tti.fired=!0};!function n(){var r,a=i||o,c=v(),l=t._tti.events||[],u=l.length;0!==u&&(r=l[u-1],a=Math.max(a,Math.floor(r.startTime+r.duration))),c-a>=h?s(e,a,l):c-a>=d?s(e,(i||o)+d,l):setTimeout(n,1e3)}()}}function it(t){k&&t.push("2437="+(m[k.type]||2771),k.downlinkMax!==e&&"2439="+k.downlinkMax,k.effectiveType&&"2870="+k.effectiveType,k.rtt!==e&&"rtt="+k.rtt,k.downlink!==e&&"dwl="+k.downlink)}function nt(t,e){if(!P)return e(null);w.href=t;var i=w.href,n=0,o=100;setTimeout(function t(){var s=y.getEntriesByName(i);if(s.length)return e(s);n++<u?(setTimeout(t,o),o+=o):e(null)},0)}function ot(t,e){return t=t||[],e=e||0,t.filter(function(t){return t.startTime-e>=-50}).map(function(t){var e=t.name?t.name.split("-").map(function(t){return t[0]}).join(""):"u",i=Math.floor(t.startTime);return e+"-"+i+"-"+Math.floor(i+t.duration)}).join(".")}function st(e){return n.concat(["1701="+e,t.ajaxStart&&"1201.2154="+at(t.ajaxStart),t.ajaxComplete&&"1201.2052="+at(t.ajaxComplete)])}function rt(t,e){Object.keys(p).forEach(function(i){if(i in e){var n=e[i];(n||0===n)&&t.push(p[i]+"="+at(n))}})}function at(t,e){return"string"==typeof t?encodeURIComponent(t):Math.round(1e3*(t-(e||0)))/1e3}function ct(e,i){var n=encodeURIComponent(window.YaStaticRegion||"unknown");i.push("-cdn="+n);var o=i.filter(Boolean).join(",");t.send(null,e,o)}t.sendTTI=et,t.sendHeroElement=function(t){R("2876",t)},t._subpages={},t.makeSubPage=function(e,i){var n=t._subpages[e];t._subpages[e]=void 0===n?n=0:++n;var o=!1;return{689.2322:at(void 0!==i?i:v()),2924:e,2925:n,isCanceled:function(){return o},cancel:function(){o=!0}}},t._getLongtasksStringValue=ot,t.getResourceTimings=nt,t.pushConnectionTypeTo=it,t.pushTimingTo=rt,t.normalize=at,t.sendCounter=ct,t.sendDelta=H,t.sendTrafficData=Q,t.finalizeLayoutShiftScore=G,t.finalizeLargestContentfulPaint=J,t.onReady=O}(Ya.Rum),Ya.Rum.enabled&&addEventListener("load",function t(){removeEventListener("load",t);var e=Ya.Rum;if(e.sendTimeMark("1724"),e.getSetting("sendAutoResTiming"))for(var i=document.querySelectorAll("script[data-rCid], div[data-rCid]"),n=0,o=i.length;n<o;n++){var s=i[n],r=s.src;if(!r){var a=getComputedStyle(s).backgroundImage;if(a){var c=a.match(/^url\(["']?(.*?)["']?\)$/);c&&(r=c[1])}}r&&e.sendResTiming(s.getAttribute("data-rCid"),r)}}),window.BEM&&BEM.channel("i-bem").onFirst("start-init",function(){Ya.Rum.getSetting("sendBeforeBemInited")&&Ya.Rum.sendTimeMark("2418")}).onFirst("init",function(){Ya.Rum.sendTimeMark("2295")}),BEM.decl("auth-cookie",{onSetMod:{js:function(){BEM.blocks["i-global"].param("needReset")&&$.ajax({url:BEM.blocks["i-global"].param("passport-host")+"/auth/update/",xhrFields:{withCredentials:!0}})}}}),BEM.decl("i-update-secretkey",{onSetMod:{js:function(){this.__base.apply(this,arguments),this._savedYandexuid=String(BEM.blocks["i-global"].param("yandexuid")||""),this._savedLogin=String(BEM.blocks["i-global"].param("yandexLoginCookie")||""),this._retry=0,this._setTimer()}},destruct:function(){clearTimeout(this._timer),this.__base.apply(this,arguments)},_setTimer:function(){this._timer=setTimeout(this._checkChanges.bind(this),1e3)},_checkChanges:function(){this._readCurrents(),this._isYandexuidChanged()||this._isLoginChanged()?(this._requestSecretkey(),this._saveCurrents()):this._setTimer()},_readCurrents:function(){this._currentYandexuid=String($.cookie("yandexuid")||""),this._currentLogin=String($.cookie("yandex_login")||"")},_saveCurrents:function(){this._savedYandexuid=this._currentYandexuid,this._savedLogin=this._currentLogin},_isYandexuidChanged:function(){return this._currentYandexuid&&this._currentYandexuid!==this._savedYandexuid},_isLoginChanged:function(){return this._currentLogin.toUpperCase()!==this._savedLogin.toUpperCase()},_requestSecretkey:function(){this._retry+=1,$.ajax({url:BEM.blocks["cf-helpers"].buildPath("/update-sk/"),type:"POST",headers:{"x-visit-id":BEM.blocks["i-global"].param("visitId")},data:{reason:"cookies updated",context:{oldYandexuid:this._savedYandexuid,newYandexuid:this._currentYandexuid,oldLogin:this._savedLogin,newLogin:this._currentLogin,retry:this._retry}},success:this._updateSecretkey.bind(this)})},_updateSecretkey:function(t){$("input[type=hidden][name=sk]").val(t.sk),BEM.blocks["i-global"].param("secretkey",t.sk),this._setTimer()}}),BEM.decl("i-api-request",{run:function(t){return this._defer=$.Deferred(),this._requestOptions=$.extend(this.getDefaultParams(),t),this._isSecretkeyUpdated=!1,this._prepareRequest(),this._send(),this._defer.promise()},getDefaultParams:function(){return{type:"GET",dataType:"json"}},abort:function(){this._request&&this._request.abort()},_send:function(){this._setToken(),this._request=$.ajax(this._requestOptions).done(this._success.bind(this)).fail(this._error.bind(this))},_prepareRequest:function(){var t=this._requestOptions;t.headers=$.extend(t.headers,{"x-visit-id":BEM.blocks["i-global"].param("visitId")}),t.data||(t.data={}),this._setPageContext()},_setToken:function(){this._requestOptions.headers=$.extend(this._requestOptions.headers,{"csrf-token":BEM.blocks["i-global"].param("secretkey")})},_setPageContext:function(){var t=this._requestOptions,e=BEM.blocks["i-global"].param("pageContext"),i=t.data instanceof FormData?function(e,i){t.data.append(e,i)}:function(e,i){t.data[e]=i};Object.keys(e).forEach(function(t){i("context["+t+"]",e[t])})},_success:function(t){this._defer.resolve(t)},_error:function(t){403!==t.status||"Forbidden"!==t.statusText||this._isSecretkeyUpdated?this._defer.reject(t):this._requestSk().done(function(){this._isSecretkeyUpdated=!0,this._send()}.bind(this)).fail(this._defer.reject)},_requestSk:function(){var t={url:BEM.blocks["cf-helpers"].buildPath("/update-sk/"),type:"POST",data:{reason:"request failed",context:{url:this._requestOptions.url}}};return $.ajax(t).done(this._updateSk.bind(this))},_updateSk:function(t){$("input[type=hidden][name=sk]").val(t.sk),BEM.blocks["i-global"].param("secretkey",t.sk)}}),function(t,e){var i={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},n=Array.prototype.map,o=Array.isArray,s=Object.prototype.toString;function r(t){return Boolean(""===t||t&&t.charCodeAt&&t.substr)}function a(t){return o?o(t):"[object Array]"===s.call(t)}function c(t){return Boolean(t)&&"[object Object]"===s.call(t)}function l(t,e){var i=void 0;for(i in t=t||{},e=e||{})e.hasOwnProperty(i)&&null==t[i]&&(t[i]=e[i]);return t}function u(t,e,i){var o,s=[],r=void 0;if(!t)return s;if(n&&t.map===n)return t.map(e,i);for(r=0,o=t.length;r<o;r++)s[r]=e.call(i,t[r],r,t);return s}function h(t,e){return t=Math.round(Math.abs(t)),isNaN(t)?e:t}function d(t){var e=i.settings.currency.format;return"function"==typeof t&&(t=t()),r(t)&&t.match("%v")?{pos:t,neg:t.replace("-","").replace("%v","-%v"),zero:t}:t&&t.pos&&t.pos.match("%v")?t:r(e)?i.settings.currency.format={pos:e,neg:e.replace("%v","-%v"),zero:e}:e}var p,f=i.unformat=i.parse=function(t,e){if(a(t))return u(t,function(t){return f(t,e)});if("number"==typeof(t=t||0))return t;e=e||i.settings.number.decimal;var n=new RegExp("[^0-9-"+e+"]",["g"]),o=parseFloat(String(t).replace(/\((.*)\)/,"-$1").replace(n,"").replace(e,"."));return isNaN(o)?0:o},m=i.toFixed=function(t,e){e=h(e,i.settings.number.precision);var n=Math.pow(10,e);return(Math.round(i.unformat(t)*n)/n).toFixed(e)},_=i.formatNumber=i.format=function(t,e,n,o){if(a(t))return u(t,function(t){return _(t,e,n,o)});t=f(t);var s=l(c(e)?e:{precision:e,thousand:n,decimal:o},i.settings.number),r=h(s.precision),d=t<0?"-":"",p=String(parseInt(m(Math.abs(t||0),r),10)),g=p.length>3?p.length%3:0;return d+(g?p.substr(0,g)+s.thousand:"")+p.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+s.thousand)+(r?s.decimal+m(Math.abs(t),r).split(".")[1]:"")},g=i.formatMoney=function(t){var e=t.number,n=t.symbol,o=t.precision,s=t.thousand,r=t.decimal,p=t.format;if(a(e))return u(e,function(t){return g({val:t,symbol:n,precision:o,thousand:s,decimal:r,format:p})});e=f(e);var m=l(c(n)?n:{symbol:n,precision:o,thousand:s,decimal:r,format:p},i.settings.currency),v=d(m.format);return(e>0?v.pos:e<0?v.neg:v.zero).replace("%s",m.symbol).replace("%v",_(Math.abs(e),h(m.precision),m.thousand,m.decimal))};i.formatColumn=function(t){var e=t.list,n=t.symbol,o=t.precision,s=t.thousand,p=t.decimal,m=t.format;if(!e)return[];var g=l(c(n)?n:{symbol:n,precision:o,thousand:s,decimal:p,format:m},i.settings.currency),v=d(g.format),b=v.pos.indexOf("%s")<v.pos.indexOf("%v"),y=0;return u(u(e,function(t){if(a(t))return i.formatColumn({val:t,opts:g});var e=((t=f(t))>0?v.pos:t<0?v.neg:v.zero).replace("%s",g.symbol).replace("%v",_(Math.abs(t),h(g.precision),g.thousand,g.decimal));return e.length>y&&(y=e.length),e}),function(t){return r(t)&&t.length<y?b?t.replace(g.symbol,g.symbol+new Array(y-t.length+1).join(" ")):new Array(y-t.length+1).join(" ")+t:t})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=i),exports.accounting=i):"function"==typeof define&&define.amd?define([],function(){return i}):(i.noConflict=(p=t.accounting,function(){return t.accounting=p,i.noConflict=void 0,i}),t.accounting=i)}(this),BEM.DOM.decl("survey",{onSetMod:{js:function(){var t=this,e=this,i=e.params.formId,n=BEM.blocks["cf-helpers"],o=n.getStorage("sessionStorage");e.isPreview="yes"===e.getMod("preview"),e.pageNumbers=e.findElem("page").toArray().map(function(t){return e.getMod($(t),"page")}),e.questions=e.findBlocksInside("survey-question"),e.submitButton=e.findBlockInside({block:"button",modName:"role",modVal:"submit"}),e.nextButton=e.findBlockInside({block:"button",modName:"role",modVal:"next"}),e.prevButton=e.findBlockInside({block:"button",modName:"role",modVal:"prev"}),e.submitButton&&e.submitButton.on("click",e.submitClick,this),e.nextButton&&e.nextButton.on("click",e.nextClick,this),e.prevButton&&e.prevButton.on("click",e.prevClick,this),e.metrikaChangeReached=!1,e.saveToNamedFileds(),e.bindTo(e.elem("checkbox").find("a").add(e.elem("radiobox").find("a")),"pointerclick",function(t){t.stopPropagation()}),e.bindTo("captcha-updater","pointerclick",function(t){e.updateCaptcha(t)}),e.bindTo("submit",function(){e.collectClientData(),o&&o.removeItem(n.getDraftStorageKey(i))}),BEM.blocks["survey-question"].on(this.domElem,{addQuestions:function(t,e){this.addQuestions(e)},removeQuestions:function(t,e){this.removeQuestions(e)},change:function(){this.updateMetrikaParams(),this.metrikaChangeReached||(this.goal("ya-forms_start-change"),this.metrikaChangeReached=!0)}},this);var s=this.findBlocksInside({block:"survey-question",mods:{widget:"questions-group"}});s&&s.forEach(function(e){var i=e.getAutoAddedQuestions();i&&t.addQuestions(i)})},progress:function(t,e){this.findBlocksInside("submit-button","button").forEach(function(t){t.setMod("disabled",e)})}},saveToNamedFileds:function(t){var e=this;(t||this.questions).forEach(function(t){var i=t.params.name;i&&(e.namedFields[i]=t)})},submitClick:function(){this.validateSurvey()},_sendSubmitMetriks:function(){this.goal("ya-forms_submit"),BEM.blocks["fi-metrika"].setParams({"Отправка формы":BEM.blocks["i-global"].param("questionsStat")})},nextClick:function(){this.validateSurvey(),this.goal("ya-forms_next")},prevClick:function(){this.showAnotherPage(!1),this.goal("ya-forms_prev")},validateSurvey:function(){this.setMod("progress","yes"),this.trigger("survey-validate")},onValidateSuccess:function(){this.hasMod("isLastPage","yes")?(this._sendSubmitMetriks(),this.domElem.submit()):(this.delMod("progress"),this.showAnotherPage(!0))},onValidateError:function(){this.delMod("progress")},showAnotherPage:function(t){var e=this.getCurrentPage(),i=this.findElem("page","page",e),n=this.getAnotherPageWithQuestions(t),o=this.findElem("page","page",n);this.delMod(i,"visible"),this.setMod(o,"visible","yes"),this.updateButtonStates(),this.trigger("change-page",{fromPage:e,toPage:n})},updateButtonStates:function(){var t=this.getAnotherPageWithQuestions(!1),e=this.getAnotherPageWithQuestions(!0);this.setMod("hasPrevPage",t&&"yes"),this.setMod("hasNextPage",e&&"yes"),this.setMod("isLastPage",!e&&"yes")},getCurrentPage:function(){var t=this.findElem("page","visible","yes");return this.getMod(t,"page")},getCurrentPageQuestions:function(){return this.getPageQuestions(this.getCurrentPage())},getPageQuestions:function(t){var e=this.findElem("page","page",t);return this.findBlocksInside(e,"survey-question")},getAnotherPageWithQuestions:function(t){var e=t?this.pageNumbers:[].concat(this.pageNumbers).reverse(),i=this.getCurrentPage(),n=e.indexOf(i),o=null;return e.slice(n+1).some(function(t){return this.getPageQuestions(t).some(function(e){var i=e.params.groupSlug;if(!(i?this.namedFields[i]:e).hasMod("hidden","yes"))return o=t,!0}.bind(this))}.bind(this)),o},namedFields:{},collectClientData:function(){var t=this.domElem,e=this.collectPlugins(),i={date:new Date,js:!0,parent_origin:document.referrer};e&&(i.plugins=e),Object.keys(i).forEach(function(e){t.find('input[name="'+e+'"]').remove(),$('<input type="hidden" value="">').attr("name",e).val(i[e]).prependTo(t)})},collectPlugins:function(){var t=[];return jQuery.each(navigator.plugins,function(e,i){var n=i.name;i.version?n+=", "+i.version:"Shockwave Flash"===i.name&&(n=i.description),-1===t.indexOf(n)&&t.push(n)}),t.join(" | ")},showAlert:function(t,e,i){var n=i||"";e&&t&&(this.closeAlert(),this.alert||(this.alert=this.findBlockOn($(BEMHTML.apply({block:"popup",mods:{theme:n.theme||"error",role:"survey-alert",autoclosable:"yes"},js:{directions:{to:n.direction||"bottom",axis:"left"},tail:{width:8,height:8}},content:[{elem:"tail"},{elem:"content"}]})),"popup"),BEM.DOM.append(this.domElem,this.alert.domElem)),this.alert.setContent(t).show(e))},closeAlert:function(){this.alert&&this.alert.hide()},updateCaptcha:function(t){var e=t.data&&t.data.domElem||"",i=this;if(e&&!i.hasMod(e,"updating")){var n=(this.elemParams("captcha")||{}).captchaType;i.setMod(e,"updating","yes"),BEM.create("i-api-request").run({type:"POST",url:BEM.blocks["cf-helpers"].buildPath("/surveys/captcha/"),data:{captchaType:n}}).done(function(t){var n=t.image_url,o=t.key,s=e.parents(i.buildSelector("captcha"));s.find('input[type="hidden"]').attr("data-captcha-image-url",n).val(o),s.find(i.buildSelector("captcha-img")).attr("src",n)}).always(function(){i.delMod(e,"updating")})}},removeQuestionsFromStorage:function(t){t.forEach(function(t){t.deleteFromStorage(t.params.name)})},addQuestions:function(t){this.questions=this.questions.concat(t),this.saveToNamedFileds(t),this.findBlockOn("survey-field-filters").addQuestions(t),this.findBlockOn("survey-conditions").addQuestions(t)},removeQuestions:function(t){this.questions=this.findBlocksInside("survey-question"),self.namedFields={},this.saveToNamedFileds(),this.findBlockOn("survey-field-filters").removeQuestions(t),this.findBlockOn("survey-conditions").removeQuestions(t),this.removeQuestionsFromStorage(t)},updateMetrikaParams:function(){this.isPreview||this.metrikaSent||(BEM.blocks["fi-metrika"].setParams({"Начало заполнения формы":BEM.blocks["i-global"].param("questionsStat")}),this.metrikaSent=!0)},goal:function(t){Object.values(this.params.metrikaIds).forEach(function(e){BEM.blocks["fi-metrika"].getCounter(e).reachGoal(t)}),BEM.blocks["fi-metrika"].reachGoal(t)}}),BEM.decl("iframe-height",{},{height:0,init:function(){this._inited||(this._inited=!0,this._detectChangeHeight(),this._checkChangeHeight())},_detectChangeHeight:function(){var t=$.throttle(this._checkChangeHeight,50,this);(window.addEventListener("resize",t,!1),window.MutationObserver)?new MutationObserver(t).observe(document.body,{attributes:!0,childList:!0,subtree:!0}):setInterval(this._checkChangeHeight.bind(this),500)},_checkChangeHeight:function(){var t=document.querySelector(".popup_visibility_visible, .popup2_visible_yes")?Math.max(document.documentElement.scrollHeight,document.body.scrollHeight):document.body.offsetHeight;t!==this.height&&(this.height=t,BEM.blocks["cf-helpers"].postMessage({"iframe-height":t}))}}),BEM.DOM.decl({block:"custom-styles",modName:"inplace",modVal:!0},{height:0,onSetMod:{js:function(){this.__base.apply(this,arguments),$(window).on("message",this._onPostMessage.bind(this)),$("<style>",{id:"template-styles"}).appendTo("body"),window.parent.postMessage(JSON.stringify({message:"styles-ready",defaultStyles:this.params.styling.defaults}),"*")}},_onPostMessage:function(t){var e=t.originalEvent.data||{};"setStylesTemplate"===e.type?this._setStyles(e):"clearStyles"===e.type&&this._clearStyles()},_setStyles:function(t){var e=t.data;e.styles&&this._applyStyles(e)},_applyStyles:function(t){var e=this;this._getTemplateText().then(function(i){var n=$.extend({},e.params.styling.defaults,e._prepareStyles(t));less.render(i,{modifyVars:n},function(t,e){t?console.error(t):$("#template-styles").text(e.css)})})},_prepareStyles:function(t){var e=t.styles,i=t.image_form,n=t.image_page;return i&&i.links&&i.links["2560x"]&&(e.bg_url=i.links["2560x"]),n&&n.links&&n.links["2560x"]&&(e.page_bg_url=n.links["2560x"]),e.bg_url&&(/^(https?:)?\/\//.test(e.bg_url)||(e.bg_url=BEM.blocks["i-global"].param("staticPath")+"/public/styles_templates_images"+e.bg_url.match(/\/[^/]+$/)),e.bg_url=JSON.stringify(e.bg_url)),e.page_bg_url&&(e.page_bg_url=JSON.stringify(e.page_bg_url)),e.answer_text_color||(e.answer_text_color=e.question_text_color),e},_clearStyles:function(){$("#template-styles").text("")},_getTemplateText:function(){return this.templatePromise||(this.templatePromise=$.get(BEM.blocks["i-global"].param("staticPath")+"/public/styles.less")),this.templatePromise}}),BEM.DOM.decl({block:"survey",modName:"preview",modVal:"yes"},{onSetMod:{js:function(){this.__base(),BEM.blocks["iframe-height"].init()}}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this._val=this.elem("control").val()}},disabled:{"*":function(t,e){this.elem("control").prop("disabled",e)},yes:function(){this.delMod("focused")}},focused:function(t,e){if(this.hasMod("disabled"))return!1;e?this._focused||this._focus():this._focused&&this._blur(),this.afterCurrentEvent(function(){this.domElem&&this.trigger(e?"focus":"blur")})}},isDisabled:function(){return this.hasMod("disabled","yes")},val:function(t,e){var i=void 0!==t,n=this.elem("control");return t=i?null===t?"":t.toString():n.val(),this._val!==t&&(this._val=t,n.val()!==t&&n.val(t),this.trigger("change",e)),i?this:t},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getSelectionEnd:function(){var t=this.elem("control")[0],e=0;if("number"==typeof t.selectionEnd)e=t.selectionEnd;else{var i=document.selection.createRange();if(i&&i.parentElement()===t){var n=t.value.length,o=t.createTextRange();o.moveToBookmark(i.getBookmark());var s=t.createTextRange();s.collapse(!1),e=o.compareEndPoints("EndToEnd",s)>-1?n:-o.moveEnd("character",-n)}}return e},_onFocus:function(){if(parseInt(BEM.blocks["i-ua"].ios,10)>=8&&!this.hasMod("type","textarea")){var t=this.elem("control")[0];t.selectionStart===t.value.length&&(t.scrollLeft=t.scrollWidth)}return this._focused=!0,this.setMod("focused","yes")},_onBlur:function(){return this._returnFocus?(this.afterCurrentEvent(function(){this.domElem&&this._focus()}),this):this.hasMod(this.elem("clear"),"pressed")?this:(this._focused=!1,this.delMod("focused"))},_focus:function(){if(this.hasMod("disabled","yes"))return!1;this.elem("control").focus()},_blur:function(){this._returnFocus=!1,this.elem("control").blur()},_updateVal:function(){this.val(this.elem("control").val())},destruct:function(){this._blur(),this.__base.apply(this,arguments)}},{live:function(){this.liveBindTo("control","focusin focusout",function(t){this["focusin"===t.type?"_onFocus":"_onBlur"](t)}),this.liveBindTo("control","input",function(){this._updateVal()}),9===document.documentMode&&(this.liveBindTo("control","focusin",function(){this.bindToDoc("selectionchange",this._updateVal)}),this.liveBindTo("control","focusout",function(){this.unbindFromDoc("selectionchange")}))}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.elem("control"),e=$.dom.getActiveElement(),i=this.params.autoFocus&&!e.is("input, textarea");(e[0]===t[0]||i)&&(this.setMod("focused","yes")._focused=!0),this.params.shortcut&&this.bindToDoc("keydown",function(t){t.ctrlKey&&t.which===BEM.blocks.keycodes.UP&&!$(t.target).is("input, textarea")&&this.setMod("focused","yes")})}}},_focus:function(){if(!1===this.__base())return!1;var t=this.elem("control")[0];if(t.createTextRange&&!t.selectionStart){var e=t.createTextRange();e.move("character",t.value.length),e.select()}},destruct:function(){this.params.shortcut&&this.unbindFromDoc("keydown"),this.__base.apply(this,arguments)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_updateValNextTick:function(){this.afterCurrentEvent(function(){this.domElem&&this._updateVal()})}},{live:function(){return this.liveBindTo("box","pointerover pointerout",function(t){this.hasMod("disabled")||this.elem("box")[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),this.liveBindTo("control","dragenter"),this.liveBindTo("control","dragend",function(){this._updateValNextTick()}),"documentMode"in document&&document.documentMode<=8&&(this.liveBindTo("control","focusin",function(){this.bindTo("control","propertychange keyup",this._updateVal),this.bindTo("control","cut paste",function(){this._updateValNextTick()})}),this.liveBindTo("control","focusout",function(){this.unbindFrom("control","cut paste"),this.unbindFrom("control","propertychange keyup"),this._updateValNextTick()})),this.__base()}}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.on("change",this._updateClear)._updateClear()}}},_onClearClick:function(){return this.trigger("clear"),this.removeInsets&&this.removeInsets(),this.clearInput({source:"clear"})._focus()},clearInput:function(t){return this.val("",t),this},_updateClear:function(){return this.toggleMod(this.elem("clear"),"visibility","visible",Boolean(this._val))}},{live:function(){return this.liveBindTo("clear","pointerpress",function(t){this.setMod(this.elem("clear"),"pressed","yes")}).liveBindTo("clear","pointerover",function(t){this.setMod(this.elem("clear"),"hovered","yes")}).liveBindTo("clear","pointerout",function(t){this.delMod(this.elem("clear"),"hovered")}).liveBindTo("clear","pointerclick",function(){this.delMod(this.elem("clear"),"pressed"),this._onClearClick()}).liveBindTo("control","paste",function(){this.setMod(this.elem("clear"),"visibility","visible")}),this.__base()}}),BEM.DOM.decl("input",{onSetMod:{disabled:function(t,e){this.__base.apply(this,arguments),this.findBlocksInside(this.elem("samples"),"link").forEach(function(i){i.setMod(t,e)})}},_onSampleClick:function(t,e){var i=this.elemParams(t);this.val("val"in i?i.val:t.text(),{source:"sample"})}},{live:function(){return this.liveBindTo("sample","pointerclick",function(t){this._onSampleClick(t.data.domElem,t)}),this.__base()}}),BEM.DOM.decl({name:"input",modName:"suggest",modVal:"yes"},{onSetMod:{js:{inited:function(){this.params.foot&&(this.foot=this.params.foot),this._preventRequest=!0,this.__base.apply(this,arguments),this._userVal=this.val();var t=this._focused;t&&this.delMod("focused"),this.elem("control").attr("autocomplete","off"),this._preventRequest=!1,t&&this.setMod("focused","yes"),this._items=[],this._curItemIndex=-1,this._doRequest=$.debounce(this._doRequest,this.params.debounceDelay),this.bindToWin("resize",$.throttle(this._setWidth,60))}},focused:{yes:function(){this.__base();var t=this.params.showListOnFocus?this._onChange():this._onChange;this.on("change",t)},"":function(){this.__base(),this.un("change",this._onChange)._preventHide||this._getPopup().hide()}}},destruct:function(){var t=this._popup;return t&&t.domElem&&(this._popup=null,BEM.DOM.destruct(t.domElem)),this.__base.apply(this,arguments)},getDataprovider:function(){var t=this.params.dataprovider.url;return this._dataprovider||(this._dataprovider=BEM.create(this.params.dataprovider.name||this.__self.getName()+"__dataprovider",$.extend(this.params.dataprovider,{url:t,callbackCtx:this})))},_onChange:function(){return this._preventRequest||this._doRequest(),this._onChange},_onKeyDown:function(t){if(BEM.blocks.keycodes.is(t.which,"UP","DOWN")&&!t.shiftKey){t.preventDefault();var e=this._items.length,i=!1;if(e){var n=t.which-39,o=this._curItemIndex,s=0;do{i=(0===o&&-1===n||o+n>=e)&&this._onLeaveItem(this._items[o],!0),(o+=n)<0?o=e-1:o>=e&&(o=0)}while(!i&&!1===this._onEnterItem(this._items[o],!0)&&++s<e)}}},_onKeyPress:function(t){t.which===BEM.blocks.keycodes.ENTER&&this._curItemIndex>-1&&this._isCurItemEnteredByKeyboard&&(t.preventDefault(),this._onSelectItem(this._items[this._curItemIndex],!0))},_getPopup:function(){var t=this;if(!t._popup){var e=t.__self.getName(),i=[{elem:"items",tag:"ul",mix:[{block:e,elem:"popup-items"}]}],n=Array.isArray(t.params.popupMixs)?t.params.popupMixs:[],o={directions:"bottom-left"};t._hasPopupFade()&&i.push({block:e,elem:"fade"}),$.extend(o,t.params.popupParams),n.push({block:e,elem:"popup",elemMods:t.params.popupMods,js:{uniqId:t._uniqId}}),t._popup=$(BEMHTML.apply({block:"popup",mods:{animate:"no"},mix:n,js:o,content:{elem:"content",content:i}})).bem("popup").on({show:function(){t.bindTo("keypress",t._onKeyPress).bindTo("keydown",t._onKeyDown)},hide:function(){t.unbindFrom("keypress keydown")._curItemIndex=-1}}),$.each({pointerover:t._onEnterItem,pointerout:t._onLeaveItem,pointerdown:t._onSelectItem,pointerup:t._onItemMouseUp},function(e,i){BEM.blocks["b-autocomplete-item"].on(t._popup.domElem,e,function(e){i.call(t,e.block)})}),BEM.DOM.init(t._popup.domElem)}return t._popup},getPopup:function(){return this._getPopup()},_hasPopupFade:function(){return"yes"===(this.params.popupMods||{}).fade},_onEnterItem:function(t,e){if(t.hasMod("enterable","no"))return!1;var i=this._items,n=this._curItemIndex;n>-1&&i[n].delMod("hovered"),(n=this._getItemIndex(t))>-1&&i[n].setMod("hovered","yes"),this._curItemIndex=n,this._isCurItemEnteredByKeyboard=Boolean(e),e&&this.params.updateOnEnter&&(this._preventRequest=!0,this.val(!1!==t.enter()?t.val():this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex}).del("_preventRequest"))},_onLeaveItem:function(t,e){var i=this._curItemIndex;return i>-1&&i===this._getItemIndex(t)&&(this._items[i].delMod("hovered"),this._curItemIndex=-1),e&&this.val(this._userVal),!0},_onSelectItem:function(t,e){var i=t.select(e||!1),n="object"===(void 0===i?"undefined":_typeof(i))?i.needUpdate:!1!==i,o="object"===(void 0===i?"undefined":_typeof(i))&&i.needEvent;this._preventRequest=!0,n&&(this._userVal=t.val(),this.val(this._userVal,{source:"autocomplete",itemIndex:this._curItemIndex})),e?this.del("_preventRequest")._getPopup().hide():(this._returnFocus=!0,this.bindToDoc("pointerrelease",this._onDocMouseUp),n||(this._preventHide=!0),this.afterCurrentEvent(function(){this.domElem&&this.setMod("focused","yes").del("_preventRequest","_preventHide")})),(n||o)&&this.trigger("select",{item:t,byKeyboard:e})},_onItemMouseUp:function(){this._closePopupByMouseUp()},_onDocMouseUp:function(){this._closePopupByMouseUp()},_closePopupByMouseUp:function(){this.unbindFromDoc("pointerrelease").del("_returnFocus")._getPopup().hide()},_getItemIndex:function(t){return $.inArray(t,this._items)},_doRequest:function(){var t=this;t._userVal=t.val(),t.trigger("data-requested").getDataprovider().get(t.val(),function(e){t.trigger("data-received",e);var i=t._getPopup(),n=e.items||e;t.foot&&n.length&&-1===$.inArray(t.foot,n)&&n.push(t.foot),n.length?(t._curItemIndex=-1,BEM.DOM.update(i.elem("items"),t._buildItemsHtml(n),function(){i.isShown()||(i.show(t.elem("box")),t._setWidth()),t._items=i.findBlocksInside("b-autocomplete-item"),t.trigger("update-items")})):i.hide()})},_setWidth:function(){this._hasPopupFade()&&this._getPopup().domElem.css("width",this.elem("box").outerWidth())},_buildItemsHtml:function(t){var e=this;return BEMHTML.apply($.map(t,function(t,i){var n,o={block:"b-autocomplete-item",data:t,mods:{type:$.isArray(t)?t[0]:"text"},suggestVersion:e.params.dataprovider.version||4};return $.isArray(t)&&$.isPlainObject(n=t.concat().pop())&&$.extend(o,n),o}))},setFoot:function(t){return this.foot=t,this.foot},getDefaultParams:function(){return $.extend(this.__base(),{updateOnEnter:!0,debounceDelay:50,showListOnFocus:!0})}}),BEM.DOM.decl({block:"input",modName:"suggest",modVal:"yes"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.on("update-items",this._onUpdateItems),this.params.dataprovider.dataType="json"}},_doRequest:function(){if(!1!==this.params.doEmptyRequests||""!==this.val())return this.__base.apply(this,arguments);this._getPopup().hide()},_onUpdateItems:function(){if(!this._isDestructing){var t=this.getPopup();t.isShown()&&(t._resetDefault(),t.repaint())}},_getPopup:function(){var t=this.__base.apply(this,arguments);return t._moveToContainer(),t}}),BEM.decl({name:"input__dataprovider",baseBlock:"i-request_type_ajax"},{get:function(t,e){return this.__base({part:t},function(t){e.call(this,{items:t[1],metainfo:t[2]})})}}),BEM.DOM.decl("popup",{getDefaultParams:function(){return{zIndexGroupLevel:0,directions:[{to:"bottom",axis:"center",tail:{axis:"center"}},{to:"top",axis:"center",tail:{axis:"center"}},{to:"right",axis:"middle",tail:{axis:"middle"}},{to:"left",axis:"middle",tail:{axis:"middle"}}],tail:{width:24.04,height:12.02,offset:{left:15,right:15,top:15,bottom:15}},duration:150}},onSetMod:{js:{inited:function(){this._cache={},this._viewport=BEM.DOM.win,this._scope=BEM.DOM.scope,this._channel=BEM.channel("popups"),this._inContainer=!1,this._isParentFixed=!1,this._owner=null,this._destructor=null,this._userPosition=null,this._parent=null,this._childs=[],this._isShown=!1,this._isHiding=!1,this._positions={},this._currPos={},this._visibilityFactor=null,this._direction=!1,this._directions={};var t=this.getDefaultParams(),e=this.params,i=this._repackDirParams(t.directions),n=e.generateDirections?this._generateDirections:e.directions,o=this._repackDirParams(n);e.tail&&(this.params.tail=this._mergeParams(t.tail,e.tail)),this._order=o.keys.map(function(t){var e=o.directions[t],n=i.directions[t];return n||(n=i.directions[e.to]),this._directions[t]=this._mergeParams(n,e,{tail:this._tailParamsHook}),t},this),this._zIndex=null,this._zIndexGroupLevel=null}},visibility:{visible:function(){this._onShown()},"":function(){this._onHidden()}}},show:function(t){var e;if(t instanceof BEM)e=t.domElem.eq(0);else if(t instanceof $)e=t;else if(!t)return;if(e){if(this._owner&&e[0]!==this._owner[0]&&this.delMod("visibility"),this._owner=e,e.length){var i="_"+this.__self.getName()+"-destructor";this._destructor=e.addClass("i-bem "+i).bem(i)}var n=this._findParent(e);n&&this.setParent(n)}else this._userPosition=t;return this.setMod("visibility","outside").repaint()},hide:function(t){if(this._isHiding)return this;if(this._isShown){var e=$.Event("before-hide");if(this.trigger(e,t),e.isDefaultPrevented())return this;if(this._isHiding=!0,this._childs.forEach(function(t){t.hide&&t.hide(),t.delMod("visible")}),this.hasMod("animate","yes")&&!this.hasMod("fade-out","no")){var i=this;return this.beforeHide(function(){i.domElem&&i.delMod("visibility")}),this}}return this.delMod("visibility")},toggle:function(t,e){return this._isShown&&!this._isHiding?this.hide(e):this.show(t||this._owner)},repaint:function(){this._moveToContainer();var t=this._pickDirection();return this.setMod("to",t.to)._show(this._positions[t.key],this._tailPos&&this._tailPos[t.key]),this},getCurrPos:function(){return this._currPos},getCurrDirection:function(){return this._direction},setScope:function(t){return this._scope=t,this._inContainer=!1,this},setContent:function(t){return BEM.DOM.update(this.elem("content"),t),this._resetDefault(),this._isShown&&this.repaint(),this},isShown:function(){return this._isShown},setParent:function(t){return this._parent=t,this._isParentFixed=t.hasMod("position","fixed"),t.addChild&&t.addChild(this),this},addChild:function(t){for(var e=this._childs,i=e.length,n=0;n<i;n++)if(e[n]._uniqId===t._uniqId)return;t.on("hide",function(){this.removeChild(t)},this),t.on("beforeClose",function(){this.afterCurrentEvent(function(){this.removeChild(t)})},this),e.push(t)},_getParentPopup:function(){return this._parent},removeChild:function(t){for(var e=this._childs,i=e.length,n=0;n<i;n++)if(e[n]._uniqId===t._uniqId)return void e.splice(n,1)},setSize:function(t){return t&&(this._resetDefault(),this.domElem.css(t),this._isShown&&!this._isHiding&&this.repaint()),this},_show:function(t,e){return this._currPos=t,e&&this.elem("tail").removeAttr("style").css(e),this.domElem.css(t),(!this._isShown||this._isHiding)&&this.hasMod("animate","yes")&&!this.hasMod("fade-in","no")&&this.afterShow(),this._isHiding=!1,this.setMod("visibility","visible"),this},_onShown:function(){this._isShown||this._bindCompatibility(),this.bindToDoc("keydown",function(t){t.which===BEM.blocks.keycodes.ESC&&0===this._childs.length&&this.hide({source:"esc-key"})}),this._attachRepaintOnResize(),this._bindFocusEvents(),this._attachUnder(),this._isShown=!0,this.hasMod("autoclosable","yes")&&this.afterCurrentEvent(function(){this.domElem&&this._enableAutoclosable()}),this.hasMod("adaptive","yes")&&this._enableAdaptive(),this._channel.on("hide",this.hide,this),this.trigger("show")},_bindCompatibility:function(){this._captureZIndex(),this.__self._visiblePopupsStack.unshift(this),this.trigger("beforeOpen")},_unbindCompatibility:function(){this.trigger("beforeClose");var t=this.__self._visiblePopupsStack;t.splice(t.indexOf(this),1),this._releaseZIndex()},_onHidden:function(){this._isShown&&this._unbindCompatibility(),this.unbindFromDoc("keydown"),this._detachRepaintOnResize(),this._unbindFocusEvents(),this.hasMod("autoclosable","yes")&&this._disableAutoclosable(),this.hasMod("adaptive","yes")&&this._disableAdaptive(),this._detachUnder(),this._cache={},this._isShown=!1,this._isHiding=!1,this._channel.un("hide"),this._returnFocus(),this.trigger("hide")},_attachRepaintOnResize:function(){window.attachEvent&&this.domElem[0].attachEvent("onresize",this.__self._enforcePageRepaint)},_detachRepaintOnResize:function(){window.detachEvent&&this.domElem[0].detachEvent("onresize",this.__self._enforcePageRepaint)},_bindFocusEvents:function(){this._lastFocused=$($.dom.getActiveElement()[0]||this._scope);var t=this.__self._getFocusable(this.elem("content"));this._firstFocusable=t.first(),this._lastFocusable=t.last(),this._skipReturnFocus=!1,0!==this._firstFocusable.length?this.bindTo(this._lastFocused,"keydown",this._onLastFocusedKeyDown).bindTo(this._firstFocusable,"keydown",this._onFirstFocusableKeyDown).bindTo(this._lastFocusable,"keydown",this._onLastFocusableKeyDown):this._skipReturnFocus=!0},_unbindFocusEvents:function(){this.unbindFrom(this._firstFocusable,"keydown"),this.unbindFrom(this._lastFocusable,"keydown"),this.unbindFrom(this._lastFocused,"keydown")},_onLastFocusedKeyDown:function(t){this._lastFocused.is(this._scope)&&!this._lastFocused.is(t.target)||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this[t.shiftKey?"_lastFocusable":"_firstFocusable"].focus())},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocused.focus())},_returnFocus:function(){(this._parent||{})._skipReturnFocus||this._skipReturnFocus||this._lastFocused.focus()},_mergeParams:function(t,e,i){var n={},o=Object.prototype.hasOwnProperty;return i||(i={}),t&&"object"===(void 0===t?"undefined":_typeof(t))&&Object.keys(t).forEach(function(e){n[e]=t[e]}),Object.keys(e).forEach(function(s){var r=o.call(i,s)?i[s].call(this,t[s],e[s]):e[s];!r||"object"!==(void 0===r?"undefined":_typeof(r))||Array.isArray(r)?n[s]=r:t[s]?n[s]=this._mergeParams(t[s],r,i):n[s]=r},this),n},_tailParamsHook:function(t,e){return e.offset||(e.offset=this.params.tail.offset),"number"==typeof e.offset?{offset:{left:e.offset,top:e.offset}}:e},_generateDirections:function(){if(this.__self._generateDirectionsCache)return this.__self._generateDirectionsCache;for(var t=[["bottom","top"],["left","right"]],e=[["center","left","right"],["middle","top","bottom"]],i=e,n=t.length,o=[],s=0;s<n;s++)for(var r=t[s],a=r.length,c=0;c<a;c++)for(var l=e[s],u=l.length,h=0;h<u;h++)for(var d=i[s],p=d.length,f=0;f<p;f++)o.push({direction:r[c],axis:l[h],tail:{axis:d[f]}});return this.__self._generateDirectionsCache=o,o},_repackDirParams:function(t){var e,i={};return("string"==typeof t||$.isPlainObject(t))&&(t=[t]),e=t.map(function(t){if("string"==typeof t){var e=t.split("-");t={to:e[0],tail:{}},e[1]&&(t.axis=e[1]),e[2]&&(t.tail.axis=e[2])}var n=t.to;return i[n]||(i[n]=t),t.axis&&(n+="-"+t.axis),t.key=n,i[n]=t,n},this),{directions:i,keys:e}},setViewport:function(t){return this._viewport=t,this},_pickDirection:function(){var t,e=this._order,i=this.hasMod("adaptive","yes")?e.length:1;for(this._visibilityFactor=0,t=0;t<i;t++){var n=e[t],o=this._directions[n];this._resetPos(n)._pushPos(n,this._calcPos(o))._pushPos(n,this._calcOffsets(o)),this._hasTail()&&this._resetTailPos(n)._pushTailPos(n,this._calcTailPos(o))._pushTailPos(n,this._calcTailOffset(o))._pushPos(n,this._calcOffsetByTail(o)),this._pushPos(n,this._getParentOffset());var s=this._calcVisibilityFactor(o);if((s>this._visibilityFactor||!this._direction)&&(this._visibilityFactor=s,this._direction=this._directions[n],this.size=this.getPlacingSize(),100===s))break}return this._direction},_getParentOffset:function(){var t=this.domElem.offsetParent().offset();return t.left*=-1,t.top*=-1,t},_calcPos:function(t){this._calcPlacingSize(t);var e=this.getOwnerPos(),i=this.getOwnerSize(),n=this.getPlacingSize(),o=t.axis,s=this.params.position||{},r={},a=Object.prototype.hasOwnProperty;switch(t.to){case"bottom":r={top:a.call(s,"top")?s.top:e.top+i.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"top":r={top:a.call(s,"top")?s.top:e.top-n.height,left:a.call(s,"left")?s.left:this._calcLeft(o)};break;case"left":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left-n.width};break;case"right":r={top:a.call(s,"top")?s.top:this._calcTop(o),left:a.call(s,"left")?s.left:e.left+i.width}}return r},_calcTop:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"top"===t?e+=n.top:"middle"===t?e+=n.top+o.height/2-i.height/2:"bottom"===t&&(e+=n.top+o.height-i.height),e},_calcLeft:function(t){var e=0,i=this.getPlacingSize(),n=this.getOwnerPos(),o=this.getOwnerSize();return"left"===t?e+=n.left:"center"===t?e+=n.left+o.width/2-i.width/2:"right"===t&&(e+=n.left+o.width-i.width),e},getPlacingSize:function(){return this.getPopupSize()},_calcOffsets:function(t){var e,i=this._cache.offset||(this._cache.offset={}),n=t.key,o=t.offset;if(i[n])return i[n];if(!o)return!1;if(e={left:0,top:0},"number"==typeof o)switch(n){case"left":e.left+=o;break;case"right":e.left-=o;break;case"top":e.top+=o;break;case"bottom":e.top-=o}else o.left&&(e.left+=o.left),o.right&&(e.left-=o.right),o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom);return i[n]=e,e},_hasTail:function(){return 0!==this.elem("tail").length},_moveToContainer:function(t){if(t)this._inContainer=!1;else{if(this._isShown)return;t=this._parent?this._parent.domElem:this._scope}this.domElem.appendTo(t),this._inContainer=!0},_resetPos:function(t){return t?this._positions[t]=null:this._positions={},this},_pushPosTo:function(t,e,i){!1!==i&&("string"==typeof e?this._sum(t[e]||(t[e]={}),i):(i=e,Object.keys(t).forEach(function(e){this._sum(t[e],i)},this)))},_pushPos:function(t,e){return this._pushPosTo(this._positions,t,e),this},_sum:function(t,e){Object.keys(e).forEach(function(i){t[i]=(t[i]||0)+e[i]})},_getSizeOf:function(t){return{height:t.outerHeight(),width:t.outerWidth()}},getOwnerSize:function(){return this._owner?this._cache.ownerSize||(this._cache.ownerSize=this._getSizeOf(this._owner)):{height:0,width:0}},getPopupSize:function(){return this._getSizeOf(this.domElem)},_getPosOf:function(t){return t.offset()||{left:0,top:0}},getOwnerPos:function(){var t;return this._owner&&(t=this._getPosOf(this._owner),"pageYOffset"in window&&(t.top-=window.pageYOffset-(document.documentElement.scrollTop||document.body.scrollTop),t.left-=window.pageXOffset-(document.documentElement.scrollLeft||document.body.scrollLeft))),t||this._userPosition},_calcVisibilityFactor:function(t){var e,i,n=this._viewport,o=this._getSizeOf(n),s=this.getPopupSize(),r=this._positions[t.key],a=this._parent&&this._isParentFixed?this._parent.domElem.offset():{top:0,left:0},c=this.hasMod("position","fixed")?{top:0,left:0}:{top:n.scrollTop(),left:n.scrollLeft()},l=r.top+a.top-c.top,u=r.left+a.left-c.left,h=u+s.width-o.width,d=l+s.height-o.height,p={height:s.height,width:s.width},f=100;return d>0&&(p.height-=d),l<0&&(p.height+=l),u<0&&(p.width+=u),h>0&&(p.width-=h),p.height<0||p.width<0?f=0:(i=Math.abs(p.height*p.width),(e=s.height*s.width)!==i&&(f=i/e*100)),f},_findParent:function(t){var e=t.closest(".popup, .popup2");return this.findBlockOn(e,"popup")||this.findBlockOn(e,"popup2")},destruct:function(){return this._childs.forEach(function(t){t.domElem&&BEM.DOM.destruct(t.domElem)}),this.setMod("fade-out","no"),this.hide(),this._isShown&&this._unbindCompatibility(),this.__base.apply(this,arguments)},_calcZIndexGroupLevel:function(){var t=this.params.zIndexGroupLevel,e=this._getParentPopup();return e&&(t+=e._zIndexGroupLevel),this._destructor?this._destructor.findBlocksOutside("z-index-group").reduce(function(t,e){return t+Number(e.getMod("level"))},t):t},_captureZIndex:function(){null===this._zIndexGroupLevel&&(this._zIndexGroupLevel=this._calcZIndexGroupLevel());var t=this.__self._visiblePopupsZIndexes,e=this._zIndexGroupLevel,i=t[e],n=this._zIndex;return i||(i=t[e]=[(e+1)*this.__self.ZINDEX_FACTOR]),this._zIndex=i[i.length-1]+1,i.push(this._zIndex),this._zIndex!==n&&this.domElem.css("z-index",this._zIndex),this},_releaseZIndex:function(){var t=this.__self._visiblePopupsZIndexes[this._zIndexGroupLevel];return t.splice(t.indexOf(this._zIndex),1),this},_resetDefault:function(){},_calcPlacingSize:function(){}},{live:function(){this.liveBindTo("close","pointerclick",function(){this.hide({source:"close-click"})})},_visiblePopupsStack:(BEM.blocks.popup2||{})._visiblePopupsStack||[],_visiblePopupsZIndexes:(BEM.blocks.popup2||{})._visiblePopupsZIndexes||{},ZINDEX_FACTOR:1e3,_getFocusable:function(t){var e=$.data(t,"popup-getFocusable-id");e||(e=$.identify(),$.data(t,"popup-getFocusable-id",e)),e='*[data-popup-getFocusable-id="'+e+'"]';var i="a[href], link, ";return BEM.blocks["i-ua"].opera<13&&(i=""),t.find(i+'*[tabindex], button, input:not([type="hidden"]), textarea, select, menuitem').filter(function(){var t=$(this),i=!0;return!(parseInt(t.prop("tabindex"),10)<0||"hidden"===t.css("visibility"))&&($(this).parentsUntil(e).each(function(){if("none"===$(this).css("display"))return i=!1}),i)})},_enforcePageRepaint:function(){document.body.className+=""},_generateDirectionsCache:null}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base.call(this);var t=this.findElem("under").first();this._underClassAttr=t.attr("class"),this.isDivEnough()?this._under=t:(t.remove(),this._under=null),this._underInPool=!1}}},isDivEnough:function(){return!0},_createUnder:function(){return $('<iframe frameBorder="0" tabindex="-1" src="about:blank"/>')},_getUnder:function(){if(this._under)return this._under;var t=this.__self._underPool.pop();return t&&(this._underInPool=!1),this._under=t,t||this._createUnder()},_attachUnder:function(){var t=this._under=this._getUnder();t.attr("class",this._underClassAttr),this.hasMod(t,"type","paranja")?t.detach().insertBefore(this.domElem).css("z-index",this._zIndex):t.prependTo(this.domElem)},_detachUnder:function(){var t=this._under;t.removeAttr("style"),this.__self._underPool.push(t.detach()),this._under=null,this._underInPool=!0},destruct:function(){var t=this.__base.apply(this,arguments);return this._underInPool&&this.__self._underPool.pop(),this._under&&this._under.remove(),t}},{_underPool:[]}),BEM.DOM.decl("popup",{onSetMod:{autoclosable:{yes:function(){this._enableAutoclosable()},"":function(){this._disableAutoclosable()}}},_enableAutoclosable:function(){if(this.domElem){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.bindTo(t,"pointerclick",function(t){t.stopPropagation(),this.hide({source:"outside-click"})}),this.bindTo(t,"pointerdown",function(){this._skipReturnFocus=!0})),this.bindTo("pointerdown pointerclick",function(){var t=this;do{t._preventHideByClick=!0,t=t._getParentPopup()}while(t)}),this.bindToDoc("pointerclick",function(t){if(this._preventHideByClick)this._preventHideByClick=null;else if(!this._isRelatedNode($(t.target))){var e=$.Event("outside-click");this.trigger(e,t),e.isDefaultPrevented()||this.hide({source:"outside-click"})}}),this.bindToDoc("pointerdown",function(){this._skipReturnFocus=!0})}},_disableAutoclosable:function(){var t=this._under;this.hasMod(t,"type","paranja")&&(t.is("iframe")&&(t=$([t[0].contentWindow,t[0].contentWindow.document])),this.unbindFrom(t,"pointerclick pointerdown")),this.unbindFromDoc("pointerclick pointerdown")},_isRelatedNode:function(t){var e=this.containsDomElem(t);if(e||(e=Boolean(this._owner)&&this.containsDomElem.call({domElem:this._owner},t)),e)return!0;var i,n=this._childs.length;for(i=0;i<n;i++)if(this.containsDomElem.call({domElem:this._childs[i].domElem},t))return!0;return!1}}),BEM.DOM.decl({block:"popup",modName:"adaptive",modVal:"yes"},{onSetMod:{adaptive:{yes:function(){this._enableAdaptive()},no:function(){this._disableAdaptive()}},"watch-scroll":{yes:function(){this._watchScroll()},no:function(){this._unwatchScroll()}}},_enableAdaptive:function(){this.afterCurrentEvent(function(){this.domElem&&this.bindToWin("resize",this.onResize)}),this._watchScroll()},_disableAdaptive:function(){this.unbindFromWin("resize")._unwatchScroll()},getScrollEvents:function(){return["scroll"]},_watchScroll:function(){this._owner&&!this.hasMod("watch-scroll","no")&&this.bindTo(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "),this.onScroll,this)},_unwatchScroll:function(){this._owner&&this.unbindFromDomElem(this._owner.parents().add(this._viewport),this.getScrollEvents().join(" "))},onResize:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},onScroll:function(t){this._cache={},this._isShown&&!this._isHiding&&this.repaint()},destruct:function(){this._disableAdaptive(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({block:"popup",modName:"animate",modVal:"yes"},{afterShow:function(){var t=this.getCurrDirection();if(t){var e=t.to,i=this.getCurrPos(),n={opacity:1,top:i.top,left:i.left},o={opacity:0,top:i.top,left:i.left};"bottom"===e?o.top+=10:"top"===e?o.top-=10:"left"===e?o.left-=10:"right"===e&&(o.left+=10),this.domElem.stop(!0).css(o).animate(n,this.params.duration)}},beforeHide:function(t){var e=this.getCurrDirection();if(!e)return t();var i=e.to,n=this.getCurrPos(),o=this.domElem,s={top:n.top,left:n.left,opacity:0};return"bottom"===i?s.top+=10:"top"===i?s.top-=10:"left"===i?s.left-=10:"right"===i&&(s.left+=10),o.stop(!0,!0).animate(s,this.params.duration,function(){t(),o.css("opacity","")})}}),function(t,e,i){var n=t.INTERNAL,o=n.ELEM_DELIM,s={area:1,base:1,br:1,col:1,command:1,embed:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,wbr:1},r=n.buildClass,a=n.buildClasses,c={};function l(t,e,i){(t[e]||(t[e]=[])).unshift(i)}function u(t,e){return e.modName?function(i){(i._curBlock.mods||{})[e.modName]===e.modVal&&t(i)}:t}function h(t,i){var n,o=e.isArray(i);return e.isArray(t)?o?n=t.concat(i):(n=t).push(i):o?(n=i).unshift(t):n=[t,i],n}var d={'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;"},p=/["&<>]/g;t.HTML={decl:function(t,i){"string"==typeof t&&(t={block:t}),t.name&&(t.block=t.name);var n=c[t.block]||(c[t.block]={});i.onBlock&&l(n,"_block",u(i.onBlock,t)),i.onElem&&(e.isFunction(i.onElem)?l(n,"_elem",u(i.onElem,t)):e.each(i.onElem,function(e,i){l(n,"_elem"+("*"===e?"":o+e),u(i,t))}))},build:function(t){var e=new this.Ctx(t);return e._buildAll(),e._flush()},Ctx:e.inherit({__constructor:function(t){this._buffer=[],this._params=t,this._tParams=null,this._tParamsChanges=null,this._curBlock=void 0},pos:function(){return this._params._pos},isFirst:function(){return 1===this._params._pos},isLast:function(){var t=this._params;return t._pos===t._siblingsCount},params:function(t){return void 0===t?this._params:(this._params=t,this)},param:function(t,i,n,o){var s=this._params;return void 0===i?s[t]:(!n&&t in s?o&&(s[t]=e.extend(i,s[t])):s[t]=i,this)},attrs:function(t,e){return this.param("attrs",t,e,!0)},attr:function(t,e,i){if(void 0===e)return(this._params.attrs||{})[t];var n=this._params.attrs;return n?(i||!(t in n))&&(n[t]=e):(this._params.attrs={})[t]=e,this},tag:function(t,e){return this.param("tag",t,e)},cls:function(t,e){return this.param("cls",t,e)},mods:function(t,e){return this.param("mods",t,e,!0)},mod:function(t,e,i){if(void 0===e)return(this._params.mods||{})[t];var n=this._params.mods;return n?(i||!(t in n))&&(n[t]=e):(this._params.mods={})[t]=e,this},mix:function(t,e){var i=this._params;return void 0===t?i.mix:(i.mix=!e&&"mix"in i?i.mix.concat(t):t,this)},js:function(t){return this.param("js",t)},content:function(t,e){return this.param("content",t,e)},wrapContent:function(t){var e=this._params;return t.content=e.content,e.content=t,this},beforeContent:function(t){var e=this._params;return e.content=h(t,e.content),this},afterContent:function(t){var e=this._params;return e.content=h(e.content,t),this},wrap:function(t){var e=this._params;return t.block||(t._curBlock=this._curBlock),t.content=e._wrapper?e._wrapper:e,e._wrapper=t,this},tParam:function(t,e){var i=this._tParams||(this._tParams={});if(void 0===e)return i[t];var n=this._tParamsChanges||(this._tParamsChanges={});return t in n||(n[t]=i[t]),i[t]=e,this},generateId:function(){return e.identify()},stop:function(){this._params._isStopped=!0},_buildAll:function(){var t=this._buffer,i=this._params,n=void 0===i?"undefined":_typeof(i);if("string"===n||"number"===n)t.push(i);else if(e.isArray(i))for(var o,s,r=0,a=i.length;r<a;)this._params=o=i[r++],"string"===(s=void 0===o?"undefined":_typeof(o))||"number"===s?t.push(o):o&&(o._pos=r,o._siblingsCount=a,this._buildByDecl());else i&&(this._params._pos=this._params._siblingsCount=1,this._buildByDecl())},_build:function(){var t,i=this._buffer,n=this._params,o=n.tag||"div",c=n.block||n.elem,l=c&&(n.block||this._curBlock.block),u=!1;n.js&&((t={})[r(l,n.elem)]=!0===n.js?{}:n.js,u=!n.elem),i.push("<",o),(c||n.cls)&&(i.push(' class="'),c&&(a(l,n.elem,n.mods,i),n.mix&&e.each(n.mix,function(e,n){n&&(i.push(" "),a(n.block,n.elem,n.mods,i),n.js&&((t||(t={}))[r(n.block,n.elem)]=!0===n.js?{}:n.js,u||(u=!n.elem)))})),n.cls&&i.push(c?" ":"",n.cls),u&&i.push(" i-bem"),i.push('"')),t&&i.push(' onclick="return ',JSON.stringify(t).replace(p,function(t){return d[t]}),'"'),n.attrs&&e.each(n.attrs,function(t,e){void 0!==e&&null!==e&&!1!==e&&i.push(" ",t,'="',e.toString().replace(/"/g,"&quot;"),'"')}),s[o]?i.push("/>"):(i.push(">"),void 0!==n.content&&(this._params=n.content,this._buildAll()),i.push("</",o,">"))},_flush:function(){var t=this._buffer.join("");return delete this._buffer,t},_buildByDecl:function(){var t=this._curBlock,i=this._params;if(i._curBlock&&(this._curBlock=i._curBlock),i.block&&(this._curBlock=i),!i._wrapper){if(i.block||i.elem){var n,s=c[this._curBlock.block];if(s)if(i.elem?(n=s["_elem"+o+i.elem],s._elem&&(n=n?n.concat(s._elem):s._elem)):n=s._block,n)for(var r,a=0;(r=n[a++])&&(r(this),!i._isStopped););}if(i._wrapper)return i._curBlock=this._curBlock,this._params=i._wrapper,this._buildAll()}var l=this._tParamsChanges;if(this._tParamsChanges=null,this._build(),this._curBlock=t,l){var u=this._tParams;e.each(l,function(t,e){void 0===e?delete u[t]:u[t]=e})}}})}}(BEM,jQuery),BEM.DOM.decl("b-autocomplete-item",{val:function(){return this.params.val||this.elem("text").text()||this.domElem.text()},enter:function(){},select:function(t){},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")}},{live:function(){this.liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)})},highlight:function(t,e){if(!$.isArray(e))return t;var i,n=[],o=0,s=e.sort(function(t,e){return t[0]-e[0]}),r=[],a=-1!==t.indexOf("?"),c=function(t){if(a)return t;for(;-1!==t.indexOf("?")&&r.length;)t=t.replace("?",r[0]),r.shift();return t};return!a&&function(){for(var e,i=/\&(#\d+|#x[a-f\d]+|\w+);/gi;e=i.exec(t);)r.push(e[0]),t=t.replace(e[0],"?")}(),s.forEach(function(e){i=o>e[0]?o:e[0],n.push({tag:"span",elem:"span",content:c(t.slice(o,i))}),n.push({tag:"em",elem:"em",content:c(t.slice(i,o=e[1]))})},this),n.push({tag:"span",elem:"span",content:c(t.slice(o))}),n}}),BEM.DOM.decl("b-autocomplete-item",{},{live:function(){return this.liveBindTo("mouseover mouseout mousedown mouseup pointerover pointerout pointerdown pointerup",function(t){this.trigger(t.type)}),this.__base()}}),BEM.HTML.decl("b-autocomplete-item",{onBlock:function(t){var e=t.param("data"),i=BEM.blocks["i-common__string"].escapeHTML($.isArray(e)?e[1]:e);$.isArray(t.param("search_cgi"))&&t.js({cgi:t.param("search_cgi")}),t.tag("li").mod("pers",!!t.param("pers")&&"yes").content(BEM.blocks["b-autocomplete-item"].highlight(i,t.param("hl"))).js(!0)}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"nav",modVal:"yes"},{enter:function(){return!1},select:function(t){if(t){var e=window.open();e.opener=null,e.location=this.val()}return{needEvent:!0}}},{getUrl:function(t){return(t.match(/^\w[\w-]*:\/\//g)?"":"http://")+t}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{onSetMod:{js:{inited:function(){this.setMod("nav","yes")}}},enter:function(){return this.__base.apply(this,arguments)},select:function(){return this.__base.apply(this,arguments)}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"nav"},{onBlock:function(t){var e=t.param("data"),i=4===t.param("suggestVersion"),n=e[4]||e[3],o=(n.match(/^\w[\w-]*:\/\//g)?"":"http://")+n;t.js({val:o}).content({elem:"link",url:o,title:BEM.blocks["i-common__string"].escapeHTML(i?e[3]:e[2]),description:BEM.blocks["b-autocomplete-item"].highlight(i?e[2]:e[1],t.param("hl"))})},onElem:{link:function(t){t.tag("a").attrs({href:t.param("url"),target:"_blank"}).content([{elem:"link-url",tag:"span",content:t.param("title")},{elem:"link-info",tag:"span",content:[" — "].concat(t.param("description"))}])}}}),BEM.DOM.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{select:function(){return!1}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"foot"},{onBlock:function(t){t.mod("enterable","no").content($.map(t.param("data").slice(1),function(t){return $.isArray(t)?{tag:"span",elem:"foot",content:t[0]}:t}))}}),BEM.HTML.decl({block:"b-autocomplete-item",modName:"type",modVal:"lingvo"},{onBlock:function(t){var e=t.param("data")[1];t.content([{tag:"span",elem:"text",content:e.text},{tag:"span",elem:"translation",content:[" — ",e.translation]}])}}),BEM.DOM.decl("input",{onElemSetMod:{message:{visibility:function(t,e,i){var n=this,o=n.getMod(t,"type");if(o){var s=!0;i||n.elem("message","type",o).each(function(){this!==t[0]&&n.hasMod($(this),"visibility","visible")&&(s=!1)}),s&&n.toggleMod("message-"+o,"yes","","visible"===i)}}}}}),BEM.DOM.decl({block:"textinput",baseBlock:"control"},{onSetMod:{js:{inited:function(){this._control=this.elem("control"),this._text=this._control.val()}}},val:function(t){var e=void 0!==t,i=this._control;return(t=e?null===t?"":t.toString():i.val())!==this._text&&(i.val(t),this._textChange()),e?this:t},getText:function(){return this._control.val()},setText:function(t){return t===this.getText()?this:(this._control.val(t),this._textChange(),this)},_textChange:function(t){var e=this._control.val(),i=this._text;if(!Boolean(e!==i))return!1;this._text=e;var n={text:e,oldText:i,byCode:t};this.trigger("change",n)}},{live:function(){return this.liveBindTo("control","input",function(){this._textChange()}),this.__base()}}),BEM.DOM.decl({block:"textinput"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this.params.autofocus&&(this.setMod("focused","yes"),this._getControl().focus())}}},_onPointerenter:function(){this.setMod("hovered","yes")},_onPointerleave:function(){this.delMod("hovered")},_updateValNextTick:function(){this.afterCurrentEvent(function(){this.domElem&&this._textChange()})}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.hasMod("disabled")||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}),9===document.documentMode&&(this.liveBindTo("control","focusin",function(){this.bindToDoc("selectionchange",this._textChange)}),this.liveBindTo("control","focusout",function(){this.unbindFromDoc("selectionchange")})),"documentMode"in document&&document.documentMode<=8&&(this.liveBindTo("control","focusin",function(){this.bindTo("control","propertychange keyup",this._textChange),this.bindTo("control","cut paste",function(){this._updateValNextTick()})}),this.liveBindTo("control","focusout",function(){this.unbindFrom("control","cut paste"),this.unbindFrom("control","propertychange keyup"),this._updateValNextTick()})),this.__base()}}),BEM.DOM.decl({block:"textinput",modName:"has-clear",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base(),this._clear=this.elem("clear"),this.on("change",this._updateClearOnInputChange)}}},_updateClearOnInputChange:function(){this.toggleMod(this._clear,"visible","yes","",Boolean(this.val()))},_onClearPointerclick:function(){this.val("").setMod("focused","yes").elem("control").focus()},_onClearPointerover:function(){this.setMod(this._clear,"hovered","yes").bindTo(this._clear,"pointerout",this._onClearPointerout)},_onClearPointerout:function(){this.delMod(this._clear,"hovered").unbindFrom(this._clear,"pointerout")},_preventLosingFocus:function(t){this.hasMod("focused")&&(t.preventDefault(),t.stopPropagation())}},{live:function(){return this.liveBindTo("clear","pointerclick",function(t){this._onClearPointerclick(t)}).liveBindTo("clear","pointerover",function(t){this._onClearPointerover(t)}).liveBindTo("clear","mousedown touchend",function(t){this._preventLosingFocus(t)}),this.__base()}}),BEM.DOM.decl({block:"checkbox",baseBlock:"control"},{onSetMod:{js:{inited:function(){var t=this.elem("control");this.toggleMod("checked","yes",t.prop("checked")),this.toggleMod("focused","yes",t.isFocused())}},hovered:{yes:function(){return!this.hasMod("disabled")}},pressed:{yes:function(){return!this.hasMod("disabled")}},checked:function(t,e){this.elem("control").prop("checked",e),this.trigger("change",{checked:Boolean(e)})},disabled:{yes:function(){this.__base.apply(this,arguments),this.delMod("hovered").delMod("pressed")}}},isDisabled:function(){return this.hasMod("disabled","yes")},isChecked:function(){return Boolean(this.elem("control").prop("checked"))},toggle:function(){this.toggleMod("checked","yes")},val:function(t){var e=this.elem("control");return void 0===t?e.val():(e.val(t),this)},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_onChange:function(t){this.toggleMod("checked","yes",t.target.checked)},_onPointerenter:function(t){this.setMod("hovered","yes")},_onPointerleave:function(t){this.delMod("hovered")},_onPointerpress:function(t){this.setMod("pressed","yes").bindToDoc("pointerrelease",this._onPointerrelease)},_onPointerrelease:function(t){this.delMod("pressed").unbindFromDoc("pointerrelease")},_onClick:function(t){var e=this.elem("label"),i=t.target;this.domElem[0]===i&&this._onChange(t),i!==e[0]&&this.trigger("click",{domEvent:t}),this.setMod("focused","yes")},_onKeydown:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.setMod("pressed","yes")},_onKeyup:function(t){t.keyCode===BEM.blocks.keycodes.SPACE&&this.delMod("pressed")}},{live:function(){return this.liveBindTo("pointerover pointerout",function(t){this.isDisabled()||this.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onPointerenter(t):this._onPointerleave(t))}).liveBindTo("pointerpress",function(t){this.hasMod("disabled")||this._onPointerpress(t)}).liveBindTo("pointerclick",function(t){this.hasMod("disabled")||this._onClick(t)}).liveBindTo("control","keydown",function(t){this.hasMod("disabled")||this._onKeydown(t)}).liveBindTo("control","keyup",function(t){this.hasMod("disabled")||this._onKeyup(t)}).liveBindTo("control","change",function(t){this._onChange(t)}),this.__base()}}),BEM.DOM.decl("checkbox",{onSetMod:{js:function(){this.__base.apply(this,arguments),this.bindTo("pointerclick",function(t){var e=$(t.target).prop("tagName");e&&"a"===e.toLowerCase()&&t.stopPropagation()})}}}),BEM.DOM.decl("radiobox",{onSetMod:{js:{inited:function(){this._val=this.findElem(this.elem("radio","checked","yes"),"control").val(),this.elem("control").each(function(t,e){var i=$(e),n=this.__self._getRadioByElem(i);i.isFocused()&&this.setMod(n,"focused","yes"),i.prop("checked")&&this.setMod(n,"checked","yes")}.bind(this))}},disabled:{yes:function(){this.setMod(this.elem("radio"),"disabled","yes")},"":function(){this.delMod(this.elem("radio"),"disabled")}}},onElemSetMod:{radio:{focused:{yes:function(t){this.delMod(this.elem("radio","focused","yes"),"focused");var e=this.findElem(t,"control");e.isFocused()||e.focus(),this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus",{current:t})})},"":function(t){this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur",{prev:t})})}},checked:{yes:function(t){var e=this.elem("radio","checked","yes"),i=this.findElem(t,"control"),n=this._val;this._willSwitch=!0,this.delMod(e,"checked"),this._willSwitch=!1,i.prop("checked",!0),this._val=i.val(),this.trigger("change",{current:t,currentVal:this._val,prev:e,prevVal:n})},"":function(t){var e=this.findElem(t,"control"),i=this._val;e.prop("checked",!1),this._val=void 0,this._willSwitch||this.trigger("change",{current:$(),currentVal:void 0,prev:t,prevVal:i})}},hovered:function(t){return!this.isDisabled(t)},pressed:function(t){return!this.isDisabled(t)},disabled:function(t,e,i){t.find(this.buildSelector("control")).prop("disabled",i),i&&this.delMod(t,"hovered").delMod(t,"pressed")}}},isDisabled:function(t){return this.hasMod(t,"disabled","yes")},val:function(t){if(void 0===t)return this._val;var e=this;return this.elem("control").each(function(i,n){if(n.value===t)return e.setMod(e.__self._getRadioByElem($(n)),"checked","yes"),!1}),e},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},getCurrent:function(){return this.findElem("radio","checked","yes")},uncheckAll:function(){return this.delMod(this.elem("radio","checked","yes"),"checked"),this},_onRadioEnter:function(t){this.setMod(t.data.domElem,"hovered","yes")},_onRadioLeave:function(t){this.delMod(t.data.domElem,"hovered")},_onRadioClick:function(t,e){this.isDisabled(t)||this.setMod(t,"focused","yes")},_onChange:function(t){this.setMod(this.__self._getRadioByElem(t.data.domElem),"checked","yes")},_onPointerpress:function(t){var e=t.data.domElem;this.setMod(e,"pressed","yes").bindToDoc("pointerrelease",function(){this.delMod(e,"pressed").unbindFromDoc("pointerrelease")})}},{live:function(){this.liveBindTo("radio","pointerclick",function(t){this._onRadioClick(t.data.domElem,t)}).liveBindTo("control","change",function(t){this._onChange(t)}).liveBindTo("radio","pointerover pointerout",function(t){t.data.domElem[0].contains(t.relatedTarget)||("pointerover"===t.type?this._onRadioEnter(t):this._onRadioLeave(t))}).liveBindTo("control","focusin focusout",function(t){var e=this.__self._getRadioByElem(t.data.domElem);this.setMod(e,"focused","focusin"===t.type?"yes":""),parseInt(BEM.blocks["i-ua"].ios,10)>=8&&t.preventDefault()}).liveBindTo("radio","pointerpress",function(t){this.hasMod(t.data.domElem,"disabled")||this._onPointerpress(t)})},_getRadioByElem:function(t){return t.closest(this.buildSelector("radio"))}}),BEM.DOM.decl({block:"radio-button",baseBlock:"radiobox"},{onSetMod:{disabled:{yes:function(){this.delMod("focused"),this.__base.apply(this,arguments)}}},onElemSetMod:{radio:{pressed:{yes:function(){this.delMod(this.elem("radio","pressed","yes"),"pressed")}}}},_onPointerPress:function(t){this._pressedRadio=t.data.domElem,this.isDisabled(this._pressedRadio)||(this.setMod(this._pressedRadio,"pressed","yes"),this.bindToDoc("pointerrelease",this._onPointerRelease))},_onPointerRelease:function(t){var e=this._pressedRadio;delete this._pressedRadio,this.delMod(e,"pressed"),this.afterCurrentEvent(function(){if(this.domElem){var i=this.findElem(e,"control");i.prop("checked")||!e.is(t.target)&&!e.find(t.target).length||i.trigger("change").focus()}}),this.unbindFromDoc("pointerrelease")}},{live:function(){return this.liveBindTo("radio","pointerpress",function(t){this._onPointerPress(t)}).liveBindTo("control","focusin focusout",function(t){!this.hasMod("disabled")&&this.toggleMod("focused","yes","focusin"===t.type)}),this.__base()}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this._items=[],this._curItemIndex=-1,this._scrollableElemOutsidePopup=null,this._rowHeight=22,this.on("change",this._redrawParentPopup);var t=this._getSelectedText();t&&t!==this._getButtonText()&&this.elem("control").trigger("change")}},disabled:function(t,e){this.elem("control").prop("disabled",e),this._getButton().setMod(t,e),e&&this.delMod("opened").delMod("focused")},focused:{yes:function(){if(this.hasMod("disabled"))return!1;this._useNativeControl()||this.bindTo("keydown",this._onKeyDown),this.afterCurrentEvent(function(){this.domElem&&this.trigger("focus")})},"":function(){this._useNativeControl()||this.delMod("opened").unbindFrom("keydown"),this.afterCurrentEvent(function(){this.domElem&&this.trigger("blur")})}},opened:function(t,e){this._getButton()&&this._getButton().domElem&&this._getButton().toggleMod("arrow","up","down",Boolean(e))}},isDisabled:function(){return this.hasMod("disabled","yes")},isOpened:function(){return this.hasMod("opened","yes")},open:function(){return this.setMod("opened","yes")},close:function(){return this.delMod("opened")},val:function(t,e){if(void 0===t)return this.elem("control").val();var i,n=-1;return this.findElem("option").each(function(e){this.value===t&&!this.disabled&&(!(i=$(this).parent("optgroup")[0])||!i.disabled)&&(n=e)}),n>-1&&this._selectedIndex(n,e),this},name:function(t){var e=this.elem("control");return arguments.length?(e.attr("name",t),this):e.attr("name")},_selectedIndex:function(t,e){var i=this._getSelectedIndex();return void 0===t||t===i?i:(this.elem("control").prop("selectedIndex",t),this._useNativeControl()||(this._setButtonText(this._getSelectedText()),this._items[0]&&this.delMod(this._items,"selected").setMod(this._items.eq(t),"selected","yes")),this.trigger("change",$.extend({index:t,prev:i},e)),t)},setOptions:function(t){return t?(BEM.DOM.update(this.elem("control"),BEMHTML.apply($.map(t,this.__self._buildOption))),this.redraw()):this},redraw:function(){return this._popup&&this._redrawList(),this.elem("control").trigger("change"),this},_useNativeControl:function(){return null!==this.__self.useNativeControl?this.__self.useNativeControl:this.__self.useNativeControl="none"!==this.elem("control").css("display")},_redrawParentPopup:function(){var t;return this._isParentPopup()&&((t=this._popup._parent).repaint||t.redraw).call(t),this},_isParentPopup:function(){return this._popup&&this._popup._parent&&!this.hasMod("layout","fixed")},_onSelectChange:function(){this._setButtonText(this._getSelectedText()),this.trigger("change",{index:this._getSelectedIndex(),prev:-1})},_onControlFocusInOut:function(t){this._useNativeControl()&&this.toggleMod("focused","yes","","focusin"===t.type)},_onMouseDown:function(t){this._isControlFocused()&&t.preventDefault()},_onKeyDown:function(t){var e=BEM.blocks.keycodes,i=t.keyCode===e.UP,n=t.keyCode===e.DOWN,o=t.keyCode===e.ENTER,s=t.keyCode===e.SPACE;if(i||n){if(t.preventDefault(),!this.isOpened())return this.open();var r=this._items.length,a=this._curItemIndex;if(i&&0===a||n&&a>r-2)return;if(r){var c,l=n?1:-1;for(c=a;c>=0&&c<=r;)if(c+=l,this._isSelectableItem(this._items.eq(c))){a=c;break}this._onEnterItem(this._items.eq(a),!0)}}(o||s)&&this._onEnterItem(this._items.eq(this._curItemIndex),!0,!0)},_onEnterItem:function(t,e,i){this.elem("button").attr("aria-activedescendant",t.attr("id"));var n=this._curItemIndex,o=this._getItemIndex(t),s=this._items;n>-1&&this.delMod(s.eq(n),"hovered"),o>-1&&(this._curItemIndex=o,this.setMod(s.eq(o),"hovered","yes")),i&&this._selectedIndex(this._curItemIndex),e&&this._scrollToCurrent()},_onLeaveItem:function(t){var e=this._curItemIndex;e>-1&&e===this._getItemIndex(t)&&(this.delMod(this._items.eq(e),"hovered")._curItemIndex=-1)},_onSelectItem:function(t){return this._isSelectableItem(t)&&this._selectedIndex(this._curItemIndex),this.close()},_onButtonFocus:function(){this.setMod("focused","yes")},_findScrollableElemOutsidePopup:function(){if(null===this._scrollableElemOutsidePopup){var t,e=this._getPopup().domElem;do{t=(e=e.parent()).css("overflow-y")}while("scroll"!==t&&"auto"!==t&&"HTML"!==e.prop("tagName"));this._scrollableElemOutsidePopup=e}return this._scrollableElemOutsidePopup},_onButtonBlur:function(){if(this.isOpened()&&this._isPopupFocused())if(8===BEM.blocks["i-ua"].ie){var t=this._findScrollableElemOutsidePopup(),e=t.scrollTop();this._focusButton(),t.scrollTop(e)}else this._focusButton();else this.delMod("focused")},_onButtonPress:function(){this.toggleMod("opened","yes","")},_focusButton:function(){return this._getButton().setMod("focused","yes"),this},_blurButton:function(){return this._getButton().delMod("focused"),this},_isPopupFocused:function(){try{return this._getPopup().containsDomElem($(document.activeElement))}catch(t){return!1}},_getButtonText:function(){return this._getButton().elem("text").text()},_setButtonText:function(t){t.length&&(this._getButton().elem("text").text(t),BEM.blocks["i-ua"].ie<10&&this.domElem.parent().css("outline",""))},_isOutsideClicked:function(t,e){return this.containsDomElem($(e.target))},_getItemIndex:function(t){return $.inArray(t.get(0),this._items)},_getSelectedText:function(){return this.elem("control").find(":selected").text()},_getSelectedIndex:function(){return this.elem("control").prop("selectedIndex")},_isSelectableItem:function(t){return!this.hasMod(t,"disabled","yes")&&!this.hasMod(t,"label","yes")},_getButton:function(){return this._button||(this._button=this.findBlockOn("button","button"))},_getRowHeight:function(){return this.findElem(this._getPopup().domElem,"item").outerHeight()},_isControlFocused:function(){try{return this.containsDomElem($(this.__self.doc[0].activeElement))}catch(t){return!1}},destruct:function(){this._outPopup&&this._outPopup.un("outside-click"),this.delMod("opened"),this._popup&&this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{rows:15,popupMods:{direction:"down"}}}},{live:function(){this.liveBindTo("control","change",function(t){this._onSelectChange()}),this.liveBindTo("control","focusin focusout",function(t){this._onControlFocusInOut(t)}),this.liveBindTo("mousedown",function(t){this._onMouseDown(t)}),this.liveInitOnBlockInsideEvent("focus","button",function(){this._onButtonFocus()}).liveInitOnBlockInsideEvent("blur","button",function(){this._onButtonBlur()})},useNativeControl:null,_buildOption:function t(e,i,n){var o={};return"option"===e.item?(o={block:"select",elem:"option",tag:"option",attrs:{value:e.value},content:e.content},e.disabled&&(o.attrs.disabled="disabled"),e.selected&&(o.attrs.selected="selected")):"optgroup"===e.item&&(o={elem:"option-group",tag:"optgroup",attrs:{label:e.label}},e.disabled&&(o.attrs.disabled="disabled"),o.content=Array.isArray(e.content)?e.content.map(t):e.content),o.block="select",o}}),BEM.DOM.decl("select",{onElemSetMod:{item:{hovered:function(){BEM.blocks["i-ua"].opera<13&&this._popup.domElem.css("display","inline").css("display","")}}}},{live:function(){return this.liveInitOnBlockInsideEvent("press","button",function(){this._onButtonPress()}),this.__base.apply(this,arguments)}}),BEM.DOM.decl("select",{onSetMod:{opened:function(){this.__base.apply(this,arguments),this.hasMod("opened")?$(window).trigger("unConsiderScrollHeight"):$(window).trigger("onConsiderScrollHeight")}},_isOutsideClicked:function(t,e){return!this.containsDomElem($(e.target))}}),BEM.DOM.decl("select",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._initButton()}}},_initButton:function(){},_redrawList:function(){var t,e=this,i=this._getPopup().domElem;return BEM.DOM.update(this.findElem(i,"list"),this.__self._buildItemsHtml(this.elem("control").children())),t=this.findElem(i,"item"),this._curItemIndex=-1,this._items=t.filter(function(){return!e.hasMod($(this),"label","yes")}),this.bindTo(e._items,{pointerclick:function(t){t.preventDefault(),e._onSelectItem(t.data.domElem)},pointerover:function(t){e._onEnterItem(t.data.domElem)},pointerout:function(t){e._onLeaveItem(t.data.domElem)}}),this}},{_buildItemsHtml:function(t){var e={block:"select",elem:"separator",tag:"i"},i=[],n=[];function o(t,e,i){var n={block:"select",elem:"item",content:{elem:"text",tag:"span",content:{tag:!1,html:e}||"   "},elemMods:{}};return i&&(n.elemMods=i),n}return function t(s,r){var a=s.length;if(a){var c=0;do{var l=$(s[c]),u=l.attr("disabled")&&{disabled:"yes"};if(l.is("optgroup")){!0,!l.prev().is("optgroup")&&c>0&&i.push(e),n.push(i),(i=[]).push(o(0,l.attr("label"),$.extend({label:"yes"},u,r))),t(l.children(),$.extend({inner:"yes"},u,r));var h=i;(i=n.pop()).push({block:"select",elem:"group",content:h})}else i.push(o(0,l.html(),$.extend(u,l.is(":selected")&&{selected:"yes"},r)))}while(++c<a||!1)}}(t),BEMHTML.apply(i)}}),BEM.DOM.decl("select",{onSetMod:{opened:{yes:function(){if(this.hasMod("disabled"))return!1;this._drawPopup();var t=this.findElem(this._popup.domElem,"item","selected","yes");this.elem("button").attr({"aria-activedescendant":t.attr("id"),"aria-expanded":!0})},"":function(){this.elem("button").attr("aria-expanded",!1).removeAttr("aria-activedescendant"),this._getPopup().hide()}}},_getPopupContent:function(t){return{block:t,elem:"list"}},_getPopupMix:function(t){return{block:t,elem:"popup",elemMods:{}}},_getPopup:function(){if(this._popup)return this._popup;var t=this,e=t.params,i=t.__self.getName(),n=this._getPopupContent(i),o=this._getPopupMix(i),s={animate:"no"},r={directions:[{to:"bottom",axis:"left",offset:{top:8}},{to:"top",axis:"left",offset:{bottom:8}}]};["size","layout","theme","width"].forEach(function(e){t.hasMod(e)&&(o.elemMods[e]=t.getMod(e))}),$.extend(o.elemMods,e.elemPopupMods),$.extend(s,e.popupMods),$.extend(r,e.popupParams);var a=$(BEMHTML.apply({block:"popup",mods:s,mix:o,js:r,content:{elem:"content",content:n}}));return this._popup=this.findBlockOn(a,"popup"),this._popup.on({show:function(){t._curItemIndex=t._getSelectedIndex();var e=t._items.eq(t._curItemIndex);t.delMod(t._items,"selected").setMod(e,"hovered","yes").setMod(e,"selected","yes")},"outside-click":function(e,i){t._isOutsideClicked(e,i)?e.preventDefault():t._blurButton()},hide:function(){t.delMod("opened").delMod(t._items,"hovered").delMod(t.findElem(t._popup.domElem,"popup"),"scrollable")}}).bindTo("mousedown",function(t){t.preventDefault()}),BEM.DOM.append(BEM.DOM.scope,t._popup.domElem),t._redrawList(),t._outPopup=t.findBlockOutside("button","popup"),t._outPopup&&t._outPopup.on("outside-click",function(e,i){t._popup.containsDomElem($(i.target))&&e.preventDefault()}),t._popup},_calcPopupDimensions:function(){this._popupContent||(this._popupContent=this._getPopup().findBlockInside("popup").elem("content"));var t=parseInt(this.params.rows,10),e=this._getPopup();if(t&&this.findElem(this._popupContent,"item").size()>t){this._rowHeight=this._getRowHeight();var i=parseInt(e.domElem.css("height"),10),n=t*this._rowHeight;i!==n&&(e.setSize({height:n}),i>n&&this.setMod(this.findElem(e.domElem,"popup"),"scrollable","yes"))}else e.setSize({height:"auto"})},_drawPopup:function(){var t=this.findBlockInside("select");this._getPopup().show(t),this._calcPopupDimensions(),this._scrollToCurrent()},_scrollToCurrent:function(){if(this._popupContent&&!(this._curItemIndex<0)){var t,e=this._items.eq(this._curItemIndex).get(0).offsetTop,i=this._popupContent,n=i.scrollTop(),o=e-n,s=2*this._rowHeight;o>i.height()-s?t=e-s:n&&o<s&&(t=e-i.height()+s),t&&i.scrollTop(t)}}},{SHADOW_OFFSET:1}),BEM.DOM.decl({block:"select",modName:"to",modVal:"bottom"},{getDefaultParams:function(){return $.extend(this.__base(),{popupMods:{adaptive:"no"},popupParams:{to:"bottom"}})}}),BEM.DOM.decl({block:"select",modName:"suggest",modVal:"yes"},{onSetMod:{js:{inited:function(){this.suggestBlock=this.findBlockOn("suggest","input"),this.__base.apply(this,arguments),this.eventBinders(),this.collectItemData()}},opened:{"":function(){this.__base.apply(this,arguments),this.suggestBlock._blur()}}},eventBinders:function(){var t=this;this.suggestBlock.on("focus",function(){t.suggestBlock.val(""),t.setSelected(),t.resetFilter(),t.open(),t.setMod("focused","yes")}),this.suggestBlock.on("blur",function(){t.isOpened()&&t.close(),t.updateSuggestBlock(),t.delMod("focused")}),this.suggestBlock.bindTo("control","input",function(){t.filterItems(t.suggestBlock.val()),t._drawPopup()}),this.on("change",function(e,i){t.setSelected(),i.prev>-1&&t.suggestBlock._blur()}),window.top.location!==window.location&&this.on("blur",function(){t.suggestBlock._blur()})},_drawPopup:function(){this.__base.apply(this,arguments),this.afterCurrentEvent(function(){if(!this._isDestructing){var t=this._getPopup();t.isShown()&&t.repaint()}})},collectItemData:function(){var t=this;this._itemsData=[],this.elem("option").each(function(e,i){t._itemsData.push({value:i.value,content:i.label,item:"option"})})},setSelected:function(){var t=this.val();this._itemsData.forEach(function(e){e.selected=e.value===t})},filterItems:function(t){var e=void 0;e=(t=t.toLowerCase()).length?this._itemsData.filter(function(e){return e.content.toLowerCase().indexOf(t)>-1||""===e.value}):this._itemsData,this.setOptions(e)},resetFilter:function(){BEM.DOM.update(this.elem("control"),BEMHTML.apply(this._itemsData.map(this.__self._buildOption))),this._popup&&this._redrawList()},updateSuggestBlock:function(){this.suggestBlock.val(this._getSelectedText())},_setButtonText:function(t){this.__base.apply(this,arguments),this.isOpened()||this.suggestBlock.val(t)}}),BEM.DOM.decl("attach",{onSetMod:{js:{inited:function(){this._noFileText=this.elem("text").text(),this._filePath="",this._setFilePath(""),this.bindTo("reset","pointerclick",this.resetFile)}},disabled:function(t,e){this.elem("control").prop("disabled",e),this.getButton().setMod("disabled",e)}},val:function(){return this._filePath},getButton:function(){return this._button||(this._button=this.findBlockOn("button","button2")||this.findBlockOn("button","button"))},resetFile:function(){if(!this.hasMod("disabled")){var t=this.elem("control");return t.val(""),t.replaceWith(t.clone()),this.dropElemCache("control"),this.getButton().dropElemCache("control"),this._setFilePath(""),this.trigger("reset")}},_setFilePath:function(t,e){var i=this._filePath;this._filePath=t;var n=t.split("\\").pop(),o=n.split(".").pop().toLowerCase();this.setMod(this.elem("holder"),"file",this._extensionsToMods[o]||this.params.unknownType),this.toggleMod(this.elem("holder"),"state","hidden",!n);var s=this.params.textWidth,r=this.elem("text");s&&r.css("width",n?s+"px":"auto"),r.text(n||this._noFileText),(e||t!==i)&&this.trigger("change")},_update:function(){this._setFilePath(this.elem("control").val(),!0)},_extensionsToMods:{zip:"archive",rar:"archive",tar:"archive",gz:"archive","7z":"archive",gif:"gif",jpg:"jpg",jpeg:"jpg",png:"png",eml:"eml",exe:"exe",m4a:"audio",ogg:"audio",mp3:"mp3",wav:"wav",wma:"wma",flv:"video",mov:"mov",wmv:"wmv",mp4:"mp4",avi:"avi",xls:"xls",doc:"doc",docx:"doc",txt:"txt",pdf:"pdf",ppt:"ppt"},getDefaultParams:function(){return{unknownType:"unknown"}}},{live:function(){this.liveBindTo("change",function(){this._update()})}}),BEM.DOM.decl("date-input",{onSetMod:{js:function(){var t=this,e=t.elem("iso-date");t.calendar=t.findBlockInside("control","m-calendar"),t.calendar.on("change",function(i,n){n?e.val(BEM.blocks["mi-helpers"].dateFormat(n,"yyyy-mm-dd")):e.val(""),t.trigger("change")})}},val:function(t){return t&&t instanceof Date?(this.calendar.setDate(t.toISOString()),this):this.calendar.getDate()}}),BEM.blocks["mi-helpers"]={getDateFromHumanString:function(t){var e,i=Math.abs(-(t.search(/\./)+1)||-(t.search("Z")+1)),n=t;return n=n.replace(/-/g,",").replace("T",",").replace(/:/g,","),(n=(n=i?n.substr(0,i-1):n).split(","))[1]=n[1]-1,e=this.getUTC_YMD(n[0],n[1],n[2]),n[3]&&e.setHours(n[3]),n[4]&&e.setMinutes(n[4]),n[5]&&e.setSeconds(n[5]),e},getUTC_YMD:function(t,e,i){return new Date(t,e,i)},getHumanStringFromDate:function(t){var e,i,n,o,s,r,a,c;return t&&t.date?(n=(i=t.date).getFullYear(),o=(i.getMonth()+1).toString(),s=i.getDate().toString(),r=i.getHours().toString(),a=i.getMinutes().toString(),c=i.getSeconds().toString(),1===o.length&&(o="0"+o),e=n+"-"+o,!1!==t.needDay&&(1===s.length&&(s="0"+s),e=e+"-"+s,t.needHours&&(1===r.length&&(r="0"+r),e=e+"T"+r,t.needMinutes&&(1===a.length&&(a="0"+a),e=e+":"+a,t.needSeconds&&(1===c.length&&(c="0"+c),e=e+":"+c)))),e):null},validateNumberOnlyInput:function(t){var e,i,n,o=!1,s=t.target,r=$(s),a=s.selectionStart,c=r.val(),l=/^[-|\d]{1}\d{0,}(?:[.,]{0,1}\d{0,})$/;if(!l.exec(c)&&c.length){for(e=0;e<c.length;e++)if(i=c.substr(0,e)+c.substr(e+1,c.length),l.exec(i)){r.val(i),s.setSelectionRange(a-1,a-1),o=!0;break}o||(n=/\d+(?:[.,]{0,1}\d{0,})/.exec(c),r.val(n?n[0]:""))}},isVisible:function(t){var e,i=BEM.DOM.win.get(0);return t===BEM.DOM.doc.get(0)||!(!t||!t.parentNode)&&((!t.style||"none"!==t.style.display&&"hidden"!==t.style.visibility)&&((!i.getComputedStyle||"none"!==(e=i.getComputedStyle(t,"")).display&&"hidden"!==e.visibility)&&this.isVisible(t.parentNode)))},htmlSpecialChars:function(t){return"string"==typeof t?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):t},dateFormat:function(){var t=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,e=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,i=/[^-+\dA-Z]/g,n=function(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t},o={default:"d mmm yyyy",shortDate:"d mmm yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"HH:MM",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",dayMonthTime:"dd.mm hh:mm",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};return function(s,r,a){1!=arguments.length||"[object String]"!=Object.prototype.toString.call(s)||/\d/.test(s)||(r=s,s=void 0);try{if(s=s?new Date(s):new Date,isNaN(s))throw SyntaxError("invalid date");"UTC:"==(r=String(o[r]||r||o.default)).slice(0,4)&&(r=r.slice(4),a=!0);var c=a?"getUTC":"get",l=s[c+"Date"](),u=s[c+"Day"](),h=s[c+"Month"](),d=s[c+"FullYear"](),p=s[c+"Hours"](),f=s[c+"Minutes"](),m=s[c+"Seconds"](),_=s[c+"Milliseconds"](),g=a?0:s.getTimezoneOffset(),v={d:l,dd:n(l),ddd:BEM.I18N("i-tanker__days","short"+(u||7)),dddd:BEM.I18N("i-tanker__days","n"+(u||7)),m:h+1,mm:n(h+1),mmm:BEM.I18N("i-tanker__months","short"+(h+1)),mmmm:BEM.I18N("i-tanker__months","g"+(h+1)),yy:String(d).slice(2),yyyy:d,h:p%12||12,hh:n(p%12||12),H:p,HH:n(p),M:f,MM:n(f),s:m,ss:n(m),l:n(_,3),L:n(_>99?Math.round(_/10):_),t:p<12?"a":"p",tt:p<12?"am":"pm",T:p<12?"A":"P",TT:p<12?"AM":"PM",Z:a?"UTC":(String(s).match(e)||[""]).pop().replace(i,""),o:(g>0?"-":"+")+n(100*Math.floor(Math.abs(g)/60)+Math.abs(g)%60,4),S:["th","st","nd","rd"][l%10>3?0:(l%100-l%10!=10)*l%10]};return r.replace(t,function(t){return t in v?v[t]:t.slice(1,t.length-1)})}catch(t){}}}()},BEM.DOM.decl("m-datepicker",{getDate:function(){return!!this._isDateSelected&&this._selectedDate},getSelectedDay:function(){return!!this._isDateSelected&&this._selectedDate.getDate()},setDate:function(t,e,i){if("string"==typeof t)this._selectedDate=BEM.blocks["mi-helpers"].getDateFromHumanString(t);else{if("object"!==(void 0===t?"undefined":_typeof(t)))throw new Error("Wrong argument! Should be ISOString string or { from: ISOString, to: ISOString } object");this._selectedDate={from:BEM.blocks["mi-helpers"].getDateFromHumanString(t.from),to:BEM.blocks["mi-helpers"].getDateFromHumanString(t.to)}}this._isDateSelected=!0,this.trigger("change",{date:this.getDate(),fromArrow:!e}),e||this._buildDatepicker(i?this._selectedDate:null),this.clearButton&&this.clearButton.delMod("disabled")},clearDate:function(){this._isDateSelected=!1,this.trigger("change",{date:this.getDate()})},_getFootElemBEMJSON:function(t){return{block:"m-datepicker",elem:"foot",content:t}},_getCurrentDate:function(){return new Date},_getStartDay:function(t,e,i){var n;return"string"==typeof t||"number"==typeof t?(i=e,e=t,n=BEM.blocks["mi-helpers"].getUTC_YMD(i,e,1).getDay()):n=t.getDay(),0===n&&(n=7),n},_getMonthDays:function(t,e){var i=[31,28,31,30,31,30,31,31,30,31,30,31][t];return 28!==i||e%4!=0||e%100==0&&e%400!=0||(i=29),i},_isDateSelected:!1}),BEM.DOM.decl("m-calendar",{_popUpOpened:!1,onSetMod:{js:function(){this.params.value&&(this._notTriggerChange=!0,this.setDate(this.params.value))}},getDatePicker:function(){return this._datePicker||!1},setDate:function(t,e){this._datePicker&&this._popUpOpened||(this.params.value=t,this._buildDatePicker()),this._datePicker.setDate(t,!e,e)},getDate:function(){return this._datePicker||this._buildDatePicker(),this._datePicker.getDate()},clearDate:function(){this._datePicker||this._buildDatePicker(),this._datePicker.clearDate()},_onDateChange:function(t,e){this._popUpOpened&&!e.fromArrow&&this.params.autoclose&&this._datePickerPopup.delMod("visible"),!this._notTriggerChange&&this.trigger("change",this._datePicker.getDate()),this._notTriggerChange=!1},_onTogglerClick:function(){this._datePicker||this._buildDatePicker(),this._datePickerPopup.setMod("visible","yes"),this._datePicker.setSizes()},_onDatePickerPopupHide:function(){this.input._isDatePickerOpened=!1,this._popUpOpened=!1,this.trigger("hide")},_onDatePickerPopupShow:function(){this._popUpOpened=!0,this.trigger("show")},_buildDatePicker:function(){this._buildPopup(),this._datePicker=$(BEMHTML.apply(this._getDatePickerBEMJSON())).bem("m-datepicker"),this._datePicker.on("change",this._onDateChange,this),this._datePickerPopup.setContent(this._buildTail().add(this._datePicker.domElem)).setAnchor(this.elem("toggler")).on("beforeClose",this._onDatePickerPopupHide,this).on("beforeOpen",this._onDatePickerPopupShow,this)},_buildTail:function(){return $(BEMHTML.apply({block:"popup2",elem:"tail"}))},_buildPopup:function(){this._datePickerPopup||(this._datePickerPopup=$(BEMHTML.apply({block:"popup2",mix:[{block:"m-calendar",elem:"popup",elemMods:{type:this.getMod("type")}}],mods:{target:"anchor",theme:"normal",autoclosable:"yes"},content:[{elem:"tail"},{elem:"content"}]})).bem("popup2"))}},{dateFormat:BEM.blocks["mi-helpers"].dateFormat}),function(t){var e,i={},n={16:!1,18:!1,17:!1,91:!1},o="all",s={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},r={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},a=function(t){return r[t]||t.toUpperCase().charCodeAt(0)},c=[];for(e=1;e<20;e++)r["f"+e]=111+e;function l(t,e){for(var i=t.length;i--;)if(t[i]===e)return i;return-1}function u(t,e){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}var h={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function d(t){for(e in n)n[e]=t[h[e]]}function p(t,e,n){var o,s;o=m(t),void 0===n&&(n=e,e="all");for(var r=0;r<o.length;r++)s=[],(t=o[r].split("+")).length>1&&(s=_(t),t=[t[t.length-1]]),t=t[0],(t=a(t))in i||(i[t]=[]),i[t].push({shortcut:o[r],scope:e,method:n,key:o[r],mods:s})}for(e in s)p[e]=!1;function f(){return o||"all"}function m(t){var e;return""==(e=(t=t.replace(/\s/g,"")).split(","))[e.length-1]&&(e[e.length-2]+=","),e}function _(t){for(var e=t.slice(0,t.length-1),i=0;i<e.length;i++)e[i]=s[e[i]];return e}function g(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,function(){i(window.event)})}g(document,"keydown",function(t){!function(t){var e,o,r,a,u,h;if(e=t.keyCode,-1==l(c,e)&&c.push(e),93!=e&&224!=e||(e=91),e in n)for(r in n[e]=!0,s)s[r]==e&&(p[r]=!0);else if(d(t),p.filter.call(this,t)&&e in i)for(h=f(),a=0;a<i[e].length;a++)if((o=i[e][a]).scope==h||"all"==o.scope){for(r in u=o.mods.length>0,n)(!n[r]&&l(o.mods,+r)>-1||n[r]&&-1==l(o.mods,+r))&&(u=!1);(0!=o.mods.length||n[16]||n[18]||n[17]||n[91])&&!u||!1===o.method(t,o)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}(t)}),g(document,"keyup",function(t){var e,i=t.keyCode,o=l(c,i);if(o>=0&&c.splice(o,1),93!=i&&224!=i||(i=91),i in n)for(e in n[i]=!1,s)s[e]==i&&(p[e]=!1)}),g(window,"focus",function(){for(e in n)n[e]=!1;for(e in s)p[e]=!1});var v=t.keymaster;t.keymaster=p,t.keymaster.setScope=function(t){o=t||"all"},t.keymaster.getScope=f,t.keymaster.deleteScope=function(t){var e,n,o;for(e in i)for(n=i[e],o=0;o<n.length;)n[o].scope===t?n.splice(o,1):o++},t.keymaster.filter=function(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)},t.keymaster.isPressed=function(t){return"string"==typeof t&&(t=a(t)),-1!=l(c,t)},t.keymaster.getPressedKeyCodes=function(){return c.slice(0)},t.keymaster.noConflict=function(){var e=t.keymaster;return t.keymaster=v,e},t.keymaster.unbind=function(t,e){var n,o,s,r,c,l=[];for(n=m(t),r=0;r<n.length;r++){if((o=n[r].split("+")).length>1&&(l=_(o),t=o[o.length-1]),t=a(t),void 0===e&&(e=f()),!i[t])return;for(s=0;s<i[t].length;s++)(c=i[t][s]).scope===e&&u(c.mods,l)&&(i[t][s]={})}},"undefined"!=typeof module&&(module.exports=p)}(window),keymaster.filter=function(){return!0},function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=t:t(jQuery)}(function(t){var e,i,n=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(t.event.fixHooks)for(var s=n.length;s;)t.event.fixHooks[n[--s]]=t.event.mouseHooks;function r(n){var o,s,r,a=n||window.event,c=[].slice.call(arguments,1),l=0,u=0,h=0;return(n=t.event.fix(a)).type="mousewheel",a.wheelDelta&&(l=a.wheelDelta),a.detail&&(l=-1*a.detail),a.deltaY&&(l=h=-1*a.deltaY),a.deltaX&&(l=-1*(u=a.deltaX)),void 0!==a.wheelDeltaY&&(h=a.wheelDeltaY),void 0!==a.wheelDeltaX&&(u=-1*a.wheelDeltaX),o=Math.abs(l),(!e||o<e)&&(e=o),s=Math.max(Math.abs(h),Math.abs(u)),(!i||s<i)&&(i=s),r=l>0?"floor":"ceil",l=Math[r](l/e),u=Math[r](u/i),h=Math[r](h/i),c.unshift(n,l,u,h),(t.event.dispatch||t.event.handle).apply(this,c)}t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=o.length;t;)this.addEventListener(o[--t],r,!1);else this.onmousewheel=r},teardown:function(){if(this.removeEventListener)for(var t=o.length;t;)this.removeEventListener(o[--t],r,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),BEM.DOM.decl({name:"m-datepicker",modName:"type",modVal:"month"},{onSetMod:{js:function(){this.hasMod("disable","change")&&(this.changeDisabled=!0),this._todayDate=this._getCurrentDate(),this.params.specialDays&&(this._specialDays=this.params.specialDays,this.setMod("special-days","yes")),this.params.limits&&this.setLimits(this.params.limits.min,this.params.limits.max),this.params.value?this.setDate(this.params.value):this._buildDatepicker(),this.changeDisabled||this.bindTo("mousewheel",this._onMouseWheel),this._checkLimits()}},setSpecialDays:function(t){this._specialDays=t,this._buildDatepicker()},setMinDate:function(t){if(t=BEM.blocks["mi-helpers"].getDateFromHumanString(t),this._maxDate&&t>this._maxDate)throw new Error("meccano:m-datepicker:  min date should be less then Max date");this._minDate=t,this.yearChooserControl&&this.yearChooserControl.attr("min",t.getFullYear())},setMaxDate:function(t){if(t=BEM.blocks["mi-helpers"].getDateFromHumanString(t),this._minDate&&t<this._minDate)throw new Error("meccano:m-datepicker: max date should be greater then Min date");this._maxDate=t,this.yearChooserControl&&this.yearChooserControl.attr("max",t.getFullYear())},setLimits:function(t,e){t&&this.setMinDate(t),e&&this.setMaxDate(e)},_checkLimits:function(){this._minDate&&this._toggleDirectionButton("previous"),this._maxDate&&this._toggleDirectionButton("next")},_toggleDirectionButton:function(t){var e=this[t+"Button"],i="next"==t?this._maxDate:this._minDate,n=BEM.blocks["mi-helpers"].getUTC_YMD(this._dates[t].year,this._dates[t].month,"next"==t?1:this._dates[t].monthDays),o="next"==t?n>i:n<i;o&&e.delMod("hovered"),e.toggleMod("disabled","yes","",o)},_toggleMonthChooserButtons:function(){var t,e,i=0,n=11,o=this.monthChooserButtons[0];this._minDate&&this.gereatChooserData.year==this._minDate.getFullYear()&&(i=this._minDate.getMonth()),this._maxDate&&this.gereatChooserData.year==this._maxDate.getFullYear()&&(n=this._maxDate.getMonth()),this.monthChooserRadio.each(function(s){e=$(this),(t=s<i||s>n)&&(this.control.checked=!1,o.setMod(e,"checked","")),o.toggleMod(e,"disabled","yes","",t)})},_onMouseWheel:function(t,e,i,n){var o;if(t.preventDefault(),this._isChangeCalendarRunning)return!1;this._isChangeCalendarRunning=!0,(i<0||n>0)&&(o=this._changeMonth("next")),(i>0||n<0)&&(o=this._changeMonth("previous")),o||(this._isChangeCalendarRunning=!1)},setSizes:function(){var t,e=this.findElem("bodies");if(!this._sizes){if(!(t=this.findElem("grid-table")).width()||!t.height())return;this._sizes={gridWidth:t.width(),gridHeight:t.height(),titleHeight:this.findElem("title","position","current").height()}}e.css({width:this._sizes.gridWidth,height:this._sizes.gridHeight}),this.findElem("head").height(this._sizes.titleHeight),this._blockSizeSet||(this.domElem.width(this.domElem.outerWidth()),this.domElem.height(this.domElem.outerHeight()),this._blockSizeSet=!0)},_onTitleClick:function(){var t=this;this.toggleMod("show","great-chooser"),this.hasMod("show","great-chooser")?(this._subscribeChooserControlls(),this.gereatChooserData={year:this._dates.current.year,month:this._dates.current.month},this.yearChooser.val(this._dates.current.year),this.monthChooserButtons.forEach(function(e){e.val(t._dates.current.month.toString())}),this._toggleMonthChooserButtons()):this._unsubscribeChooserControlls()},_subscribeChooserControlls:function(){var t=this;this.monthChooserButtons.forEach(function(e){e.on("change",t._onChooserMonthChange,t)}),this.bindToDomElem(this.yearChooserControl,"input",this._onChooserYearInput),this.bindTo(this.chooser,"submit",this._onChooserSubmit)},_unsubscribeChooserControlls:function(){this.monthChooserButtons.forEach(function(t){t.un("change")}),this.unbindFromDomElem(this.yearChooserControl,"input"),this.unbindFrom(this.chooser,"submit")},_onChooserSubmit:function(t){t.preventDefault(),this.delMod("show"),this._buildDatepicker(BEM.blocks["mi-helpers"].getUTC_YMD(this.gereatChooserData.year,this.gereatChooserData.month,1)),this._checkLimits()},_onChooserMonthChange:function(t){this.gereatChooserData.month=t.target.val()},_onChooserYearInput:function(t){var e=this.yearChooser.val();e&&(this._maxDate&&e>this._maxDate.getFullYear()||this._minDate&&e<this._minDate.getFullYear()||(this.yearChooser.val(e),this.gereatChooserData.year=e,this._toggleMonthChooserButtons()))},_bindToDates:function(){this.bindTo(this.findElem("dates"),"click",this._onDateChoose)},_onChangeMonthButtonClick:function(t){var e=t.target.getMod("target");this._isChangeCalendarRunning||this._changeMonth(e)},_changeMonth:function(t){var e=this,i=BEM.I18N("i-tanker__months","n"+(this._dates[t].month+1))+" "+this._dates[t].year,n=this.findElem("body","position","back"),o=this.findElem("body","position","current"),s=this.findElem("title","position","back"),r=this.findElem("title","position","current"),a=n.add(s),c=o.add(r),l=n.add(o).add(s).add(r);return!("previous"==t&&this.previousButton.hasMod("disabled")||"next"==t&&this.nextButton.hasMod("disabled"))&&(this.setMod(l,"transition","no").setMod(a,"direction",t),this._isChangeCalendarRunning=!0,BEM.DOM.update(n,BEMHTML.apply(this._buildDatepickerGridBEMJSON(this._dates[t]))),BEM.DOM.update(s,BEMHTML.apply(this._getTitleClickBEMJSON(i))),this._createDateContext({year:this._dates[t].year,month:this._dates[t].month}),setTimeout(function(){e.delMod(l,"transition").delMod(a,"direction").setMod(c,"direction",t)},50),n.on("TransitionEnd webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd",function(){e.setMod(l,"transition","no").setMod(a,"position","current").setMod(c,"position","back").delMod(c,"direction"),BEM.DOM.update(c,""),n.off(),e._bindToDates(),e._bindTitleClick(),e._isChangeCalendarRunning=!1,e.setSizes()}),this._checkLimits(),!0)},_getTitleClickBEMJSON:function(t){return{block:"m-datepicker",elem:"title-click",tag:"span",content:[t,{block:"awesome-icon",mods:{icon:"angle-down"}}]}},_bindTitleClick:function(){this.bindTo(this.findElem("title-click"),"click",this._onTitleClick)},_createDateContext:function(t){var e,i,n,o,s,r,a=t instanceof Date;e=a?t.getMonth():t.month,o=a?t.getFullYear():t.year,i=e-1<0?11:e-1,n=e+1>11?0:e+1,s=11===i?o-1:o,r=0===n?o+1:o,this._dates={current:this._fillDateContext(e,o),previous:this._fillDateContext(i,s),next:this._fillDateContext(n,r)}},_fillDateContext:function(t,e){return{month:t,year:e,startDay:this._getStartDay(t,e),monthDays:this._getMonthDays(t,e)}},_buildDatepicker:function(t){t?this._createDateContext(t):this.params.date?this._createDateContext(BEM.blocks["mi-helpers"].getDateFromHumanString(this.params.date+"-01")):this._isDateSelected?this._createDateContext(this._selectedDate):this._createDateContext(this._todayDate),BEM.DOM.update(this.domElem,BEMHTML.apply(this._getDatePickerBEMJSON())),this.changeDisabled||(this._findMainControlls(),this._subscribeMainControlls(),this._bindToDates()),this.setSizes()},_findMainControlls:function(){this.previousButton=this.findBlockInside({block:"button",modName:"target",modVal:"previous"}),this.nextButton=this.findBlockInside({block:"button",modName:"target",modVal:"next"}),this.monthChooserButtons=this.findBlocksInside("choose-month","radio-button"),this.monthChooserRadio=this.monthChooserButtons[0].findElem("radio"),this.yearChooser=this.findBlockInside("choose-year","input"),this.yearChooserControl=this.yearChooser.findElem("control"),this.chooser=this.findElem("great-chooser"),this.hasMod("has","clear")&&(this.clearButton=this.findBlockInside({block:"button",modName:"action",modVal:"clear"}))},_subscribeMainControlls:function(){this.previousButton.on("click",this._onChangeMonthButtonClick,this),this.nextButton.on("click",this._onChangeMonthButtonClick,this),this.clearButton&&this.clearButton.on("click",this.clearDate,this),this._bindTitleClick()},_onDateChoose:function(t){var e=$(t.target),i=e.hasClass(BEM.INTERNAL.buildClass(this.__self.getName(),"day")),n=e.hasClass(BEM.INTERNAL.buildClass(this.__self.getName(),"day","disabled","yes"));i&&!n&&(this._selectedDate=BEM.blocks["mi-helpers"].getUTC_YMD(this._dates.current.year,this._dates.current.month,$(t.target).attr("data-content")),this._isDateSelected||(this._isDateSelected=!0),this.delMod(this.findElem("day","selected","yes"),"selected").setMod($(t.target),"selected","yes").trigger("change",{date:this.getDate()}),this.clearButton&&this.clearButton.delMod("disabled"))},_getDatePickerBEMJSON:function(){var t,e=[{block:"m-datepicker",elem:"head",content:this._getDatePickerHeadBEMJSON()},{block:"m-datepicker",elem:"bodies",content:[{elem:"body",elemMods:{position:"back"}},{elem:"body",elemMods:{position:"current"},content:this._buildDatepickerGridBEMJSON(this._dates.current)}]}];return this.changeDisabled||e.push({block:"m-datepicker",elem:"great-chooser",content:this._buildGreatChooserBEMJSON()}),this.hasMod("has","clear")&&(t=this._getFootElemBEMJSON({block:"button",mods:{theme:"normal",type:"simple",size:"s",action:"clear"},content:BEM.I18N("m-datepicker","clear")}),this._isDateSelected||(t.content.mods.disabled="yes"),e.push(t)),e},_buildGreatChooserBEMJSON:function(){return[{elem:"choose-year",content:{block:"input",mods:{theme:"normal",size:"s",clear:"no"},content:{elem:"control",attrs:{type:"number",min:this._minDate?this._minDate.getFullYear():"",max:this._maxDate?this._maxDate.getFullYear():""}}}},{elem:"choose-month",content:function(){for(var t=1,e=[],i=0;i<4;i++)e.push({block:"radio-button",mods:{theme:"normal",size:"s",quorter:"q"+(i+1)},js:{id:"1234"},name:this._uniqId+"-radio",inputAttrs:{name:"q"+(i+1)},content:function(){for(var e=[],i=1;i<4;i++)e.push({elem:"radio",controlAttrs:{value:t-1,required:"required"},content:BEM.I18N("i-tanker__months","short"+t)}),t++;return e}()});return e}.bind(this)()},{elem:"chooser-submit",content:{block:"button",mods:{theme:"normal",size:"s",type:"month"},type:"submit",content:"OK"}}]},_getDatePickerHeadBEMJSON:function(){var t=BEM.I18N("i-tanker__months","n"+(this._dates.current.month+1))+" "+this._dates.current.year;return this.changeDisabled?{elem:"titles",content:{elem:"title",elemMods:{position:"current"},content:t}}:[{elem:"left",content:{block:"button",mods:{theme:"normal",type:"simple",size:"s",target:"previous"},content:"←"}},{elem:"titles",content:[{elem:"title",elemMods:{position:"current"},content:this._getTitleClickBEMJSON(t)},{elem:"title",elemMods:{position:"back"}}]},{elem:"right",content:{block:"button",mods:{theme:"normal",type:"simple",size:"s",target:"next"},content:"→"}}]},_buildDatepickerGridBEMJSON:function(t){var e=this,i=[],n=this._buildGridMap(t);return i.push({elem:"thead",tag:"thead",content:{elem:"thead-line",tag:"tr",content:function(){var t,e=[];for(t=0;t<7;t++)e.push({elem:"day-name",tag:"th",content:{elem:"day-name-i",content:BEM.I18N("m-datepicker__short-days",t+1)}});return e}()}}),i.push({elem:"dates",tag:"tbody",content:function(){for(var i=[],o=0;o<n.length;o++)i.push({elem:"week",tag:"tr",content:function(){var i,s,r,a,c=[],l=e._maxDate||e._minDate,u=t.month==e._todayDate.getMonth()&&t.year==e._todayDate.getFullYear(),h=e._selectedDate&&t.month==e._selectedDate.getMonth()&&t.year==e._selectedDate.getFullYear(),d=BEM.blocks["mi-helpers"].getUTC_YMD(t.year,t.month,1);a=1===(t.month+1).toString().length?"0"+(t.month+1):t.month+1;for(var p=0;p<7;p++)n[o][p]?(i={elem:"day",tag:"td",elemMods:{},attrs:{"data-content":n[o][p]}},e._specialDays&&(s=1===n[o][p].toString().length?"0"+n[o][p].toString():n[o][p],r=t.year+"-"+a+"-"+s,e._specialDays[r]&&(i.attrs.style="background: "+e._specialDays[r].background+"; ",e._specialDays[r].color&&(i.attrs.style=i.attrs.style+"color: "+e._specialDays[r].color),i.attrs.title=e._specialDays[r].title)),5!==p&&6!==p||(i.elemMods.weekend="yes"),h&&n[o][p]===e.getSelectedDay()&&(i.elemMods.selected="yes"),u&&n[o][p]===e._todayDate.getDate()&&(i.elemMods.today="yes"),l&&(d.setDate(n[o][p]),(e._minDate&&d<e._minDate||e._maxDate&&d>e._maxDate)&&(i.elemMods.disabled="yes")),c.push(i)):(i={elem:"day-empty",tag:"td"},c.push(i));return c}()});return i}()}),{block:"m-datepicker",elem:"grid",content:[{elem:"grid-table",tag:"table",content:i}]}},_buildGridMap:function(t){var e,i=0,n=new Array(7),o=[];for(e=1;e<=t.monthDays;e++)1==e&&(i=t.startDay-1),n[i]=e,6==i?(o.push(n),n=new Array(7),i=0):i++,e+1>t.monthDays&&o.push(n);return o.length<6&&o.push(new Array(7)),o},_isChangeCalendarRunning:!1}),BEM.DOM.decl({name:"m-datepicker",modName:"type",modVal:"month"},{clearDate:function(){this.__base.apply(this,arguments),this._buildDatepicker(new Date(this._dates.current.year,this._dates.current.month,1)),this.clearButton&&this.clearButton.setMod("disabled","yes")},_onChooserSubmit:function(t){t.preventDefault();var e=!isNaN(new Date(this.gereatChooserData.year,this.gereatChooserData.month).getTime()),i=void 0;this.delMod("show"),e&&(i=BEM.blocks["mi-helpers"].getUTC_YMD(this.gereatChooserData.year,this.gereatChooserData.month,1)),this._buildDatepicker(i),this._checkLimits()}}),BEM.DOM.decl({name:"m-calendar",modName:"type",modVal:"month"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.params.keyboard&&window.keymaster("enter, left, right, up, down",this._onKeyDown.bind(this))}},destruct:function(t){this.params.keyboard&&window.keymaster.unbind("enter, left, right, up, down",this),this.__base(t)},_onKeyDown:function(t){var e,i,n=this.params;this.__self.activeCalendar===this&&(this._datePicker._selectedDate?e=Number(this._datePicker._selectedDate):i=n.date?new Date(n.date):new Date,i||"Left"!==t.keyIdentifier?i||"Right"!==t.keyIdentifier?i||"Up"!==t.keyIdentifier?i||"Down"!==t.keyIdentifier||(t.preventDefault(),i=new Date(e+this.__self.MILLISECONDS_IN_WEEK)):(t.preventDefault(),i=new Date(e-this.__self.MILLISECONDS_IN_WEEK)):i=new Date(e+this.__self.MILLISECONDS_IN_DAY):i=new Date(e-this.__self.MILLISECONDS_IN_DAY),!(!n.limits||n.limits&&(!n.limits.max||BEM.blocks["mi-helpers"].getDateFromHumanString(n.limits.max)>=i)&&(!n.limits.min||BEM.blocks["mi-helpers"].getDateFromHumanString(n.limits.min)<=i))||"Left"!==t.keyIdentifier&&"Right"!==t.keyIdentifier&&"Up"!==t.keyIdentifier&&"Down"!==t.keyIdentifier?"Enter"===t.keyIdentifier&&this._datePicker._selectedDate&&this.setDate(BEM.blocks["mi-helpers"].dateFormat(this._datePicker._selectedDate,"yyyy-mm-dd")):this.setDate(BEM.blocks["mi-helpers"].dateFormat(i,"yyyy-mm-dd"),!0))},_getDatePickerBEMJSON:function(){var t={block:"m-datepicker",mods:{type:"month"},js:["value","date","specialDays","limits"].reduce(function(t,e){return this.params[e]&&(t[e]=this.params[e]),t}.bind(this),{})};return this.hasMod("has","clear")&&(t.mods.has="clear"),t},setSpecialDays:function(t){return this._datePicker.setSpecialDays(t)},setMinDate:function(t){return this._datePicker.setMinDate(t)},setMaxDate:function(t){return this._datePicker.setMaxDate(t)},setLimits:function(t,e){return this._datePicker.setLimits(t,e)},_onDatePickerPopupHide:function(){this.__base.apply(this,arguments),this.__self.activeCalendar=null},_onDatePickerPopupShow:function(){this.__base.apply(this,arguments),setTimeout(function(){this.__self.activeCalendar=this}.bind(this),200)}},{MILLISECONDS_IN_DAY:864e5,MILLISECONDS_IN_WEEK:6048e5}),BEM.DOM.decl("i-ua",{},{placeholder:"placeholder"in document.createElement("input")}),BEM.DOM.decl("input",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),(this._hasHint=Boolean(this.elem("hint")[0]))&&this.on("change",this._updateHint)._updateHint()}},focused:function(){if(!1===this.__base.apply(this,arguments))return!1;this._hasHint&&this._updateHint()}},_updateHint:function(){this.toggleMod(this.elem("hint"),"visibility","visible",!this.val())}}),BEM.DOM.decl({name:"m-calendar",modName:"toggler",modVal:"input"},{onSetMod:{js:function(){var t=this;this.input=this.findBlockInside({block:"input",modName:"toggler",modVal:"datepicker"}),this.__base.apply(this,arguments),this.input.bindTo("click",t._onTogglerClick.bind(this)),this.input.on("focus",this._onTogglerClick,this),this.input.bindTo(this.input.domElem,"mousedown",function(){t.input.un("focus")})},disabled:function(t,e){this.input.setMod(t,e)}},_onDateChange:function(t,e){var i=BEM.blocks["m-calendar"].dateFormat,n=e.date;e.fromArrow||(n?n.from?this.input.val(i(n.from)+" — "+i(n.to)):this.input.val(i(n)):this.input.val("")),this.__base.apply(this,arguments)},_onTogglerClick:function(){var t=this;this.input._isDatePickerOpened=!0,this.__base.apply(this,arguments),this.bindToDoc("keydown.close",function(e){9===e.which&&(this._datePickerPopup.delMod("visible"),t.unbindFromDoc("keydown.close"))})},_onDatePickerPopupHide:function(){this.__base.apply(this,arguments),this.input.delMod("focused"),this.input.on("focus",this._onTogglerClick,this),this.unbindFromDoc("keydown.close")}}),BEM.DOM.decl({name:"m-calendar",modName:"toggler",modVal:"input"},{onSetMod:{js:function(){var t=this;this.input=this.findBlockInside({block:"input",modName:"toggler",modVal:"datepicker"}),this.input&&(this.__base.apply(this,arguments),this.input.bindTo("pointerclick",t._onTogglerClick.bind(t)),this.input.elem("control").on("focus",function(){t.input.elem("control").blur(),t._onTogglerClick.call(t)}))}}}),BEM.DOM.decl("date-range-input",{val:function(t,e){var i=this.findBlockInside("from","date-input"),n=this.findBlockInside("to","date-input");return t||e?(t&&i.val(t),e&&n.val(e),this):[i.val(),n.val()]}}),BEM.DOM.decl("date-range-input",{onSetMod:{js:function(){var t=this,e=t.findBlockInside(t.elem("from"),"m-calendar"),i=t.findBlockInside(t.elem("to"),"m-calendar"),n={min:e.params.limits.min,max:i.params.limits.max},o=function(e,i,o){var s=o||n[i],r=e.getDate(),a=e.params;a.value=r?BEM.blocks["mi-helpers"].getHumanStringFromDate({date:r}):"",a.limits[i]=s,e._buildDatePicker(),t.trigger("change")};t.controls={from:e,to:i},o(i,"min",e.params.value),o(e,"max",i.params.value),e.on("change",function(t,e){o(i,"min",BEM.blocks["mi-helpers"].dateFormat(e,"yyyy-mm-dd"))}),i.on("change",function(t,i){o(e,"max",BEM.blocks["mi-helpers"].dateFormat(i,"yyyy-mm-dd"))})}}}),BEM.DOM.decl("payment-question",{onSetMod:{js:function(){var t=this,e=t.elem("control"),i=t.elemParams(e),n=t.findBlockInside(e,"input")||t.findBlockInside(e,"radio-button")||"";t.min=i.min,t.max=i.max,t.amount=i.min,t.price=i.price,t.updatePrice(),n.on("change",function(){t.amount=n.val(),t.updatePrice()})}},min:1,max:1,price:0,amount:1,getPriceStr:function(){var t=this.amount,e=t*this.price;return(t>this.max||t<this.min)&&(e=0),accounting.formatNumber(e,0," ")},updatePrice:function(){var t=this.findBlockInside("price").elem("val");BEM.DOM.update(t,this.getPriceStr())}}),BEM.DOM.decl("survey-question",{onSetMod:{js:function(){var t=BEM.blocks["cf-helpers"],e=this.findBlockOutside("survey");this.controls=this.getControls(),this.formId=e.params.formId,"preview"!==e.getMod("type")&&(this.surveyStorage=t.getStorage("sessionStorage")),"yes"!==e.getMod("form-returned")&&"yes"!==e.getMod("editing-answer")&&this.setPresetQuestionAnswer(),this.on("validation-change",this._onValidationChange,this),this.subscribeControlChanges()}},subscribeControlChanges:function(){var t=this;this.controls.forEach(function(e){var i=null;e.on("change",function(){clearTimeout(i),i=setTimeout(t._onChangeControl(e),300)})})},setPresetQuestionAnswer:function(){var t=this.getFormStorageData();this.params.defaultFromQuery?this.presetAnswer(this.params.defaultFromQuery,"query"):t&&t[this.params.name]&&this.presetAnswer(t[this.params.name],"storage")},presetAnswer:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";this.setPresetAnswer(t),BEM.blocks["fi-metrika"].setParams({"Предзаполнение":_defineProperty({},e,this.getMod("widget"))})},setPresetAnswer:function(){},getControls:function(){return[]},checkValueWithCond:function(t,e){var i=!1;return this.getControls().forEach(function(n){var o=n.val();switch(t){case"eq":o===e&&(i=!0);break;case"neq":o!==e&&(i=!0)}}),i},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){var e=$.trim(t.val());return Boolean(e)})}}},clearValue:function(){},val:function(){},_onChangeControl:function(t){var e=this.getMod("widget"),i=this.params.name,n=void 0;if(this.trigger("change"),this.surveyStorage&&!{captcha:!0,agreement:!0,"autocomplete-selection":!0}[e]){var o=this.getFormStorageData()||{};switch(e){case"checkbox":n=t.isChecked()?"True":"False";break;case"checkbox-list":case"date-widget":n=this.val();break;default:n=t.val()}n?o[i]=n:o[i]&&delete o[i],this.setFormStorageData(o)}},_onValidationChange:function(t,e){e.isValid?this.delMod("invalid"):this.setMod("invalid","yes")},deleteFromStorage:function(t){var e=this.getFormStorageData()||{};e[t]&&delete e[t],this.setFormStorageData(e)},getFormStorageData:function(){return this.surveyStorage&&this.surveyStorage.getData(this.getFormStorageKey())},setFormStorageData:function(t){this.surveyStorage&&t&&this.surveyStorage.setItem(this.getFormStorageKey(),t)},getFormStorageKey:function(){return BEM.blocks["cf-helpers"].getDraftStorageKey(this.formId)}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"number"},{getControls:function(){var t=this.findBlockInside("input")||this.findBlockInside("textinput"),e=t&&t.findElem("control")||[],i=[];return e.length&&(i=i.concat(e)),i},setPresetAnswer:function(t){var e=this.controls;e.length&&e.forEach(function(e){e.val(t)})},getValidators:function(){var t=this,e=this.__base.apply(this,arguments);return e.incorrectNumber=function(){return!t.controls[0][0].validity||!t.controls[0][0].validity.badInput},e}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"tickets"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("input")||this.findBlocksInside("radio-button")||[]}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"agreement"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("checkbox")||[]},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){return Boolean(t.isChecked())})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"checkbox-list"},{getControls:function(){return this.findBlocksInside("checkbox")||[]},val:function(){var t=[];return this.controls.forEach(function(e){e.isChecked()&&t.push(e.val())}),t.length?t:void 0},setPresetAnswer:function(t){var e=this.getControls();e.length&&(t=[].concat(t),e.forEach(function(e){(t.includes(e.val())||t.includes(e.getMod("slug")))&&e.setMod("checked","yes")}))},checkValueWithCond:function(t,e){if(-1===!["eq","neq"].indexOf(t))return!0;var i=this.val()||[],n=i.length>0;if(!e)return"eq"===t?!n:n;var o=-1!==i.indexOf(e);return"eq"===t?o:!o},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.some(function(t){return Boolean(t.isChecked())})},noOptions:function(){return!t.hasMod("required","yes")||!t.controls||Boolean(t.controls.length)}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"checkbox"},{getControls:function(){return this.findBlocksInside("checkbox")||[]},setPresetAnswer:function(t){var e=(this.controls||[])[0]||"";e&&e.setMod("checked","True"===t&&"yes")},checkValueWithCond:function(t,e){var i=(this.controls||[])[0]||"",n=!1;if(i){var o=i.isChecked()?"True":"False";switch(t){case"eq":o===e&&(n=!0);break;case"neq":o!==e&&(n=!0)}}return n},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){return Boolean(t.isChecked())})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"radio-list"},{getControls:function(){return this.findBlocksInside("radiobox")||[]},setPresetAnswer:function(t){var e=this.controls;Array.isArray(t)&&(t=t[0]),e.length&&e.forEach(function(e){var i=(e.params.slugMap||{})[t]||t;e.val(i)})},getValidators:function(){var t=this,e=this.__base.apply(this,arguments);return e.noOptions=function(){return!t.hasMod("required","yes")||!t.controls||t.controls.every(function(t){return Boolean(t.elem("radio").length)})},e}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"date"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("select")||[]},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||t.controls&&t.controls.every(function(t){return Boolean(t.val())&&"0"!==t.val()})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"file"},{onSetMod:{js:function(){this.controls=this.getControls(),this.subscribeControlChanges()}},getControls:function(){return this.findBlocksInside("attach")||[]},getValidators:function(){var t=this;return{required:function(){return!t.hasMod("required","yes")||!t.controls||t.controls.every(function(t){var e=t.params.alreadyUploaded||!1;return Boolean(t.val())||Boolean(e)})},fileTooLarge:function(){return t.controls.every(function(t){var e=t.params.maxFileSize||0,i=((t.elem("control")[0]||{}).files[0]||{}).size||0;return(e=1024*(e=parseInt(e,10))*1024)>=i})}}}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"multifile"},{onSetMod:{js:function(){this.controls=this.getControls(),this.controls[0].on("upload",this.onUpload()).on("remove",this.onRemove()).on("abort",this.onAbort()).on("add",this.onAdd()),this.addExistingFiles(),this.addHiddenFileInput(""),this.subscribeControlChanges()}},getControls:function(){return this.findBlocksInside("file-upload")||[]},setPresetAnswer:function(t){if(t){if("dataUrl"!==t.format)throw t.format?new Error("Unknown format: "+t.format):new Error("Argument 'format' is required");if("string"!=typeof t.dataUrl)throw new Error("Argument 'dataUrl' must be a string");this.controls[0].addFileByDataUrl(t.dataUrl,t.name)}},addExistingFiles:function(){var t=this;this.controls[0].findBlocksInside("file").forEach(function(e){var i=e.responseData&&e.responseData.id;t.addHiddenFileInput(i)})},onUpload:function(){var t=this,e=t.findBlockOutside("survey"),i=t.controls[0];return function(n,o){var s=o&&o.id||"";s&&t.addHiddenFileInput(s),i.isUploadInProgress()||e.delMod("progress")}},onAbort:function(){var t=this.findBlockOutside("survey"),e=this.controls[0];return function(){e.isUploadInProgress()||t.delMod("progress")}},onRemove:function(){var t=this;return function(e,i){var n=i&&i.id||"";n&&t.removeHiddenFileInput(n)}},onAdd:function(){var t=this.findBlockOutside("survey"),e=this.controls[0];return function(){e.isUploadInProgress()&&t.setMod("progress","yes")}},addHiddenFileInput:function(t){var e=this.controls[0],i={block:"file",mods:{hidden:"yes",id:t},name:this.params&&this.params.name||"",content:t};BEM.DOM.prepend(e.domElem,BEMHTML.apply(i))},removeHiddenFileInput:function(t){this.findBlockInside({block:"file",modName:"id",modVal:t}).destruct()}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"captcha"},{onSetMod:{js:function(){this.controls=this.getControls()}},getControls:function(){return this.findBlocksInside("input")||[]}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"input"},{getControls:function(){return this.findBlocksInside("input")||[]},setPresetAnswer:function(t){var e=this.controls;e.length&&e.forEach(function(e){e.val(t)})}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"textarea"},{getControls:function(){return this.findBlocksInside("input")||[]},setPresetAnswer:function(t){var e=this.controls;e.length&&e.forEach(function(e){e.val(t)})}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"select"},{getControls:function(){return this.findBlocksInside("select")||[]},setPresetAnswer:function(t){var e=this.controls;Array.isArray(t)&&(t=t[0]),e.length&&e.forEach(function(e){var i=(e.params.slugMap||{})[t]||t;e.val(i)})},getValidators:function(){var t=this,e=this.__base.apply(this,arguments);return e.noOptions=function(){return!t.hasMod("required","yes")||!t.controls||t.controls.every(function(t){return Boolean(t.elem("option").length)})},e},checkValueWithCond:function(t,e){var i=!1;return this.getControls().forEach(function(n){var o=n.val()||"";switch(t){case"eq":o===e&&(i=!0);break;case"neq":o!==e&&(i=!0)}}),i}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"autocomplete-selection"},{onSetMod:{js:function(){this.autocomplete=this.findBlockOn("control","input"),this.autocomplete.on("select",this._onAutocompleteSelect,this),this.autocomplete.on("change",this._onAutocompleteChange,this),this.autocomplete.on("blur",this._onAutocompleteBlur,this),this.params.isMultiple&&(this._multipleChoice={}),this.__base.apply(this,arguments),this.params.savedValue&&this.params.savedValue.length&&this.presetValue(this.params.savedValue)}},getValidators:function(){var t=this,e=this.__base.apply(this,arguments),i=this.autocomplete.getDataprovider();return e.noOptions=function(){if(!t.hasMod("required","yes")||!t.autocomplete.length)return!0;var e=$.Deferred();return i.get("",function(t){e.resolve(Boolean(t.items&&t.items.length))}),e},e.required=function(){return!t.hasMod("required","yes")||Boolean(t.val())},e},checkValueWithCond:function(t,e){var i=this.val();return!!i&&Object.keys(i).some(function(i){return{eq:i===e,neq:i!==e}[t]})},clearValue:function(){this.autocomplete.val(""),this.params.isMultiple?(BEM.DOM.replace(this.elem("data"),BEMHTML.apply({block:"survey-question",elem:"data",elemMods:{multiple:"yes"}})),this._multipleChoice={}):this._getHiddenInput().val("")},val:function(){var t=void 0,e=void 0,i=void 0,n=void 0;return this.params.isMultiple?(t=this.findBlocksInside("data","autocomplete-item")).length&&(e={},t.forEach(function(t){var i=t.getData();e[i.value]=i.label})):(i=this._getHiddenInput().val(),n=this.autocomplete.val(),i&&n&&(e={},e[i]=n)),e},_notifyValueChange:function(t){this.trigger("change",{value:t})},_getHiddenInput:function(){return this._hiddenInput||(this._hiddenInput=$(BEM.DOM.append(this.elem("data"),BEMHTML.apply({tag:"input",attrs:{type:"hidden",name:this.params.name,value:""}})))),this._hiddenInput},_onAutocompleteSelect:function(t,e){var i=e.item||"",n=i.params&&i.params.id||"",o=this.autocomplete.val();this.params.isMultiple?(this._addItem(o,n),this.autocomplete._blur()):n&&this._getHiddenInput().val(n),this._updateLocalStorage(n,o)},_onAutocompleteChange:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=void 0;this.params.isMultiple||e.silent||(i=this._getHiddenInput().val(),this._getHiddenInput().val(""),this._updateLocalStorage(i))},_onAutocompleteBlur:function(){if(this.params.isMultiple)this.autocomplete.clearInput(),this.trigger("change");else{var t=this._getHiddenInput().val();t||this.autocomplete.clearInput(),this._notifyValueChange(t)}},_addItem:function(t,e){if(!this._multipleChoice[e]){var i=BEM.DOM.append(this.elem("data"),BEMHTML.apply({block:"autocomplete-item",data:{label:t,name:this.params.name,value:e}}));this._multipleChoice[e]=i.bem("autocomplete-item"),this._multipleChoice[e].on("removeItem",this._removeItem,this)}},_removeItem:function(t,e){var i=t.block,n=e.data;delete this._multipleChoice[n.value],i.destruct(),this._updateLocalStorage(n.value)},_loadSuggestByIds:function(t){var e,i=this.autocomplete.getDataprovider().params.url,n=t.map(function(t){return BEM.create("i-api-request").run({url:i,data:{id:t}})});return(e=$).when.apply(e,_toConsumableArray(n)).then(function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.reduce(function(t,e){return Array.isArray(e)&&Array.isArray(e[1])&&e[1].forEach(function(e){var i=e[1],n=i.id,o=i.text;t[n]=o}),t},{})})},setPresetAnswer:function(t){var e=this,i=void 0;i=Array.isArray(t)?t:"object"===(void 0===t?"undefined":_typeof(t))?Object.keys(t):[t],this._loadSuggestByIds(i).then(function(t){var n=i.reduce(function(e,i){return t[i]&&e.push({id:i,text:t[i]}),e},[]);n.length&&e.presetValue(n)})},presetValue:function(t){var e=this;this.params.isMultiple?t.forEach(function(t){e._addItem(t.text,t.id)}):(e._getHiddenInput().val(t[0].id),e.autocomplete.val(t[0].text,{silent:!0}))},_updateLocalStorage:function(t,e){if(t){var i=this.params.name,n=this.getFormStorageData()||{};n[i]=n[i]||{};var o=n[i];e?o[t]=e:o[t]&&delete o[t],this.setFormStorageData(n)}}}),BEM.DOM.decl("autocomplete-item",{onSetMod:{js:function(){this.bindTo("clear","pointerclick",this._onClear)}},getData:function(t){return t?this.params[t]:this.params},getLabel:function(){return this.getData("label")},getName:function(){return this.getData("name")},val:function(t){return void 0!==t?(t=null===t?"":t.toString(),this.elem("data").val(t),this):this.elem("data").val()},_onClear:function(){this.unbindFromDomElem(this.elem("clear"),"pointerclick"),this.trigger("removeItem",{data:this.getData()})}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"date-widget"},{val:function(t,e){var i=this.getControls()[0];if(t||e)return i.val(t,e),this;var n=[].concat(i.val());return n.length?n:void 0},getControls:function(){return this.controls=this.findBlockInside("date-range-input")||this.findBlockInside("date-input"),this.controls=[].concat(this.controls),this.controls},checkValueWithCond:function(t,e){var i=this.val();if(e=new Date(e),isNaN(e.getTime())){var n=i.some(function(t){return t});return{eq:!n,neq:n}[t]||!1}return e.setHours(e.getHours()+e.getTimezoneOffset()/60),i.some(function(i){var n=e.getTime(),o=void 0;if(i instanceof Date)o=i.getTime();else{var s=new Date(i);s.setHours(s.getHours()+s.getTimezoneOffset()/60),"Invalid Date"!==s.toString()&&(o=s.getTime())}return{gt:o>n,eq:o===n,lt:o<n,neq:o!==n}[t]})},getValidators:function(){var t=this;return{required:function(){if(!t.hasMod("required","yes"))return!0;var e=t.val();return e&&e.every(function(t){return Boolean(t)})}}},setPresetAnswer:function(t){var e=this.getControls()[0],i=this.val();t=[].concat(t),i.length&&Array.isArray(t)&&(t=t.map(function(t){var e=new Date(t),i=e.setHours(e.getHours()-e.getTimezoneOffset()/60);return t?new Date(i):t}),e.val.apply(e,t))}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"scale"},{getControls:function(){return this.findBlocksInside("radiobox")||[]},setPresetAnswer:function(t){var e=this.controls,i="string"==typeof t;e.length&&e.forEach(function(e){var n=e.getMod("id");i?e.val(t):n in t&&e.val(t[n])})}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"questions-group"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.addQuestionsGroupBtn=this.findBlockOn("add-questions-group","button2"),this._COPY_ID_DELIMETER="__",this._COPY_SUBNUM_DELIMETER="_",this.addQuestionsGroupBtn&&this.addQuestionsGroupBtn.on("click",this._onClickAddQuestionGroup,this),this._initCopyNum(),this._addFilledQuestionsGroup(),this.domElem.on(this._buildEventName("click"),this.buildSelector("list-remove"),this._onListRemove.bind(this))}},_autoAddedQuestions:[],_initCopyNum:function(){var t=this,e=this._getQuestionsLists().map(function(e,i){return t.elemParams($(i)).copyNum});this.copyNum=Math.max.apply(null,e)},_addFilledQuestionsGroup:function(){var t=this._getQuestionsLists();if(t&&0!==t.length)for(var e=this.elemParams($(t[0])).fields,i=0;this._isGroupFilled(e,this.copyNum+1)&&i<1e3;){var n=this._addQuestionsGroup(!0);this._autoAddedQuestions=this._autoAddedQuestions.concat(n.findBlocksInside("survey-question")||[]),i++}},getAutoAddedQuestions:function(){return this._autoAddedQuestions},_isGroupFilled:function(t,e){for(var i=(this.params||{}).extraSurveyData,n=(i=void 0===i?{}:i).query,o=void 0===n?{}:n,s=0;s<t.length;s++){var r=this._getCopyId(t[s].name,e);if(o.hasOwnProperty(r))return!0}return!1},_onClickAddQuestionGroup:function(){this._addQuestionsGroup()},_addQuestionsGroup:function(t){this.copyNum++;var e=this._getQuestionsLists(),i=this._getGroupFieldsCopy(this.copyNum),n=BEM.DOM.after(e[e.length-1],BEMHTML.apply({block:"survey-question",elem:"list",elemMods:{closable:"yes"},fields:i,extraSurveyData:this.params.extraSurveyData,copyNum:this.copyNum,js:{copyNum:this.copyNum,fields:i}})).bem("survey-question__list");return t||this.trigger("addQuestions",n.findBlocksInside("survey-question")),n},_getQuestionsLists:function(){return this.findElem("list")},_getGroupFieldsCopy:function(t){var e=this._getQuestionsLists(),i=this.elemParams($(e[0])).fields,n={};return i.forEach(function(t){n[t.name]=t}),i.map(function(e){var i=void 0;e.value=null,e.errors=[],e.name&&(e.name=this._getCopyId(e.name,t),i=e.name),e.tags=e.tags&&e.tags.map(function(e){return e.attrs?(i=i||e.attrs.name||e.attrs.id,e.attrs.name&&(e.attrs.name=this._getCopyId(e.attrs.name,t)),e.attrs.id&&(e.attrs.id=this._getCopyId(e.attrs.id,t)),e.attrs.value=null,e.content=null,e.attrs.checked=null,e):e},this),e.data_source&&e.data_source.filters&&(e.data_source.filters=e.data_source.filters.map(function(e){return n[e.field]&&(e.field=this._getCopyId(e.field,t)),e},this));var o=e.show_conditions||e.other_data&&e.other_data.show_conditions;return o&&(o=o.map(function(e){return e.map(function(e){return n[e.field]&&(e.field=this._getCopyId(e.field,t)),e},this)},this)),e},this)},_getCopyId:function(t,e){var i=t.split(this._COPY_ID_DELIMETER),n=(i[i.length-1]||"").split(this._COPY_SUBNUM_DELIMETER);n.shift();var o=n[n.length-1];return i[0]+this._COPY_ID_DELIMETER+e+(o?this._COPY_SUBNUM_DELIMETER+o:"")},_onListRemove:function(t){var e=$(t.target).closest(this.buildSelector("list")),i=e.bem("survey-question__list").findBlocksInside("survey-question");BEM.DOM.destruct(e),this.trigger("removeQuestions",i)}}),BEM.DOM.decl({name:"survey-question",modName:"widget",modVal:"payment"},{onSetMod:{js:function(){this.__base.apply(this,arguments),this.controls=this.getControls()||[]}},getControls:function(){return this.findBlocksInside("payment")||[]},getValidators:function(){var t=this,e=this.__base.apply(this,arguments),i=this.controls[0];return i.hasMod("fixed",!0)?e:(e.required=function(){if(!t.hasMod("required","yes"))return!0;var e=(i.val()||"").split(" "),n=_slicedToArray(e,1)[0];return Boolean(n)&&"0"!==n},e.isCorrectNumber=function(){return i.isValidAmount()},e.checkMaxAmount=function(){return!i.isValidAmount()||i.checkMaxAmount()},e)},setPresetAnswer:function(t){var e=this.controls;e.length&&e.forEach(function(e){e.val(t)})}}),BEM.DOM.decl("survey-embed-api",{onSetMod:{js:function(){this._surveyBlock=this.findBlockInside("survey"),this.bindToWin("message",this._handlePostMessage)}},_handlePostMessage:function(t){var e=t.originalEvent,i=this._parseData(e.data);if(i){var n={"set-question-value":this._onMessageSetQuestionValue};n.hasOwnProperty(i.message)&&"function"==typeof n[i.message]&&n[i.message].call(this,i)}},_parseData:function(t){var e=void 0===t?"undefined":_typeof(t);if("object"===e&&null!==t)return t;if("string"===e)try{return JSON.parse(t)}catch(t){}return null},_getQuestionBySlug:function(t){return this._surveyBlock.findBlockInside({block:"survey-question",modName:"name",modVal:t})},_onMessageSetQuestionValue:function(t){var e=t.slug,i=t.value,n=this._getQuestionBySlug(e);n?n.presetAnswer(i,"embed"):console.error("No question with slug "+e)}}),function(t,e){var i=0;t.ajaxTransport("iframe",function(e){if(e.async){var n=e.initialIframeSrc||"javascript:false;",o=void 0,s=void 0,r=void 0;return{send:function(a,c){(o=t('<form style="display:none;"></form>')).attr("accept-charset",e.formAcceptCharset),r=/\?/.test(e.url)?"&":"?","DELETE"===e.type?(e.url=e.url+r+"_method=DELETE",e.type="POST"):"PUT"===e.type?(e.url=e.url+r+"_method=PUT",e.type="POST"):"PATCH"===e.type&&(e.url=e.url+r+"_method=PATCH",e.type="POST"),s=t('<iframe src="'+n+'" name="iframe-transport-'+(i+=1)+'"></iframe>').bind("load",function(){var i=void 0,r=t.isArray(e.paramName)?e.paramName:[e.paramName];s.unbind("load").bind("load",function(){var e=void 0;try{if(!(e=s.contents()).length||!e[0].firstChild)throw new Error}catch(t){e=void 0}c(200,"success",{iframe:e}),t('<iframe src="'+n+'"></iframe>').appendTo(o),window.setTimeout(function(){o.remove()},0)}),o.prop("target",s.prop("name")).prop("action",e.url).prop("method",e.type),e.formData&&t.each(e.formData,function(e,i){t('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(o)}),e.fileInput&&e.fileInput.length&&"POST"===e.type&&(i=e.fileInput.clone(),e.fileInput.after(function(t){return i[t]}),e.paramName&&e.fileInput.each(function(i){t(this).prop("name",r[i]||e.paramName)}),o.append(e.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),e.fileInput.removeAttr("form")),o.submit(),i&&i.length&&e.fileInput.each(function(e,n){var o=t(i[e]);t(n).prop("name",o.prop("name")).attr("form",o.attr("form")),o.replaceWith(n)})}),o.append(s).appendTo(document.body)},abort:function(){s&&s.unbind("load").prop("src",n),o&&o.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&t.parseJSON(t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe xml":function(e){var i=e&&e[0];return i&&t.isXMLDoc(i)?i:t.parseXML(i.XMLDocument&&i.XMLDocument.xml||t(i.body).html())},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})}(jQuery),$.support.xhrFormDataFileUpload=Boolean(window.FormData),BEM.DOM.decl("file",{responseData:void 0,size:0,uploadingProcess:null,onSetMod:{js:function(){var t=this,e=t.elem("delete");t.bindTo(e,"pointerclick",function(){t.uploadingProcess?(t.dontThrowError=!0,t.trigger("abort"),t.uploadingProcess.abort()):t.trigger("remove",t.responseData),t.destruct()})}},setData:function(t){return this.size=t.size||0,window.File&&t instanceof File||window.Blob&&t instanceof Blob?(this.fileData=t,this.upload()):this.responseData=t,this},setFileInput:function(t){this.fileInput=t,this.fileInput.val()&&!this.isXHRUpload()&&this.uploadViaIframe()},upload:function(){var t=new FormData,e=this.fileData;this.setMod("progress","yes"),t.append("file",e,e.name),this.uploadingProcess=BEM.create("i-api-request"),this.uploadingProcess.run({type:"POST",url:BEM.blocks["cf-helpers"].buildPath("/files/"),data:t,processData:!1,contentType:!1,dataType:"json"}).done(this.onUploadSuccess()).fail(this.onUploadError()).always(this.onComplete())},uploadViaIframe:function(){var t=this.fileInput;this.setMod("progress","yes"),this.uploadingProcess=$.ajax({type:"POST",url:BEM.blocks["cf-helpers"].buildPath("/files/"),formData:[{name:"sk",value:BEM.blocks["i-global"].param("secretkey")},{name:"visitId",value:BEM.blocks["i-global"].param("visitId")}],fileInput:t,paramName:"file",dataType:"iframe json",success:this.onUploadSuccess(),error:this.onUploadError()})},isXHRUpload:function(){return $.support.xhrFormDataFileUpload},onUploadSuccess:function(){var t=this;return function(e){t.responseData=e,t.trigger("upload",t.responseData),t.delMod("progress")}},onUploadError:function(){var t=this;return function(e){var i=e.responseText||"",n=void 0,o=BEM.I18N("file","default-error-text");if(!t.dontThrowError){try{n=JSON.parse(i)}catch(t){}n?o=(o=n.errors||[]).join("<br/>"):i&&(o=i),t.trigger("upload",{id:"error"}),t.trigger("remove",{id:"error"}),t.trigger("alert",{msg:o}),t.destruct()}}},onComplete:function(){var t=this;return function(){t.uploadingProcess=null}},val:function(){return this.params&&this.params.attrs&&this.params.attrs.name||""}}),BEM.DOM.decl({name:"button",modName:"active",modVal:"no"},{onSetMod:{hovered:function(){return!1},pressed:function(){return!1}}},{}),BEM.DOM.decl("file-upload",{attached:0,uploaded:0,maxFilesCount:1,maxFilesSize:10,filesCountLimitStr:"",filesSizeLimitStr:"",attachedSize:0,onSetMod:{js:function(){var t=this,e=this.params,i=e.files||[];this.survey=this.findBlockOutside("survey"),this.attachButton=this.findBlockInside("attach"),this.fileInput=this.attachButton.findElem("control"),this.maxFilesCount=e.maxFilesCount,this.maxFilesSize=e.maxFilesSize,this.filesCountLimitStr=BEM.I18N("file-upload","files-limit-error",{count:this.maxFilesCount}),this.filesSizeLimitStr=BEM.I18N("file-upload","size-limit-error",{size:this.maxFilesSize}),i.length&&i.forEach(function(e){t.uploaded++,t.createFileView(e)}),this.attachButton.findBlockInside("button").on("press",function(){t.survey.closeAlert()}),this.attachButton.bindTo("change",function(e){var i=$(e.target),n=t.getFileInputFiles(i);t.attemptAddFiles(n),t.trigger("change")})}},attemptAddFiles:function(t){var e=this;this.checkFilesCountLimit(t.length)?this.survey.showAlert(this.filesCountLimitStr,this.attachButton):this.checkFilesSizeLimit(t)?this.survey.showAlert(this.filesSizeLimitStr,this.attachButton):t.forEach(function(t){e.createFileView(t)}),this.attachButton.resetFile()},checkFilesCountLimit:function(t){return this.attached+t>this.maxFilesCount},checkFilesSizeLimit:function(t){var e=parseInt(this.maxFilesSize,10),i=0;return e=1024*e*1024,t.forEach(function(t){t.size&&(i+=t.size)}),this.attachedSize+i>e},getFileInputFiles:function(t){var e=$.makeArray(t.prop("files")),i=void 0;return e.length||(i=t.prop("value"))&&(e=[{name:i.replace(/^.*\\/,"")}]),e},val:function(){var t=[];return this.findBlocksInside("file-list","file").forEach(function(e){t.push(e.val())}),t.join(",")},getFileList:function(){var t=this.findElem("file-list");return t.length||(BEM.DOM.prepend(this.domElem,BEMHTML.apply({block:"file-upload",elem:"file-list"})),t=this.findElem("file-list")),t},createFileView:function(t){var e=String(Number(new Date)),i=t.size||0,n=this.getFileList(),o=this.fileAttrs||{};o.name=t.name;var s={block:"file",mods:{timestamp:e},fileAttrs:o},r=BEMHTML.apply(s);this.fileInput=this.attachButton.findElem("control"),BEM.DOM.append(n,r),this.attached++,this.attachedSize+=i,this.trigger("add"),this.findBlockInside({block:"file",modName:"timestamp",modVal:e}).on("upload",this.onFileUpload()).on("remove",this.onFileRemove()).on("abort",this.onFileUploadAborted()).on("alert",this.onFileUploadAlert()).setData(t).setFileInput(this.fileInput)},removeAttached:function(t){var e=t.target;this.attached--,this.attachedSize-=e.size,this.attached||this.getFileList().remove()},onFileUpload:function(){var t=this;return function(e,i){t.uploaded++,t.trigger("upload",i)}},onFileUploadAborted:function(){var t=this;return function(e){t.removeAttached(e),t.trigger("abort")}},onFileUploadAlert:function(){var t=this,e=t.findBlockOutside("survey");return function(i,n){n=n||{},e.showAlert(n.msg,t.attachButton)}},onFileRemove:function(){var t=this;return function(e,i){t.removeAttached(e),t.uploaded--,t.trigger("remove",i)}},isUploadInProgress:function(){var t=!1;return this.attached-this.uploaded&&(t=!0),t},addFileByDataUrl:function(t,e){var i=this.dataUrlToBlob(t),n={"image/png":"png","image/jpeg":"jpg","application/json":"json"};if(!n[i.type])throw new Error("Unknown mime type. Only 'image/png' and 'image/jpeg' are available");var o=n[i.type];if(e)i.name=String(e);else{var s=(new Date).toISOString().replace("T","--").replace("Z","").replace(/[:.]/g,"-");i.name=s+"."+o}this.attemptAddFiles([i])},dataUrlToBlob:function(t){for(var e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),o=new Uint8Array(n),s=0;s<e.length;s++)o[s]=e.charCodeAt(s);return new Blob([n],{type:i})}}),BEM.DOM.decl("survey-validation",{onSetMod:{js:function(){this.survey=this.findBlockOn("survey"),this.survey.on("survey-validate",this.validateCurrentPage,this),this.survey.on("change-page",this.onSurveyChangePage,this),this.scrollToError()}},validateCurrentPage:function(){var t=this,e=[];this.survey.getCurrentPageQuestions().forEach(function(i){if(t.isQuestionValidationNeeded(i)){var n=i.getValidators()||{};t.delMod(t.findElem(i.domElem,"message","visibility","visible"),"visibility"),i.trigger("validation-change",{isValid:!0}),Object.keys(n).forEach(function(o){var s=n[o]();$.when(s).done(function(e){e||(t.setMod(t.findElem(i.domElem,"message","type",o),"visibility","visible"),i.trigger("validation-change",{isValid:!1}))}),e.push(s)})}}),$.when.apply($,e).done(function(){![].slice.call(arguments).every(function(t){return Boolean(t)})?(t.setMod("invalid","yes"),t.scrollToError(),t.survey.onValidateError()):(t.delMod("invalid"),t.survey.onValidateSuccess())})},onSurveyChangePage:function(t,e){var i=this.survey.getPageQuestions(e.toPage).some(function(t){return this.findElem(t.domElem,"message","visibility","visible").length>0}.bind(this));this.setMod("invalid",i&&"yes"),i||this.scrollToFirstQuestion()},scrollToError:function(){var t=this.findElem("message","visibility","visible");t.length&&this._scrollTo(t.eq(0).parents(".survey__line").offset().top-50)},_scrollTo:function(t){var e=$("html, body");this.sendIframeOffset(t),e.animate({scrollTop:t})},sendIframeOffset:function(t){var e=this.findBlockOutside("b-iframe");e&&e.postMessage({"iframe-offset":t})},scrollToFirstQuestion:function(){var t=$("html, body").scrollTop(),e=this.domElem.offset().top;t>e&&this._scrollTo(e)},isQuestionValidationNeeded:function(t){var e=t.params.groupSlug;return e?!this.survey.namedFields[e].hasMod("hidden","yes")&&!t.hasMod("hidden","yes"):!t.hasMod("hidden","yes")}}),BEM.DOM.decl("survey-conditions",{onSetMod:{js:function(){this.survey=this.findBlockOn("survey"),this.allowPostConditions=this.params.allowPostConditions||"",this.addRelatedFields(this.allowPostConditions),this.addConditions(this.survey.questions),this.checkAllConditions()}},checkAllConditions:function(){this.checkAllQuestionsForConditions(),this.checkPostConditions(),this.survey.updateButtonStates()},survey:"",allowPostConditions:"",relatedFields:[],updateConditions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).operation;t.forEach(function(t){var n=t.params.showConditions;n&&(t.setMod("hidden","yes"),"add"===i&&e.addRelatedFields(n),"remove"===i&&e.removeRelatedFields(n))})},addConditions:function(t){this.updateConditions(t,{operation:"add"})},removeConditions:function(t){this.updateConditions(t,{operation:"remove"})},addRelatedFields:function(t){var e=this,i=[];t&&t.forEach(function(t){t.forEach(function(t){var n=t.field;-1===e.relatedFields.indexOf(n)&&(e.relatedFields.push(n),i.push(n))})}),i.forEach(function(t){var i=e.survey.namedFields[t];i&&i.on("change",e.checkAllConditions,e)})},removeRelatedFields:function(t){var e=this;t&&t.forEach(function(t){t.forEach(function(t){var i=t.field,n=(e.survey.namedFields[i]||{}).group_slug,o=e.relatedFields.indexOf(i);n&&-1!==o&&e.relatedFields.splice(o,1)})})},checkAllQuestionsForConditions:function(){var t=this;t.survey.questions.forEach(function(e){var i=e.params.showConditions;i&&!e.params.isHidden&&(t.checkConditions(i)?e.delMod("hidden"):e.setMod("hidden","yes"))})},checkPostConditions:function(){var t=this.allowPostConditions;t&&(this.checkConditions(t)?this.survey.submitButton.delMod("hidden"):this.survey.submitButton.setMod("hidden","yes"))},checkConditions:function(t){var e=this;return t.some(function(t){return e.checkGroup(t)})},checkGroup:function(t){var e=!1,i=this;return t.forEach(function(t,n){var o=t.operator,s=t.field,r=t.condition,a=t.field_value;if(0===n)e=e||i.checkField(r,s,a);else switch(o){case"and":e=e&&i.checkField(r,s,a);break;case"or":e=e||i.checkField(r,s,a)}}),e},checkField:function(t,e,i){var n=!1,o=this.survey.namedFields[e];return o.hasMod("hidden")&&!o.hasMod("hidden-by-default")?n:n=o.checkValueWithCond(t,i)},addQuestions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.addConditions(t),this.checkAllConditions()},removeQuestions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.removeConditions(t)}}),BEM.decl("uri",{onSetMod:{js:function(){var t=this;["protocol","host","port","path","anchor"].forEach(function(e){t[e]=function(t){return void 0!==t?(this.uriParts[e]=t,this):this.uriParts[e]}})}},encode:function(t){return encodeURIComponent(t)},decode:function(t){try{t=decodeURIComponent(t)}catch(e){try{t=decodeURIComponent(this.convert(t))}catch(t){}}return t},convert:function(t){var e={"%D0":"%D0%A0","%C0":"%D0%90","%C1":"%D0%91","%C2":"%D0%92","%C3":"%D0%93","%C4":"%D0%94","%C5":"%D0%95","%A8":"%D0%81","%C6":"%D0%96","%C7":"%D0%97","%C8":"%D0%98","%C9":"%D0%99","%CA":"%D0%9A","%CB":"%D0%9B","%CC":"%D0%9C","%CD":"%D0%9D","%CE":"%D0%9E","%CF":"%D0%9F","%D1":"%D0%A1","%D2":"%D0%A2","%D3":"%D0%A3","%D4":"%D0%A4","%D5":"%D0%A5","%D6":"%D0%A6","%D7":"%D0%A7","%D8":"%D0%A8","%D9":"%D0%A9","%DA":"%D0%AA","%DB":"%D0%AB","%DC":"%D0%AC","%DD":"%D0%AD","%DE":"%D0%AE","%DF":"%D0%AF","%E0":"%D0%B0","%E1":"%D0%B1","%E2":"%D0%B2","%E3":"%D0%B3","%E4":"%D0%B4","%E5":"%D0%B5","%B8":"%D1%91","%E6":"%D0%B6","%E7":"%D0%B7","%E8":"%D0%B8","%E9":"%D0%B9","%EA":"%D0%BA","%EB":"%D0%BB","%EC":"%D0%BC","%ED":"%D0%BD","%EE":"%D0%BE","%EF":"%D0%BF","%F0":"%D1%80","%F1":"%D1%81","%F2":"%D1%82","%F3":"%D1%83","%F4":"%D1%84","%F5":"%D1%85","%F6":"%D1%86","%F7":"%D1%87","%F8":"%D1%88","%F9":"%D1%89","%FA":"%D1%8A","%FB":"%D1%8B","%FC":"%D1%8C","%FD":"%D1%8D","%FE":"%D1%8E","%FF":"%D1%8F"};return t=t.replace(/%.{2}/g,function(t){return e[t]||t})},normalize:function(t){return(t||"").replace(/\+/g,"%20")},parseUri:function(t){var e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?:?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t||""),i={};return["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"].forEach(function(t,n){i[t]=e[n]||""}),i},parseQuery:function(t){var e,i,n,o,s,r={};if("string"!=typeof t||""===t)return r;for(i=t.replace("?","").split("&"),e=0;e<i.length;e++)n=[(n=i[e].split("=")).shift(),void 0!==n[0]?n.join("="):null],o=this.decode(n[0]),s=n[1]||""===n[1]?this.decode(n[1]):null,r[o]?(s||""===s)&&r[o].push(s):r[o]=null===s?[]:[s];return r},query:function(t){var e="";void 0!==t&&(this.queryParams=this.parseQuery(t));var i=this.queryParams,n=this;return Object.keys(i).forEach(function(t,o){o>0&&(e+="&"),"object"!==_typeof(i[t])||i[t].length?i[t].forEach(function(i,o){o>0&&(e+="&"),e+=n.encode(t)+"="+n.encode(i)}):e+=t}),e.length>0?"?"+e:e},getParam:function(t){return this.queryParams[t]},deleteParam:function(t,e){var i=[];return void 0!==e&&((this.queryParams[t]||[]).forEach(function(t){t!==e&&i.push(t)}),this.queryParams[t]=i),void 0!==e&&0!==i.length||delete this.queryParams[t],this},addParam:function(t,e){return this.queryParams[t]=(this.queryParams[t]||[]).concat(e),this},replaceParam:function(t,e,i){return this.deleteParam(t,i).addParam(t,e)},scheme:function(){var t="";return this.protocol()?(t+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(t+=":"),t+="//"):this.host()&&(t+="//"),t},origin:function(){var t=this.scheme();return this.host()&&(t+=this.host(),this.port()&&(t+=":"+this.port())),t},getRoot:function(){var t=this.origin();return this.path()&&(t+=this.path().replace(/\/[^\/]*$/,"")),t},pathParts:function(){return this.path().split("/")},toString:function(){var t=this.origin();return this.path()?0!==this.path().indexOf("/")&&"/"!==t[t.length-1]?t+="/"+this.path():t+=this.path():this.host()&&(this.query().toString()||this.anchor())&&(t+="/"),this.query().toString()&&(0!==this.query().toString().indexOf("?")&&(t+="?"),t+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t},build:function(){var t="";return t+=this.protocol()?this.protocol():window.location.protocol,t+=t.indexOf(":")!==t.length-1?"://":"//",t+=this.host()?this.host():window.location.hostname,this.port()?t+=":"+this.port():!this.host()&&window.location.hostname&&(t+=":"+window.location.port),this.path()?t+=this.path():this.host()?t+="/":t+=window.location.pathname,this.query()&&(0!==this.query().indexOf("?")&&(t+="?"),t+=this.query()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(t+="#"),t+=this.anchor()),t}},{parse:function(t){var e=BEM.create({block:"uri"});return e.uriParts=e.parseUri(e.normalize(t)),e.queryParams=e.parseQuery(e.uriParts.query),e},normalize:function(t){return this.parse(t).toString()}}),BEM.DOM.decl("survey-field-filters",{onSetMod:{js:function(){this.survey=this.findBlockOn("survey"),this.addFilters()}},relatedFields:[],updateFilters:function(t,e){var i=this,n=(e||{}).operation;(t||i.survey.questions).forEach(function(t){var e=t.params.fieldFilters||[];e.length&&("add"===n&&i.addRelatedFields(e),"remove"===n&&i.removeRelatedFields(e))})},addFilters:function(t){this.updateFilters(t,{operation:"add"})},removeFilters:function(t){this.updateFilters(t,{operation:"remove"})},addRelatedFields:function(t){var e=this,i=[],n=[];t&&t.forEach(function(t){var o=t.field;-1===e.relatedFields.indexOf(o)&&(e.relatedFields.push(o),n.push(o)),i.push(o)}),i.forEach(function(t){var i=e.survey.namedFields[t];if(i){var o=i.params.name||"",s=i.val();s&&e.handleRelatedFieldChange(o,s),-1!==n.indexOf(t)&&i.on("change",function(t,i){var n=i.value||"",o=this.params.name||"";e.handleRelatedFieldChange(o,n,{clearPrev:!0})})}})},removeRelatedFields:function(t){var e=this;t&&t.forEach(function(t){var i=t.field,n=(e.survey.namedFields[i]||{}).group_slug,o=e.relatedFields.indexOf(i);n&&-1!==o&&e.relatedFields.splice(o,1)})},handleRelatedFieldChange:function(t,e,i){var n=this,o=BEM.blocks.uri;i=i||{},n.survey.questions.forEach(function(s){var r=s.params.fieldFilters||[],a=s.hasMod("widget","autocomplete-selection");(r=r.filter(function(e){return e.field===t})).length&&(a&&i.clearPrev&&s.clearValue(),r.forEach(function(i){var r=i.param_name||"",c=s.findBlockInside({block:"input",modName:"suggest",modVal:"yes"}).getDataprovider(),l=c&&c.params&&c.params.url||"",u=void 0,h=e;l&&(u=(l=o.parse(l)).getParam("uri"),u=o.parse(u[0]),a&&("yt_table_source"===r&&((n.survey.namedFields[t]||{}).params||{}).isMultiple?h=null:"[object Object]"===Object.prototype.toString.call(e)&&(h=Object.keys(e).join())),h?u.replaceParam(r,h):u.deleteParam(r),u=u.toString(),l.replaceParam("uri",u),c.params.url=l.toString())}))})},addQuestions:function(t){this.addFilters(t)},removeQuestions:function(t){this.removeFilters(t)}}),BEM.DOM.decl({block:"popup",modName:"autosize",modVal:"yes"},{getDefaultParams:function(){var t=this.__base();return t.offsetWithoutTail=5,t},repaint:function(){return this._saveDefault(),this.__base(),this.domElem.css({maxWidth:this.size.width,height:this.size.height}),this},_saveDefault:function(){this._defSize||(this._defSize=this.getPopupSize())},_resetDefault:function(){return this._defSize=null,this.domElem.css({maxWidth:"",height:""}),this},_getAvailableSpace:function(t){return this._owner?{width:this._getAvailableWidth(t),height:this._getAvailableHeight(t)}:$.extend({},this._defSize)},_getAvailableWidth:function(t){var e=BEM.DOM.getWindowSize(),i=e.width,n=t.offset,o=this._owner[0].getBoundingClientRect(),s=$.extend({},this._defSize);switch(t.to){case"left":i=o.left,"number"==typeof n&&(i-=n),"object"===(void 0===n?"undefined":_typeof(n))&&(n.left&&(i+=n.left),n.right&&(i-=n.right));break;case"right":i=e.width-o.right,"number"==typeof n&&(i-=n),"object"===(void 0===n?"undefined":_typeof(n))&&(n.left&&(i-=n.left),n.right&&(i+=n.right))}return"left"!==t.to&&"right"!==t.to||(i-=this._tailPos?2*this.params.tail.width:this.params.offsetWithoutTail),Math.min(s.width,i)},_getAvailableHeight:function(t){var e=BEM.DOM.getWindowSize(),i=e.height,n=t.offset,o=this._owner[0].getBoundingClientRect(),s=$.extend({},this._defSize);switch(t.to){case"bottom":i=e.height-o.bottom,"number"==typeof n&&(i-=n),"object"===(void 0===n?"undefined":_typeof(n))&&(n.bottom&&(i+=n.bottom),n.top&&(i-=n.top));break;case"top":i=o.top,"number"==typeof n&&(i-=n),"object"===(void 0===n?"undefined":_typeof(n))&&(n.bottom&&(i-=n.bottom),n.top&&(i+=n.top))}return"bottom"!==t.to&&"top"!==t.to||(i-=this._tailPos?2*this.params.tail.height:this.params.offsetWithoutTail),Math.min(s.height,i)},_calcTop:function(t){var e,i=this.__base(t),n=$(window).scrollTop(),o=BEM.DOM.getWindowSize(),s=this.getPlacingSize(),r=this.getOwnerPos(),a=this.getOwnerSize();return i<0&&(i=0),e=Math.max(o.height+n,r.top+a.height),i+s.height>e&&(i=e-s.height),i},_calcLeft:function(t){var e,i=this.__base(t),n=$(window).scrollLeft(),o=BEM.DOM.getWindowSize(),s=this.getPlacingSize(),r=this.getOwnerPos(),a=this.getOwnerSize();return i<0&&(i=0),e=Math.max(o.width+n,r.left+a.width),i+s.width>e&&(i=e-s.width),i},getPlacingSize:function(){return this._availSizes},_calcPlacingSize:function(t){return this._availSizes=this._getAvailableSpace(t),this._availSizes},_calcVisibilityFactor:function(){var t=this._defSize,e=this.getPlacingSize();return e.height*e.width/(t.height*t.width)*100}}),BEM.DOM.decl({block:"popup",modName:"autosize",modVal:"yes"},{_getAvailableHeight:function(t){var e=this.__base(t),i=$.extend({},this._defSize);return"bottom"===t.to&&e<i.height&&e<200?200:e},_getSizeOf:function(t){return{height:t.outerHeight(),width:t[0].getBoundingClientRect().width}},repaint:function(){return this.__base(),this.domElem.css({maxWidth:"100%"}),this}}),BEM.DOM.decl({block:"popup",modName:"role",modVal:"survey-alert"},{_onClick:function(){this.hide()}},{live:function(){this.liveBindTo("pointerclick",function(){this._onClick()})}}),BEM.DOM.decl("scale-question",{onSetMod:{js:function(){var t=this,e=t.findBlockInside("radiobox");e.on("change",function(){var i=e.val();t.elem("answer").val(i),i&&t.elem("answer").prop("checked",!0)})}}}),BEM.DOM.decl("payment",{onSetMod:{js:function(){this.control=this.findBlockOn("payment-value","input"),this.paymentAmount=this.findBlockOn("amount-input","input"),this.paymentType=this.findBlockOn("payment-type","radio-button"),this._bindEvents()}},_bindEvents:function(){this.paymentAmount&&this.paymentAmount.on("change",this._onChange,this),this.paymentType.on("change",this._onChange,this)},_getAmount:function(){return Number(this.paymentAmount.val())},_setAmount:function(t){this.paymentAmount&&this.paymentAmount.val(t)},_isValidAmount:function(t){var e=this.params.defaultSettings.amount;return t=Number(t),isNaN(t)?e:t},_getType:function(){return this.paymentType.val()},_setType:function(t){this.paymentType.val(t)},_isValidType:function(t){return-1!==this.params.types.indexOf(t.toUpperCase())},_onChange:function(){this._setPayment({amount:this._getAmount(),type:this._getType()}),this.trigger("change")},_setPayment:function(t){var e=t.amount,i=t.type;this.control.val(e+" "+i)},val:function(t){if(t){var e=this.params.defaultSettings,i=e.type,n=e.amount,o=t.split(" "),s=_slicedToArray(o,2),r=s[0],a=s[1],c=void 0===a?i:a;return r&&this._isValidAmount(r)||(r=n),c=this._isValidType(c)?c.toUpperCase():i,this._setAmount(r),this._setType(c),this._setPayment({amount:r,type:c})}return this.control.val()},isValidAmount:function(){if(!this.paymentAmount)return!0;var t=this.paymentAmount.findElem("control")[0];if(t&&t.validity)return!t.validity.badInput;var e=this._getAmount();return!isNaN(e)},checkMaxAmount:function(){return!this.paymentAmount||this._getAmount()<=this.params.maxAmount}}),BEM.DOM.decl({block:"payment",modName:"fixed",modVal:!0},{_getAmount:function(){return this.params.amount},_setPayment:function(t){var e=t.type;this.__base({amount:this._getAmount(),type:e})}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._isRetina=BEM.blocks["i-ua"].hiDpi,this.updateIcon(),this.setMod(this.elem("icon"),"loaded","yes")}}},_getIconPath:function(t){var e=this.params.avatarHost,i=this._getIconSize();return[e,"/get-yapic/",t,(this._isRetina?"/islands-retina-":"/islands-")+i].join("")},_setIconBackground:function(t){var e=this.elem("icon");e&&e.css("background-image","url("+t+")")},updateIcon:function(){this.elem("icon").length&&this._setIconBackground(this._getIconPath(this.elemParams("icon").avatarId))},getDefaultParams:function(){return $.extend(this.__base(),{avatarHost:"//avatars.mds.yandex.net"})}}),BEM.DOM.decl("user",{_getIconSize:function(){return"middle"}}),BEM.DOM.decl("user",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);var t=this.findBlockOn("enter","button");if(null!==t){var e=this.domElem.prop("tabindex");this.domElem.attr({tabindex:-1,role:"group"}).removeAttr("aria-haspopup aria-expanded"),t.domElem.attr("tabindex",e),this._domik=BEM.create("domik_type_popup",{mods:this.params.domikMods,js:this.params.domikJs,hidden:this.findBlockInside({block:"domik",modName:"type",modVal:"hidden"})}),t.bindTo("pointerclick",function(t){t.preventDefault(),this._domik.open()}.bind(this))}}}},destruct:function(){this._domik&&this._domik.destruct(),this.__base.apply(this,arguments)}}),BEM.DOM.decl({name:"button",modName:"pseudo",modVal:"yes"},{_onClick:function(t){this.__base.apply(this,arguments),this._href&&t.preventDefault()}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this._username=this.findBlockInside("username","input"),this._password=this.findBlockInside("password","input"),this._button=this.findBlockInside("button","button2"),this._register=this.findBlockInside("register","button2"),this._remember=this.findBlockInside("remember","button2"),this._error=null,this._errorOwner=null,this._username.on("change",this._onInputChange,this),this._password.on("change",this._onInputChange,this),this.bindTo("submit",this._onBeforeSubmit),this.redraw()}}},_checkInput:function(t){var e=this,i=this.__self._getValidators(e,e._username.val(),e._password.val(),{checkEmpty:t}).every(function(t){var i=t();return!Array.isArray(i)||(e.showError(i[0],BEM.I18N("auth",i[1])),i[0].elem("control").attr("aria-invalid",!0),!1)});return i&&(this.hideError(),this._username.elem("control").removeAttr("aria-invalid"),this._password.elem("control").removeAttr("aria-invalid")),i},_onInputChange:function(t){this._checkInput(!1)},enableButton:function(){return this._button.delMod("disabled"),this},disableButton:function(){return this._button.setMod("disabled","yes"),this},_onBeforeSubmit:function(t){if(this._username.val(this._username.val().trim()),!this._checkInput(!0))return!1;this._onSubmit(t),this.trigger("submit",t)},_onSubmit:function(t){this.disableButton(),this.elem("timestamp").val((new Date).getTime())},_getError:function(){if(this._error)return this._error;var t=$(BEMHTML.apply(this.__self._buildError()));return BEM.DOM.append(this.domElem,t),this._error=this.findBlockOn(t,"popup"),this._errorMsg=this.findElem(t,"error"),this._error.on("hide",function(){this._errorOwner=null},this),this._error},showError:function(t,e){var i=this._getError();return this._curErrorMsg!==e&&(this._errorMsg.text(e),this._curErrorMsg=e),this._errorOwner!==t&&(this._errorOwner=t,i.hide().show(t)),this},hideError:function(){return this._error&&this._error.hide(),this},getUsernameBlock:function(){return this._username},getPasswordBlock:function(){return this._password},getHaunterBlock:function(){return this._haunter||(this._haunter=this.findBlockInside("haunter","checkbox")),this._haunter},submit:function(){return this.domElem.submit(),this},redraw:function(){return this._onInputChange(),this._register&&this._register.setUrl(this.getRegisterURL()),this._remember&&this._remember.setUrl(this.getRememberURL()),this},setRetpath:function(t){return this.elem("retpath").val(t),this},getRetpath:function(){return this.elem("retpath").val()},getRegisterURL:function(){return this._getPassportURL("registration")},getRememberURL:function(){return this._getPassportURL("restoration")},_getPassportURL:function(t){return this.params.passport+"/"+t+"?"+$.param({from:this.elem("from").val(),origin:this.elem("origin").val(),retpath:this.getRetpath()})},destruct:function(){this._error&&this._error.destruct(),this.__base.apply(this,arguments)},getDefaultParams:function(){return{passport:BEM.blocks["i-global"].param("passport-host")}}},{_isUsernameValid:function(t,e){return this._isUsernameEmailValid(t)||this._isUsernameLoginValid(t)||this._isUsernamePhoneValid(t,e)},_isUsernameEmailValid:function(t){return/^\s*[^@\s]+@[^@\s]+\s*$/.test(t)},_isUsernameLoginValid:function(t){return/^\s*[-а-яА-ЯёЁA-Za-z0-9.]+\s*$/.test(t)},_isUsernamePhoneValid:function(t,e){return e?(t=(t=(t=(t=(t=(t=t.trim()).replace(/-\)/,"+)")).replace(/(\d)-/g,"$1")).replace(/\((\d+)\)/,"$1")).replace(/(^|\d+)\(/,"$1")).replace(/^\+/,""),/^\d*$/.test(t)):/^\+?[-0-9]*(?:\([-0-9]+\))?[-0-9]+$/.test(t)},_isPasswordValid:function(t){return!/[^\-a-zA-Z0-9`!@#$%^&*()_=+\[\]{};:"\|\\,.<>\/?]/.test(t)},_buildError:function(){return{block:"popup",mods:{autoclosable:"no"},js:{directions:["right","left"]},attrs:{role:"alert","aria-live":"assertive","aria-atomic":!0},content:[{elem:"tail"},{elem:"content",mix:[{block:"auth",elem:"error"}]}]}},_getValidators:function(t,e,i,n){var o=n.checkEmpty,s=this;return[function(){return!o||0!==e.length||[t._username,"fill-input"]},function(){return!o||0!==i.length||[t._password,"fill-input"]},function(){return!/[а-яА-ЯёЁ]/.test(i)||[t._password,"wrong-keyboard-layout"]},function(){return!!s._isUsernameValid(e,!o)||[t._username,"wrong-characters"]},function(){return!!s._isPasswordValid(i)||[t._password,"wrong-characters"]},function(){return!i||i!==e||[t._password,"wrong-password"]}]}}),BEM.DOM.decl("popup",{onSetMod:{js:{inited:function(){this.__base(),this._tailPos={}}}},_calcTailPos:function(t){var e=t.to,i=this._positions[t.key],n=t.tail.axis,o={};return"top"===e||"bottom"===e?o.left=this._calcTailLeft(n,i):"left"!==e&&"right"!==e||(o.top=this._calcTailTop(n,i)),o},_calcTailTop:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=r.height,c=o.top-e.top,l=e.top+r.height-(o.top+n.height);return c>0&&(i+=c,a-=c),l>0&&(a-=l),"middle"===t?i+=(a-=s)/2:"bottom"===t&&(i+=a-=s),i<0&&(i=0),i},_calcTailLeft:function(t,e){var i=0,n=this.getOwnerSize(),o=this.getOwnerPos(),s=this.params.tail.width,r=this.getPopupSize(),a=o.left-e.left,c=r.width,l=e.left+r.width-(o.left+n.width);return a>0&&(i+=a,c-=a),l>0&&(c-=l),"center"===t?i+=(c-=s)/2:"right"===t&&(i+=c-=s),i},_calcOffsetByTail:function(t){var e=this.params.tail.height,i={};switch(t.to){case"top":i={top:-e};break;case"bottom":i={top:e};break;case"right":i={left:e};break;case"left":i={left:-e}}return i},_calcTailOffset:function(t){var e={},i=t.to,n=t.tail,o=n.offset,s=n.axis;return!!o&&("top"===i||"bottom"===i?(e.left=0,"left"===s?e.left+=o.left:"center"===s?(o.left&&(e.left+=o.left),o.right&&(e.left-=o.right)):"right"===s&&(e.left-=o.right)):"left"!==i&&"right"!==i||(e.top=0,"top"===s?e.top+=o.top:"middle"===s?(o.top&&(e.top+=o.top),o.bottom&&(e.top-=o.bottom)):"bottom"===s&&(e.top-=o.bottom)),e)},_resetTailPos:function(t){return t?this._tailPos[t]=null:this._tailPos={},this},_pushTailPos:function(t,e){return this._pushPosTo(this._tailPos,t,e),this}}),BEM.DOM.decl("auth",{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments),this._socialDropdown=null,this._socialBroker=null,this._initSocialProviders()}}},_initSocialProviders:function(){var t=BEM.blocks["i-global"],e=t.param("social-providers"),i=this;if(e)i._createSocial(e);else{var n=t.param("social-host");if(!n)return;i._getSocialProviders(n,function(t){i._createSocial(t)})}},_getSocialProviders:function(t,e){$.getJSON(this.__self._getProvidersURL(t),function(t){e(t.providers)})},_createSocial:function(t){if(!t.length)return this.elem("social").remove(),void this.dropElemCache("social");BEM.DOM.update(this.elem("social"),BEMHTML.apply(this.__self._buildSocial(t,this._uniqId))),this._socialDropdown=this.findBlockInside("social","dropdown")},_onSocialClick:function(t){var e=this;t.preventDefault(),this._socialDropdown&&this._socialDropdown.hide(),this._socialBroker&&this._socialBroker.destruct(),this._socialBroker=BEM.create("social-broker"),this._socialBroker.start(function(){var t=e.getRetpath(),i=this.__self._getTopWindow().location;t&&i.href!==t?i.href=t:i.reload()}.bind(this),$.noop,{provider:this.elemParams(t.data.domElem).provider})}},{live:function(){return this.liveBindTo("social-link","pointerclick",function(t){this._onSocialClick(t)}).liveBindTo("social-link","keyup",function(t){!(t.keyCode===BEM.blocks.keycodes.SPACE)||t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||this._onSocialClick(t)}),this.__base(),!1},_getProvidersURL:function(t){return t+"/providers2.jsonp?callback=?"},_buildSocial:function(t,e){var i,n,o,s=[];return t=t.filter(function(t){return t.enabled}),n=this._buildSocialPrimary(t),s=s.concat(n),o=this._buildSocialSecondary(t),(i=this._buildSocialMore(n,o,e,t))&&s.push(i),s},_buildSocialPrimary:function(t){return t.filter(function(t){return t.primary}).map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}}}})},_buildSocialSecondary:function(t){return t.map(function(t){return{block:"link",mods:{theme:"normal"},mix:{block:"auth",elem:"social-link",js:{provider:t.code}},title:t.display_name,icon:{block:"auth",elem:"social-icon",elemMods:{code:t.code}},text:{mix:{block:"auth",elem:"social-text"},content:this.xmlEscape(t.display_name)}}},this)},xmlEscape:function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return String(t).replace(/&(?!\w+;)|[<>"']/g,function(t){return e[t]||t})},_buildSocialMore:function(t,e,i,n){if(t.length>=n.length)return!1;var o=BEM.I18N("auth","more");return{block:"dropdown",js:!0,content:[{block:"button",mods:{pseudo:"yes",theme:"pseudo",size:"s"},mix:[{block:"dropdown",elem:"switcher"}],attrs:{title:o,"aria-label":o},content:"· · ·"},{elem:"popup",content:{block:"auth",elem:"social-popup",mix:[{block:"auth",js:{uniqId:i}}],content:e}}]}},_getTopWindow:function(){return window.top}}),BEM.decl("social-broker",{_windowWidth:500,_windowHeight:280,onSetMod:{js:{inited:function(){this._window=null,this._timer=0,this._seed=0}}},start:function(t,e,i){var n,o,s=this;this._onSuccess=t,this._onFailure=e,this._hasLocalStorage()?(this._cleanup(),n=(i=$.extend({},s._getDefaultParams(),i)).startUrl+"?",delete i.startUrl,delete i.popupName,o=i.display,this._seed="_"+Number(new Date)+Math.floor(1e9*Math.random()).toString(16).slice(0,6),o&&"popup"!==o&&(i.retpath=i.retnopopup||i.retpath||window.location.href,delete i.retnopopup),i.retpath+=(-1!==i.retpath.indexOf("?")?"&":"?")+"social-broker_seed="+encodeURIComponent(this._seed),n+=Object.keys(i).reduce(function(t,e){return t.push(encodeURIComponent(e)+"="+encodeURIComponent(i[e])),t},[]).join("&"),o&&"popup"!==o?this._navigate(n):(this._lsLoginStatusKey="login_status_from"+this._seed,this._window=window.open(n,this._seed,this._getPopupParams(),!1),this._window?(this._window.focus(),clearInterval(this._timer),this._timer=setInterval(function(){var t;try{t=window.localStorage.getItem(s._lsLoginStatusKey)}catch(t){}if(!s.isClosed()||(clearInterval(s._timer),t)){if(t){var e=s._deserialize(t);!1===s._handleStatus(e)&&s.onFailure({status:"error"})}}else s.onFailure({status:"error"})},500)):this.onFailure({status:"error"}))):this.onFailure({status:"error"})},_hasLocalStorage:function(){return Boolean(window.localStorage)},_deserialize:function(t){var e;try{e=JSON.parse(t)}catch(i){e={raw:t}}return e},_handleStatus:function(t){return"ok"===t.status?(this.onSuccess(t),!0):"error"===t.status&&(this.onFailure(t),!0)},isClosed:function(){return!this._window||this._window.closed},_navigate:function(t){window.location.href=t},_getDefaultParams:function(){var t=BEM.blocks["i-global"],e=t.param("id");return{startUrl:t.param("social-startUrl")||t.param("social-host")+"/broker/start",retpath:t.param("social-retpath")||[location.protocol,"//",location.host,t.param("lego-path"),"/common.blocks/social-broker/__closer/social-broker__closer.html"].join(""),retnopopup:t.param("social-retnopopup")||!1,consumer:e||"morda",popupName:"social_"+(e||"morda"),action_if_anonymous:"authorize",result_location:"fragment"}},_getPositionedParams:function(t,e,i,n){return["scrollbars=yes, resizable=1, menubar=0, toolbar=0, status=0, location=0, directories=0",", left=",e,", top=",t,", width=",i,", height=",n].join("")},_getPopupParams:function(){var t,e,i=this._windowWidth,n=this._windowHeight;return window.opera?(t=(screen.availWidth-i)/2,e=(screen.availHeight-n)/2):(t=(window.innerWidth-i)/2,e=(window.innerHeight-n)/2),t=Math.round(t),e=Math.round(e),this._getPositionedParams(e,t,i,n)},_cleanup:function(){if(clearInterval(this._timer),this._lsLoginStatusKey)try{window.localStorage.removeItem(this._lsLoginStatusKey)}catch(t){}this.isClosed()||this._window.close(),this._window=null},onSuccess:function(t){this._cleanup(),this._onSuccess&&this._onSuccess(t)},onFailure:function(t){this._cleanup(),this._onFailure&&this._onFailure(t)},destruct:function(){this._cleanup(),this.__base.apply(this,arguments)}}),BEM.DOM.decl("dropdown",{onSetMod:{js:{inited:function(){var t=this,e=t.params,i=t.findBlockOn(t.elem(e.popupElem),"popup");t._popup=i,i.on("show",t._onPopupShow,t).on("hide",t._onPopupHide,t),e.popupMethods.forEach(function(e){t[e]=i[e].bind(i)}),t.elem("switcher").attr({"aria-haspopup":!0,"aria-expanded":!1})}},action:function(t,e){var i="open"===e;this.elem("switcher").attr("aria-expanded",i),this._getButton()&&this._getButton().toggleMod("arrow","up","down",i)}},getPopup:function(){return this._popup},_getButton:function(){return this._button||(this._button=this.findBlockInside("switcher","button")),this._button},_toggle:function(){["button","link"].some(function(t){var e=this.findBlockOn("switcher",t);return e&&e.hasMod("disabled")},this)&&!this._popup.isShown()||this._popup.toggle(this.elem("switcher"))},_onSwitcherClick:function(){this._toggle()},_onSwitcherKeyUp:function(t){if(!(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)){var e=this.elem("switcher")[0].tagName.toLowerCase(),i=BEM.blocks.keycodes;"button"!==e&&("a"!==e&&t.keyCode===i.ENTER||t.keyCode===i.SPACE)&&(t.preventDefault(),this._toggle())}},_onPopupShow:function(){this.setMod("action","open").trigger("show")},_onPopupHide:function(){this.setMod("action","closed").trigger("hide")},destruct:function(){this._popup.un("show",this._onPopupShow,this).un("hide",this._onPopupHide,this),this._popup.domElem&&BEM.DOM.destruct(this._popup.domElem),this.__base.apply(this,arguments)},getDefaultParams:function(){return{popupElem:"popup",popupMethods:["toggle","show","hide","setContent"]}}},{live:function(){this.liveBindTo("switcher","pointerclick",function(t){this._onSwitcherClick(t)}).liveBindTo("switcher","keyup",function(t){this._onSwitcherKeyUp(t)})}}),BEM.decl("domik_type_popup",{destruct:function(){this._form&&this._form.destruct(),this._popup&&this._popup.destruct(),this.__base.apply(this,arguments)},create:function(){if(this._created)return this;var t,e=this.__self._buildTypePopup(this._uniqId,this.params.mods,this.params.js),i=$(BEMHTML.apply(e)),n=this.params.hidden;if(BEM.DOM.append(BEM.DOM.scope,i),this._popup=i.bem("popup"),t=this._form=this._popup.findBlockInside("auth"),n){var o=n.domElem;t.getUsernameBlock().val(o.find("input[name=login]").change().val()),t.getPasswordBlock().val(o.find("input[name=passwd]").change().val()),delete this.params.hidden,n.destruct()}return this._created=!0,this},open:function(){return BEM.blocks["i-global"].param("login")?this:(this._created||this.create(),this.close(),this._popup.show(),this.afterCurrentEvent(function(){this._form&&(BEM.blocks["i-ua"].ios||this._form.getUsernameBlock().setMod("focused","yes"),this._form.redraw())}),this)},close:function(){return this._popup.hide(),this},isOpened:function(){return this._popup&&this._popup.isShown()||!1},getFormBlock:function(){return this._form}},{_buildTypePopup:function(t,e,i){var n=(i||{}).explain,o={block:"popup",mix:[{block:"domik",elem:"popup"}],mods:{type:"modal",position:"fixed","body-scroll":"no",theme:"ffffff"},underMods:{type:"paranja"},content:{elem:"content",content:{block:"domik",js:$.extend({_uniqId:t},i),mods:$.extend({type:"popup"},e),content:[n?{elem:"explain",content:n}:"",{block:"auth",mods:{content:"auto"}}]}}};return parseInt(BEM.blocks["i-ua"].ios,10)>=8?$.extend(o,{js:{left:"50%",top:150},attrs:{style:"position: absolute;"}}):o}}),BEM.DOM.decl({block:"popup",modName:"type",modVal:"modal"},{getDefaultParams:function(){var t=this.__base();return t.top="50%",t.left="50%",t},_isPercentVal:function(t){return"string"==typeof t&&t.indexOf("%")>0},show:function(t){return this._moveToContainer(),this.setMod("visibility","outside").setMod("adaptive","no"),this.repaint(t),this},repaint:function(t){this._moveToContainer(),t||(t={left:this.params.left,top:this.params.top});var e=this.getPopupSize();return this._isPercentVal(t.left)&&!t.marginLeft&&(t.marginLeft=e.width/(-100/parseInt(t.left,10))),this._isPercentVal(t.top)&&!t.marginTop&&(t.marginTop=e.height/(-100/parseInt(t.top,10))),this._show(t),this}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{addChild:function(t){this.__base.apply(this,arguments),t.setMod("watch-scroll","no")},_onFirstFocusableKeyDown:function(t){t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._lastFocusable.focus())},_onLastFocusableKeyDown:function(t){t.shiftKey||t.ctrlKey||t.altKey||t.metaKey||t.which===BEM.blocks.keycodes.TAB&&(t.preventDefault(),this._firstFocusable.focus())}}),BEM.DOM.decl({block:"popup",modName:"position",modVal:"fixed"},{getOwnerPos:function(){var t=this.__base.apply(this,arguments);if(this._owner){var e=this._viewport;t.top-=e.scrollTop(),t.left-=e.scrollLeft()}return t}}),function(){var t={};BEM.DOM.decl({block:"popup",modName:"body-scroll",modVal:"no"},{onSetMod:{visibility:function(){return this.afterCurrentEvent(function(){this.domElem&&this.hasMod("visibility","visible")?t[this.params.uniqId]=!0:delete t[this.params.uniqId],this._manageScopeOverflow()}),this.__base()}},destruct:function(){var e=this.params.uniqId;t[e]&&(delete t[e],this._manageScopeOverflow()),this.__base.apply(this,arguments)},_enableScroll:function(){return this._scope.css({overflow:""}),this},_disableScroll:function(){return this._scope.css({overflow:"hidden"}),this},_manageScopeOverflow:function(){var e=Object.keys(t).length;0===e?this._enableScroll():1===e&&this._disableScroll()}})}(),BEM.DOM.decl({block:"user",modName:"menu",modVal:"yes"},{onSetMod:{js:{inited:function(){this.__base.apply(this,arguments);this._dropdown=this.findBlockOutside("dropdown-menu"),this._dropdown&&this._dropdown.on("show",function(){this.bindToWin("scroll",$.throttle(this._hide,60,this)).redraw().domElem.attr("aria-expanded",!0)}.bind(this)).on("hide",function(){this.unbindFromWin("scroll").domElem.attr("aria-expanded",!1)}.bind(this))}}},_hide:function(){this._dropdown&&this._dropdown.hide()},_onClick:function(t){t.preventDefault(),this.__base.apply(this,arguments),this._dropdown&&this._dropdown.toggle(this.elem("icon").length?this.elem("icon"):this.elem("name"))},redraw:function(){if(this.__base.apply(this,arguments),!this._dropdown)return this;var t=this.__self.getLogoutUrl();return this._dropdown._popup.findBlockInside("user").elem("logout").attr("href",t),this},destruct:function(){this._dropdown&&this._dropdown.domElem&&this._dropdown.destruct(),this.__base.apply(this,arguments)}},{live:function(){if(!this._menu){this._menu=!0;var t=BEM.blocks.keycodes.SPACE,e=function(t){return t.shiftKey||t.ctrlKey||t.altKey||t.metaKey};this.liveBindTo("pointerclick",function(t){this._onClick(t)}).liveBindTo("keydown",function(i){e(i)||i.which===t&&this._dropdown&&i.preventDefault()}).liveBindTo("keyup",function(i){e(i)||i.which===t&&this.domElem.click()})}return this.__base(),!1}}),BEM.DOM.decl({block:"dropdown-menu",baseBlock:"dropdown"}),BEM.DOM.decl("i-menu",{onElemSetMod:{item:{state:{current:function(t,e,i,n){if("disabled"===n)return!1;var o=this.elem("item","state","current");this.delMod(o,"state").trigger("current",{prev:o,current:t})}}}},onItemSelectorClick:function(t){var e=this._getItemByEvent(t);this.setMod(e,"state","current")},_getItemByEvent:function(t){return t.data.domElem.closest(this.buildSelector("item"))}},{live:function(){this.liveBindTo("item-selector","pointerclick",function(t){this.onItemSelectorClick(t)})}}),BEM.DOM.decl({block:"b-menu-vert",baseBlock:"i-menu"}),BEM.DOM.decl({name:"b-menu-horiz",baseBlock:"i-menu"}),BEM.DOM.decl("user-menu-update",{onSetMod:{js:{inited:function(){this.updateInformer(this.onUpdateSuccess,this.onUpdateError)}}},updateInformer:function(t,e){this._getExporter().get({},function(i){i&&i.counters&&void 0!==i.counters.unread?t.call(this,i.counters):e&&e.call(this)},e)},onUpdateSuccess:function(t){var e=t.unread,i=this.params.unreadMax;e&&i&&e>i&&(e=i+"+");var n=e?e+" ":"";BEM.DOM.update(this.domElem,n+BEM.I18N("user","letter",{count:e}))},onUpdateError:function(){},_getExporter:function(){return this._exporter||(this._exporter=BEM.create("i-request_type_ajax",{url:this.__self.getExportApiUrl(this.params.caller),cache:!1,xhrFields:{withCredentials:!0},dataType:"json",callbackCtx:this}))},getDefaultParams:function(){return{unreadMax:99}}},{getExportApiUrl:function(t){return"https://mail.yandex."+BEM.blocks["i-global"].param("tld")+"/api/v2/"+(t?t+"/":"")+"counters?silent"}}),BEM.DOM.decl({block:"user",modName:"internal",modVal:"yes"},{_getIconPath:function(){return"//center.yandex-team.ru/api/v1/user/"+BEM.blocks["i-global"].param("login")+"/avatar.jpg"}});